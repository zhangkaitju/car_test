!function(F,$,E){"use strict";var D="ht";if(!F[D]){!function(){for(var W=0,B=["ms","moz","webkit","o"],A=0;A<B.length&&!F.requestAnimationFrame;++A)F.requestAnimationFrame=F[B[A]+"RequestAnimationFrame"],F.cancelAnimationFrame=F[B[A]+"CancelAnimationFrame"]||F[B[A]+"CancelRequestAnimationFrame"];F.requestAnimationFrame||(F.requestAnimationFrame=function(M){var v=(new Date).getTime(),h=Math.max(0,16-(v-W)),o=F.setTimeout(function(){M(v+h)},h);return W=v+h,o}),F.cancelAnimationFrame||(F.cancelAnimationFrame=function(g){U(g)})}();var T,z,p,r,d=F.document,m=null,I=F[D]={},i=F[D+"config"],e=I.Default=i&&i.Default||{},H=I.Style=i&&i.Style||{},b=I.Color=i&&i.Color||{},R=I.IsGetter=i&&i.IsGetter||{},L=Math,G=L.round,w=L.floor,h=L.ceil,n=L.sqrt,k=L.max,_=L.min,Y=L.abs,V=L.cos,u=L.acos,l=L.sin,y=L.pow,Q=L.asin,s=L.PI,X=2*s,v=s/2,A=L.tan,P=L.atan2,C=L.random,S=F.parseInt||global.parseInt,M="2015-12-01",c=function(J){return J*J},f=F.setTimeout,U=F.clearTimeout,W=F.navigator?F.navigator.userAgent.toLowerCase():"",Z=function(u){return u.test(W)},g=Z(/msie/)||Z(/trident/),t=Z(/msie 10/),N=Z(/firefox/),J=Z(/mac/),q=e.isTouchable===E?d?"ontouchend"in d:!1:e.isTouchable,x="default",K="single",o="multiple",a="front",B="back",j="left",O="right",Jg="top",He="bottom",xn="center",Hg="eye",Zb="middle",cs="east",Uj="west",Zi="north",Xj="none",Hd="px",vf="absolute",Xk="border",nc="triangle",Kf="rect",Gp="circle",$d="cylinder",Un="shape",wg="items",Dm="normal",Id="remove",_d="clear",Lk="width",Om="height",kj="ingroup",gr="check",Td="uncheck",Ke="radio",Zd="radioOn",Ug="radioOff",_k="points",Ui="values",Bl="series",Qd="body",bq="label",Nm="label2",qi="note",bm="note2",wh="icons",kg="labelFont",Zj="labelColor",Qf="labelSelectColor",As="note.expanded",Bn="note2.expanded",be="edge.expanded",Hf="edge.points",ac="edge.type",Br="rotation",ue="getRotation",th="setRotation",Dk="hidden",Pf="visible",kf="tuv",Ee="no",cd="select",pb="currentSubGraph",Ri="selectBackground",Pe="autoMakeVisible",dq="autoHideScrollBar",pd="scrollBarColor",wp="scrollBarSize",Bq="indent",De="rowHeight",ef="columnLineColor",cj="rowLineColor",Jk="columnLineVisible",Yh="rowLineVisible",ri="visibleFunc",bo="expandIcon",Wc="collapseIcon",mr="checkMode",zg="sortFunc",Zg="editable",pl="batchEditable",Ki="tristate",Tp="asc",Wf="desc",Nj="position",Pr="elevation",Ci="children",Yn="translateX",Uh="translateY",Kq="dataModel",is="shape3d",Po="shape3d.resolution",hf="shape3d.visible",si="shape3d.from.visible",oi="shape3d.to.visible",Zr="shape3d.top.visible",Bh="shape3d.bottom.visible",_n="repeat.uv.length",Wk="serializeValue",Fn="deserializeValue",ug="centerUniform",cp="rgba(255,255,255,0)",Ob="style",Ik="attr",gm="field",Gr="string",jg="boolean",Zk="color",Le="int",Tn="number",Ef="ew-resize",Hc="ns-resize",Kj="pointer",Fc="auto",Vb="mousedown",hk="mousemove",Li="mouseup",ro="mouseout",zm="touchstart",yn="touchmove",Tj="touchend",db="keydown",kb="keyup",os=N?"DOMMouseScroll":"mousewheel",Bg=q?[zm,yn,Tj]:[db,kb,Vb,hk,Li,ro,os,"contextmenu"],sf=m,Ir=m,zn=m,Mj=Li.length,Xp=function(){zn&&(U(zn.timeout),zn=m)},gp=function(){zn&&dn(zn.e,zn.info)};F.addEventListener&&(q||(F.addEventListener(ro,function(){Xp()},!1),F.addEventListener(os,function(){zk()},!1)),F.addEventListener(kb,function(X){91===X.keyCode?sp={}:delete sp[X.keyCode]},!0),F.addEventListener(db,function(y){sp[y.keyCode]=!0},!0));var Vl,ts,jc,iq=!1,nf=m,io=m,zf={},Pn={},me={},hn={},im={},sp={},bc={},hp={},em={},Cf=[],tl={},Jh=m,Io=m,Qj=function(){},ys=function(){throw"Oops!"},ak=[0,0,0],Oe=[0,0,0,0],po={x:0,y:0,width:0,height:0},en=m,Nb=m,Vn=m,no=function(a){Nb&&!a._72O&&(Vn||(Vn={}),Vn[a._72O=wk()]=a),Vl!=m?Yg()<.05&&r&&!ts&&(gc=Xp):gc=Ud},Af=function(M,Z,R,T){Nb||(Nb={});var l=Nb[M];if(l){if(l.url===Z)return;l.image.onload=Qj,l.image.onerror=Qj}var x=new Image;Nb[M]={image:x,url:Z},x.onload=function(){R&&(x.width=R),T&&(x.height=T),e.handleImageLoaded(M,x),$n(M,x)},x.onerror=function(){$n(M,e.handleUnfoundImage(M,Z)||m)},x.src=Z},$n=function(D,I){if(Pn[D]=I,delete Nb[D],Mk(Nb)&&(Nb=m,Vn)){for(var t in Vn){var h=Vn[t];h.invalidateAll&&h.invalidateAll(),h.redraw&&h.redraw(),h.iv(),delete h._72O}Vn=m}if(I&&Vn)for(var t in Vn){var h=Vn[t];h.invalidateAll&&h.invalidateAll(),h.redraw&&h.redraw(),h.iv()}},Yr=function(){return F.performance&&F.performance.now?F.performance.now():Date.now()},Ac=function(Q,l){l?U(Q):F.cancelAnimationFrame(Q)},or=function($,L,e){return{width:$,height:L,comps:we(e)?e:[e]}},xr=function(D,f){return{type:Gp,rect:[D,f,1.6,1.6],borderWidth:1,borderColor:Vc,gradient:Ub,gradientColor:Kp,background:Vc}},$f=function(U,g){return or(16,16,{type:nc,rect:[4,4,10,8],background:U,rotation:g?1.57:3.14})},Pp=function(Q,b){return or(16,16,{type:nc,rect:[4,4,8,7],background:Q,rotation:b?3.14:0})},mq=function(X){var D=X._orientation;return"horizontal"===D||"h"===D},gj=function(Y){I.z=z=Y},gb=function(_){var y=2,K=0;for(var X in _)X.length===y&&S(X,32)===uc&&(Jh=Io=_[X]),K++;return K},Vf=function(m,J,u){return u?{x:m-u,y:J-u,width:2*u+1,height:2*u+1}:q?{x:m-5,y:J-5,width:11,height:11}:{x:m-1,y:J-1,width:3,height:3}},Jl=function(p){return(/ble$/.test(p)||/ed$/.test(p)||R[p]?"is":"get")+p.charAt(0).toUpperCase()+p.slice(1)},td=function(Q){return"set"+Q.charAt(0).toUpperCase()+Q.slice(1)},xs=function(h){return typeof h===Gr||h instanceof String},Gg=function(q){return typeof q===Tn},Ud=function(c){return typeof c===jg},qm=function(r){return r&&"object"==typeof r},xd=function(S){return"function"==typeof S},we=function(O){return O instanceof Array},cn=function(z){return z instanceof om},Oj=function(Y){return we(Y)?new om(Y):Y},qh=function(Q){return Q instanceof fc},hc=function(h){return h instanceof Kk},Mh=function(L){return L instanceof Jj},_r=function(P){return P&&"IFRAME"===P.tagName},mm=function(e){return e==m?e:parseFloat(e.toFixed(2))},jp=function(H,x,y){var M,P=x.length;if(y)for(var Y=0;y>Y;Y++)if(3===P)H.push(x[0]),H.push(x[1]),H.push(x[2]);else for(M=0;P>M;M++)H.push(x[M]);else if(3===P)H.push(x[0]),H.push(x[1]),H.push(x[2]);else for(M=0;P>M;M++)H.push(x[M])},Fg=function(p){return p?qm(p)?p:{}:!1},cg=function(N,$,q){var w,g=qm(N)?N:N.prototype;for(w in $)q&&g[w]!==E||(g[w]=$[w]);return N},zi=function(M){return String.fromCharCode(M)},bd=function(Q){for(var E,S=0,d="";S<Q.length;S++)E=Q[Q.length-1-S],"%"===E?E="'":"a"===E?E='"':"]"===E&&(E="\\"),d+=zi(E.charCodeAt(0)-1);return d},kd=function(v,n,Y){v.superClass.constructor.apply(n,Y)},Mk=function(s){for(var c in s)return!1;return!0},eb=function(J){return J?0===J.length:!0},_j=function(D,o){return D.x===o.x&&D.y===o.y&&D.width===o.width&&D.height===o.height},gq=function(I,B,h){return B>I?B:I>h?h:I},Yg=function(){var Z=1e4*l(Mj++);return Z-w(Z)},Fr=function(v,C,P){return hs(v.x,v.y,C.x,C.y,P.x,P.y,P.x+P.width,P.y,!0)||hs(v.x,v.y,C.x,C.y,P.x+P.width,P.y,P.x+P.width,P.y+P.height,!0)||hs(v.x,v.y,C.x,C.y,P.x+P.width,P.y+P.height,P.x,P.y+P.height,!0)||hs(v.x,v.y,C.x,C.y,P.x,P.y+P.height,P.x,P.y,!0)},hs=function(E,X,d,F,b,A,R,M,r){var O=(R-b)*(X-A)-(M-A)*(E-b),L=(M-A)*(d-E)-(R-b)*(F-X);if(0!==L){var $=O/L,V=E+$*(d-E),q=X+$*(F-X);return r&&(V+Rp<_(E,d)||V-Rp>k(E,d)||V+Rp<_(b,R)||V-Rp>k(b,R)||q+Rp<_(X,F)||q-Rp>k(X,F)||q+Rp<_(A,M)||q-Rp>k(A,M))?m:[V,q]}return m},Dq=function(c,R,V){if(c&&V)if(R){if(R===Ob)return c.getStyle(V);if(R===Ik)return c.getAttr(V);if(R===gm)return c[V]}else if(V=Jl(V),c[V])return c[V]();return E},oh=function(I,y,k,V){if(I&&k)if(y){if(y===Ob)I.s(k,V);else if(y===Ik)I.a(k,V);else if(y===gm){var U=I[k];I[k]=V,I.fp("f:"+k,U,V)}}else k=td(k),I[k]&&I[k](V)},dp=function(S,y,Q,J,r){y&&Vi(S,Q,J,1,r,y)},df=function(e,X,R,W){var B=1-e;return B*B*X+2*e*B*R+e*e*W},bk=function(N,K,j,m,O){var E=1-N;return E*E*E*K+3*E*E*N*j+3*E*N*N*m+N*N*N*O},Dl=function(s){var R,l,F,C,_=0;return s.forEach(function(t){if(R=t.length,R>0)for(l=t[0],C=1;R>C;C++)F=t[C],_+=Dj(l,F),l=F}),_},Ro=function(p,O,i){var T="__"+p,z=function(v){i["handle_"+p](v)};i[T]||(i[T]=z,O.addEventListener(p,z,!1))},Hn=function(g,A,B){var t="__"+g,x=B[t];x&&(A.removeEventListener(g,x,!1),delete B[t])},Ue=function(D,J){var Z="_"+J;D[Jl(J)]=function(){return this[Z]},D[td(J)]=function(o){var Y=this[Z];this[Z]=o,this.fp(J,Y,o)}},Er=function(y){return $.create(y)},le=function(W){if(!W.element){var u,q;(u=W.textField)?q=ze(Vp.TextField,u):(u=W.textArea)?q=ze(Vp.TextArea,u):(u=W.button)?q=ze(Vp.Button,u):(u=W.comboBox)?q=ze(Vp.ComboBox,u):(u=W.checkBox)?q=ze(Vp.CheckBox,u):(u=W.radioButton)?q=ze(Vp.RadioButton,u):(u=W.slider)?q=ze(Vp.Slider,u):(u=W.colorPicker)?q=ze(Vp.ColorPicker,u):(u=W.image)&&(q=ze(Vp.Image,u)),q&&(W.element=q)}},fq=function(i){var F=d.createElement("div"),u=F.style;return F.tabIndex=-1,F.onkeydown=xf,u.msTouchAction=Xj,u.cursor=x,uq(F,m,0),q&&u.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",m),i&&(u.overflow=Dk),F},pm=function(c){var e=d.createElement("canvas"),z=e.style;return z.msTouchAction=Xj,z.pointerEvents=Xj,uq(e,m,0),c&&If(c,e),e},uq=function(s,M,Z){var X=s.style;X.border=M?M+" solid 1px":0,X.outline=0,X.padding=Z?"0 "+Z+Hd:0,ii(s)},ii=function(X){var $=X.style;$.position=vf,$.margin=0,$.setProperty("box-sizing","border-box",m),$.setProperty("-moz-box-sizing","border-box",m)},$q=function(H,g,l,F){F||(F=Jd),g!=m&&(H.width=g*F,H.style.width=g+Hd),l!=m&&(H.height=l*F,H.style.height=l+Hd)},If=function(I,$,h){I.appendChild($),h&&($.style.position=vf)},ij=function(p,q){q.split||(q+="");for(var J,$=q.split("\n"),Z=0,m=$.length,f=0;m>f;f++){var Y=Ph(p.font,$[f]);Y.width>Z&&(Z=Y.width),J||(J=Y.height)}return p.ss=$,{width:Z,height:J*m}},nm=function(O,z,b,L,S,F){var D=z.length;if(1===D)af(O,z[0],b,L,S);else for(var W=b.height/D,X={x:b.x,y:b.y,width:b.width,height:W},j=0;j<z.length;j++)F?un(O,z[j],L,S,X.x,X.y,X.width,X.height,F):af(O,z[j],X,L,S),X.y+=W},af=function(h,f,L,t,u){h.font=t?t:je,h.fillStyle=u?u:jq,h.textAlign=xn,h.textBaseline=Zb;var V,o;L?L.width===E?(V=L.x,o=L.y):(V=L.x+L.width/2,o=L.y+L.height/2):(V=0,o=0),h.fillText(f,G(V),G(o))},tr=function(E){E.getView&&(E=E.getView());var M=E.offsetWidth||E.scrollWidth;return!M&&E.style.width&&(M=S(E.style.width)),M},nk=function(a){a.getView&&(a=a.getView());var i=a.offsetHeight||a.scrollHeight;return!i&&a.style.height&&(i=S(a.style.height)),i},fo=function(){var r=function(v){xf(v),v.stopPropagation()},I=q?[zm]:[db,Vb,os];return function(A){var i=fq(),k=i.style;return k.backgroundColor=e.disabledBackground,A&&(k.backgroundImage="url("+A+")",k.backgroundPosition="50% 50%",k.backgroundRepeat="no-repeat no-repeat"),I.forEach(function(R){i.addEventListener(R,r)}),i}}(),Gk=function(R){var g=R.getContext("2d");return g.save(),g.lineCap=Cq,g.lineJoin=Ek,g},gc=function(A,K,Q,h){Hm(A,K*Jd,Q*Jd),h*=Jd,1!==h&&A.scale(h,h)},Hm=function(s,L,O){s.translate(L,O)},Ji=function(D,P){D.rotate(P)},cf=function(y){if(d.activeElement!==y)if(q)y.focus();else{var e=Tc(),x=e.target;y.focus(),x.scrollLeft=e.left,x.scrollTop=e.top}},vn=function(T){return T&&T.getView?T.getView():T},Sq=function(X,$,F,D,Z){2===arguments.length&&(F=$.y,D=$.width,Z=$.height,$=$.x);var w=vn(X),v=w.style;(d.fullscreenElement||d.mozFullScreenElement||d.webkitFullscreenElement||d.msFullscreenElement)!==w&&($!==E&&(v.left=$+Hd),F!==E&&(v.top=F+Hd),D!==E&&(v.width=D+Hd),Z!==E&&(v.height=Z+Hd)),X.endEditing&&!q&&X.endEditing(),X.redraw&&X.redraw(),X.invalidate&&X.invalidate(),X.onLayouted&&X.onLayouted($,F,D,Z),X._41O&&X._41O("layout")},Hk=function(Y){var R=Y.touches[0];return R?R:Y.changedTouches[0]},_h=function(S){e.popup&&e.popup.close(),e.popup=S},Aj=m,fe=function(u){Aj.handleWindowTouchMove(u)},Fe=function(H){Aj.handleWindowTouchEnd(H),F.removeEventListener(yn,fe,!1),F.removeEventListener(Tj,Fe,!1),Aj=m},rn=function(E){Aj.handleWindowMouseMove(E)},yg=function(y){Aj.handleWindowMouseUp(y),F.removeEventListener(hk,rn,!1),F.removeEventListener(Li,yg,!1),Aj=m},Rf=function(N){return 1===hb(N)},Ad=function(v,H){return H?H.keyCode===v:sp[v]},tq=function(A){return Bd(A)&&Ad(65,A)},el=function(L){return Ad(46,L)||Ad(8,L)},wd=function(q){return function(T){return T?T.keyCode===q:sp[q]}},uc=573,Bc=[65,83,68,87,37,38,39,40,32,13,27],lj=wd(Bc[0]),Xd=wd(Bc[1]),nq=wd(Bc[2]),Re=wd(Bc[3]),cb=wd(Bc[4]),ek=wd(Bc[5]),Um=wd(Bc[6]),vp=wd(Bc[7]),eg=wd(Bc[8]),Dc=wd(Bc[9]),Dr=wd(Bc[10]),ym={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},ni=[2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,5,5,5,5,5,5,13,43],Sf=m,wf=m,Aq=function(s,B){Sf||(Sf=pm()),$q(Sf,s,B,1);var g=Gk(Sf);return g.clearRect(0,0,s,B),g},di=function(){var x,U={};return function(V){var R,N=U[V];return N||(x||(x=pm(),$q(x,1,1,1)),R=x.getContext("2d"),R.clearRect(0,0,1,1),Vi(R,0,0,1,1,V),N=R.getImageData(0,0,1,1).data,N=U[V]=[N[0],N[1],N[2],N[3]]),N}}(),ds=function(u){if(!xs(u))return u;var t=di(u);return t.CA||(t.CA=[t[0]/255,t[1]/255,t[2]/255,t[3]/255]),t.CA},vo=function(y,P,r,z){var v=pm();v.width=r,v.height=z;var G=v.getContext("2d");G.drawImage(y,0,0,r,z);try{for(var d=G.getImageData(0,0,r,z),s=d.data,F=0,a=s.length;a>F;F+=4){var X=s[F+0],V=s[F+1],J=s[F+2];s[F+0]=P[0]*X,s[F+1]=P[1]*V,s[F+2]=P[2]*J}G.putImageData(d,0,0)}catch(Y){return y}return v},Pm=function(E,k,S){return k&&(k="miter"===S?8*k+20:k+1,E&&xq(E,k)),k},jh=function(d,e){if(e){var L=new tg(e),C=d.width/2,T=d.height/2,I=wb([L.tf(-C,-T),L.tf(C,-T),L.tf(C,T),L.tf(-C,T)]);return I.x+=d.x+C,I.y+=d.y+T,I}return d},hh=function(g,C,V,e,U,q,M,m){e*=Math.PI/180;var c={x:Math.cos(e)*(g.x-M.x)/2+Math.sin(e)*(g.y-M.y)/2,y:-Math.sin(e)*(g.x-M.x)/2+Math.cos(e)*(g.y-M.y)/2},p=Math.pow(c.x,2)/Math.pow(C,2)+Math.pow(c.y,2)/Math.pow(V,2);p>1&&(C*=Math.sqrt(p),V*=Math.sqrt(p));var E=(U==q?-1:1)*Math.sqrt((Math.pow(C,2)*Math.pow(V,2)-Math.pow(C,2)*Math.pow(c.y,2)-Math.pow(V,2)*Math.pow(c.x,2))/(Math.pow(C,2)*Math.pow(c.y,2)+Math.pow(V,2)*Math.pow(c.x,2)));isNaN(E)&&(E=0);var I={x:E*C*c.y/V,y:E*-V*c.x/C},R={x:(g.x+M.x)/2+Math.cos(e)*I.x-Math.sin(e)*I.y,y:(g.y+M.y)/2+Math.sin(e)*I.x+Math.cos(e)*I.y},j=function(E){return Math.sqrt(Math.pow(E[0],2)+Math.pow(E[1],2))},Y=function(q,T){return(q[0]*T[0]+q[1]*T[1])/(j(q)*j(T))},P=function(v,Q){return(v[0]*Q[1]<v[1]*Q[0]?-1:1)*Math.acos(Y(v,Q))},f=P([1,0],[(c.x-I.x)/C,(c.y-I.y)/V]),w=[(c.x-I.x)/C,(c.y-I.y)/V],i=[(-c.x-I.x)/C,(-c.y-I.y)/V],d=P(w,i);Y(w,i)<=-1&&(d=Math.PI),Y(w,i)>=1&&(d=0);var Y=C>V?C:V,D=C>V?1:C/V,B=C>V?V/C:1;if(null==m){var k={x:0,y:0,width:0,height:0};xq(k,Y),k.x*=D,k.width*=D,k.y*=B,k.height*=B;var r=new tg(e);return k=wb([r.tf(k.x,k.y),r.tf(k.x+k.width,k.y),r.tf(k.x+k.width,k.y+k.height),r.tf(k.x,k.y+k.height)]),k.x+=R.x,k.y+=R.y,[{x:k.x,y:k.y},{x:k.x+k.width,y:k.y},{x:k.x+k.width,y:k.y+k.height},{x:k.x,y:k.y+k.height}]}m.translate(R.x,R.y),m.rotate(e),m.scale(D,B),m.arc(0,0,Y,f,f+d,1-q),m.scale(1/D,1/B),m.rotate(-e),m.translate(-R.x,-R.y)},gg=function(f,V){f&&f.beginPath();for(var y,q,c,Q=[],W=function(u){for(var $,T=/(\-{0,1}[\d\.]+)/gi,x=[];$=T.exec(u);)x.push(parseFloat($[0]));return x},L=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,X={x:0,y:0};y=L.exec(V);){var J=y[0],w=J.substr(0,1);if("M"===w||"m"===w){for(var S=W(J),R=0;R<S.length;R+=2){var G=S[R],i=S[R+1];"m"===w&&(G+=X.x,i+=X.y),f&&f.moveTo(G,i),Q.push({x:G,y:i}),X.x=G,X.y=i}q=c=null}else if("H"===w||"h"===w){for(var S=W(J),R=0;R<S.length;R+=1){var G=S[R];"h"===w&&(G+=X.x),f&&f.lineTo(G,X.y),Q.push({x:G,y:X.y}),X.x=G}q=c=null}else if("C"===w||"c"===w){for(var S=W(J),R=0;R<S.length;R+=6){var Y=S[R],F=S[R+1],o=S[R+2],d=S[R+3],G=S[R+4],i=S[R+5];"c"===w&&(Y+=X.x,F+=X.y,o+=X.x,d+=X.y,G+=X.x,i+=X.y),f&&f.bezierCurveTo(Y,F,o,d,G,i),Q.push({x:Y,y:F}),Q.push({x:o,y:d}),Q.push({x:G,y:i}),X.x=G,X.y=i}q=[Y,F,o,d,G,i],c=null}else if("S"===w||"s"===w){for(var S=W(J),R=0;R<S.length;R+=4){var Y,F;q?(Y=2*q[4]-q[2],F=2*q[5]-q[3]):(Y=X.x,F=X.y);var o=S[R],d=S[R+1],G=S[R+2],i=S[R+3];"s"===w&&(o+=X.x,d+=X.y,G+=X.x,i+=X.y),f&&f.bezierCurveTo(Y,F,o,d,G,i),Q.push({x:Y,y:F}),Q.push({x:o,y:d}),Q.push({x:G,y:i}),X.x=G,X.y=i}q=[Y,F,o,d,G,i],c=null}else if("Q"===w||"q"===w){for(var S=W(J),R=0;R<S.length;R+=4){var Y=S[R],F=S[R+1],G=S[R+2],i=S[R+3];"q"===w&&(Y+=X.x,F+=X.y,G+=X.x,i+=X.y),f&&f.quadraticCurveTo(Y,F,G,i),Q.push({x:Y,y:F}),Q.push({x:G,y:i}),X.x=G,X.y=i}q=null,c=[Y,F,G,i]}else if("T"===w||"t"===w){for(var S=W(J),R=0;R<S.length;R+=2){var Y,F;c?(Y=2*c[2]-c[0],F=2*c[3]-c[1]):(Y=X.x,F=X.y);var G=S[R],i=S[R+1];"t"===w&&(G+=X.x,i+=X.y),f&&f.quadraticCurveTo(Y,F,G,i),Q.push({x:Y,y:F}),Q.push({x:G,y:i}),X.x=G,X.y=i}q=null,c=[Y,F,G,i]}else if("V"===w||"v"===w){for(var S=W(J),R=0;R<S.length;R+=1){var i=S[R];"v"===w&&(i+=X.y),f&&f.lineTo(X.x,i),Q.push({x:X.x,y:i}),X.y=i}q=c=null}else if("L"===w||"l"===w){for(var S=W(J),R=0;R<S.length;R+=2){var G=S[R],i=S[R+1];"l"===w&&(G+=X.x,i+=X.y),f&&f.lineTo(G,i),Q.push({x:G,y:i}),X.x=G,X.y=i}q=c=null}else if("A"===w||"a"===w){for(var S=W(J),R=0;R<S.length;R+=7){var A=S[R],P=S[R+1],N=S[R+2],r=S[R+3],u=S[R+4],G=S[R+5],i=S[R+6];"a"===w&&(G+=X.x,i+=X.y);var O=hh(X,A,P,N,r,u,{x:G,y:i},f);O&&(Q=Q.concat(O)),X.x=G,X.y=i}q=c=null}var p=J.substr(J.length-1);("z"===p||"Z"===p)&&f&&f.closePath()}return Q},tn=function(T,p,L,W){var w=!1;if(T.beginPath?T.beginPath():w=!0,cn(p)&&(p=p._as),cn(L)&&(L=L._as),L&&L.length){for(var Q,X,k,O,i=0,Y=0,q=L.length;q>Y;Y++)Q=L[Y],1===Q?(X=p[i++],T.moveTo(X.x,w?-X.y:X.y)):2===Q?(X=p[i++],T.lineTo(X.x,w?-X.y:X.y)):3===Q?(X=p[i++],k=p[i++],T.quadraticCurveTo(X.x,w?-X.y:X.y,k.x,w?-k.y:k.y)):4===Q?(X=p[i++],k=p[i++],O=p[i++],T.bezierCurveTo(X.x,w?-X.y:X.y,k.x,w?-k.y:k.y,O.x,w?-O.y:O.y)):5===Q&&T.closePath();W&&5!==Q&&T.closePath()}else{var e,J,A,B=p.length;if(B>0){for(e=p[0],T.moveTo(e.x,w?-e.y:e.y),J=1;B>J;J++)A=p[J],T.lineTo(A.x,w?-A.y:A.y);W&&T.closePath()}}},wj=function(D,l,F,_){if(cn(D)&&(D=D._as),cn(l)&&(l=l._as),l&&l.length){F=F||er;for(var z,e,R,x,v,C,U=[],N=m,J=0,T=0,L=l.length;L>T;T++)if(z=l[T],1===z)U.push(N=[]),N.push(D[J++]);else if(2===z)N.push(D[J++]);else if(3===z)for(e=N[N.length-1],R=D[J++],x=D[J++],C=1;F>=C;C++)N.push({x:df(C/F,e.x,R.x,x.x),y:df(C/F,e.y,R.y,x.y)});else if(4===z)for(e=N[N.length-1],R=D[J++],x=D[J++],v=D[J++],C=1;F>=C;C++)N.push({x:bk(C/F,e.x,R.x,x.x,v.x),y:bk(C/F,e.y,R.y,x.y,v.y)});else 5===z&&N.push(N[0]);return _&&5!==z&&N&&N.length>2&&N.push(N[0]),U}return _&&D.length>2&&(D=D.slice(),D.push(D[0])),D?[D]:[]},kn=function(A,B,p,E,O,t){var b,g,Z,f=di(B),d=E,x=f[0],V=f[1],R=f[2];if(p){var y=di(p);b=y[0]-x,g=y[1]-V,Z=y[2]-R}else b=255-x,g=255-V,Z=255-R;for(t||(t=E>10?1:.5,t=1>O?_(t/O,2):t);(E-=t)>0;){var u=1-E/d,F=x+b*u,o=V+g*u,Y=R+Z*u;F=_(h(F),255),o=_(h(o),255),Y=_(h(Y),255),A.strokeStyle="rgb("+F+","+o+","+Y+")",A.lineWidth=E,A.stroke()}},tb=function(){var e={};return function(u,N){var $=u+"-"+N,i=e[$];if(i)return i;var n,H,b,D=di(u);return 0>N?(N=(100+N)/100,n=h(D[0]*N),H=h(D[1]*N),b=h(D[2]*N)):(N/=100,n=D[0],H=D[1],b=D[2],n+=(255-n)*N,H+=(255-H)*N,b+=(255-b)*N,n=_(h(n),255),H=_(h(H),255),b=_(h(b),255)),e[$]="rgb("+n+","+H+","+b+")"}}(),Vi=function(F,i,M,d,E,N){N&&(F.fillStyle=N),F.beginPath(),F.rect(i,M,d,E),F.fill()},Yl=function(q,u,C,V,W,U,M){q.beginPath(),yd[u](q,C.x,C.y,C.width,C.height,V,W,U,M)},Rr=function(a,f,z,D,t){var T=yd[z];a.fillStyle=T?T(a,f,D?D:Kp,t.x,t.y,t.width,t.height):f},Yi=function(A,i){A.fillStyle=A.createPattern(i,"repeat")},xg=function(K,X,i,c,y,L,_,D){var f,p,j,U,W,R,G,t,e,a,T;if(Y(y)>2*s&&(y=2*s),W=h(Y(y)/(s/4)),f=y/W,p=-f,j=-c,W>0){R=X+V(c)*L,G=i+l(-c)*_,D?K.lineTo(R,G):K.moveTo(R,G);for(var S=0;W>S;S++)j+=p,U=j-p/2,t=X+V(j)*L,e=i+l(j)*_,a=X+V(U)*(L/V(p/2)),T=i+l(U)*(_/V(p/2)),K.quadraticCurveTo(a,T,t,e)}},Ch=function(l,J,D,Y,R,p,w,L,K){6===arguments.length&&(w=p,L=p,K=p);var m=J+Y,u=D+R,v=R>Y?2*Y:2*R;p=v>p?p:v,w=v>w?w:v,L=v>L?L:v,K=v>K?K:v;var V=.29*K,$=.58*K;l.moveTo(m,u-K),l.quadraticCurveTo(m,u-$,m-V,u-V),l.quadraticCurveTo(m-$,u,m-K,u),V=.29*L,$=.58*L,l.lineTo(J+L,u),l.quadraticCurveTo(J+$,u,J+V,u-V),l.quadraticCurveTo(J,u-$,J,u-L),V=.29*p,$=.58*p,l.lineTo(J,D+p),l.quadraticCurveTo(J,D+$,J+V,D+V),l.quadraticCurveTo(J+$,D,J+p,D),V=.29*w,$=.58*w,l.lineTo(m-w,D),l.quadraticCurveTo(m-$,D,m-V,D+V),l.quadraticCurveTo(m,D+$,m,D+w),l.lineTo(m,u-K)},Mr=function(F,t,S,z,e,f,d){t&&(S=G(S),z=G(z),d||(d=1),F.fillStyle=t,F.beginPath(),F.rect(S,z,d,f),F.rect(S,z,e,d),F.rect(S,z+f-d,e,d),F.rect(S+e-d,z,d,f),F.fill())},Kd=function(z,B,k,G){var g=G.x,H=G.y,n=G.width,j=G.height;if(!(!B||!k||0>=n||0>=j)){var T,a=El(B),V=qk(B),K=k>0;1===k||-1===k?(z.fillStyle=K?a:V,z.beginPath(),z.rect(g,H,1,j),z.rect(g,H,n,1),z.fill(),z.fillStyle=K?V:a,z.beginPath(),z.rect(g,H+j-1,n,1),z.rect(g+n-1,H,1,j),z.fill()):(k=_(Y(k),_(n/2,j/2)),T=z.createLinearGradient(g,H,g+k,H),T.addColorStop(0,K?a:V),T.addColorStop(1,B),z.fillStyle=T,z.beginPath(),z.moveTo(g,H),z.lineTo(g+k,H+k),z.lineTo(g+k,H+j-k),z.lineTo(g,H+j),z.lineTo(g,H),z.fill(),T=z.createLinearGradient(g,H,g,H+k),T.addColorStop(0,K?a:V),T.addColorStop(1,B),z.fillStyle=T,z.beginPath(),z.moveTo(g,H),z.lineTo(g+k,H+k),z.lineTo(g+n-k,H+k),z.lineTo(g+n,H),z.lineTo(g,H),z.fill(),T=z.createLinearGradient(g,H+j,g,H+j-k),T.addColorStop(0,K?V:a),T.addColorStop(1,B),z.fillStyle=T,z.beginPath(),z.moveTo(g,H+j),z.lineTo(g+k,H+j-k),z.lineTo(g+n-k,H+j-k),z.lineTo(g+n,H+j),z.lineTo(g,H+j),z.fill(),T=z.createLinearGradient(g+n,H,g+n-k,H),T.addColorStop(0,K?V:a),T.addColorStop(1,B),z.fillStyle=T,z.beginPath(),z.moveTo(g+n,H),z.lineTo(g+n-k,H+k),z.lineTo(g+n-k,H+j-k),z.lineTo(g+n,H+j),z.lineTo(g+n,H),z.fill())}},Sk=function(S,R,r,x,u,k,p){var I=S.createLinearGradient(x,u,k,p);return I.addColorStop(0,r),I.addColorStop(1,R),I},Lb=function(f,j,G,X,U,E,N){var x=f.createLinearGradient(X,U,E,N);return x.addColorStop(0,j),x.addColorStop(.5,G),x.addColorStop(1,j),x},up=function(q,B,z,Z,t,x,H){var Q=q.createLinearGradient(Z,t,x,H);return Q.addColorStop(0,B),Q.addColorStop(1/3,z),Q.addColorStop(2/3,B),Q.addColorStop(1,z),Q},tf=function(V,H,p,I,M,A,F,D,$){var j=V.createRadialGradient(I+A*D,M+F*$,_(A,F)/24,I+A/2,M+F/2,k(A,F)/2);return j.addColorStop(0,p),j.addColorStop(1,H),j},yd={polygon:function(f,x,U,d,q,Z){(Z==m||3>Z)&&(Z=6);for(var H,z,j=_(d,q)/2,N=x+d/2,I=U+q/2,v=0,C=2*s/Z,b=0;Z>b;b++)H=N+V(v)*j,z=I+l(v)*j,0===b?f.moveTo(H,z):f.lineTo(H,z),v+=C;f.closePath()},arc:function(A,S,a,n,J,u,i,K,j){u==m&&(u=s),i==m&&(i=X),K==m&&(K=!0);var C=S+n/2,g=a+J/2;K&&A.moveTo(C,g),j?(u=-u,i=-i,xg(A,C,g,u,i-u,n/2,J/2,!0)):A.arc(C,g,_(n,J)/2,u,i),K&&A.closePath()},rect:function(h,v,r,n,G){h.rect(v,r,n,G)},circle:function(p,s,W,U,Z){p.arc(s+U/2,W+Z/2,_(U,Z)/2,0,X,!0)},oval:function(W,Q,O,z,V){xg(W,Q+z/2,O+V/2,0,X,z/2,V/2,!1)},roundRect:function(G,q,R,Q,H,d){d==m&&(d=_(_(Q,H)/4,8)),Ch(G,q,R,Q,H,d)},star:function(K,W,y,r,F){var z=2*r,Z=2*F,l=W+r/2,t=y+F/2;K.moveTo(l-z/4,t-Z/12),K.lineTo(W+.306*r,y+.579*F),K.lineTo(l-z/6,t+Z/4),K.lineTo(W+r/2,y+.733*F),K.lineTo(l+z/6,t+Z/4),K.lineTo(W+.693*r,y+.579*F),K.lineTo(l+z/4,t-Z/12),K.lineTo(W+.611*r,y+.332*F),K.lineTo(l+0,t-Z/4),K.lineTo(W+.388*r,y+.332*F),K.closePath()},triangle:function(W,n,H,m,u){W.moveTo(n+m/2,H),W.lineTo(n+m,H+u),W.lineTo(n,H+u),W.closePath()},hexagon:function(j,P,E,w,Q){j.moveTo(P,E+Q/2),j.lineTo(P+w/4,E+Q),j.lineTo(P+3*w/4,+E+Q),j.lineTo(P+w,E+Q/2),j.lineTo(P+3*w/4,E),j.lineTo(P+w/4,E),j.closePath()},pentagon:function(A,I,O,x,u){var v=2*x,X=2*u,h=I+x/2,r=O+u/2;A.moveTo(h-v/4,r-X/12),A.lineTo(h-v/6,r+X/4),A.lineTo(h+v/6,r+X/4),A.lineTo(h+v/4,r-X/12),A.lineTo(h+0,r-X/4),A.closePath()},diamond:function(C,x,l,L,b){C.moveTo(x+L/2,l),C.lineTo(x,l+b/2),C.lineTo(x+L/2,l+b),C.lineTo(x+L,l+b/2),C.closePath()},rightTriangle:function(g,G,W,j,T){g.moveTo(G,W),g.lineTo(G+j,W+T),g.lineTo(G,W+T),g.closePath()},parallelogram:function(L,F,b,D,Q){var r=D/4;L.moveTo(F+r,b),L.lineTo(F+D,b),L.lineTo(F+D-r,b+Q),L.lineTo(F,b+Q),L.closePath()},trapezoid:function(A,T,m,q,c){var t=q/4;A.moveTo(T+t,m),A.lineTo(T+q-t,m),A.lineTo(T+q,m+c),A.lineTo(T,m+c),A.closePath()},"linear.southwest":function(H,t,d,w,P,e,j){return Sk(H,t,d,w,P+j,w+e,P)},"linear.southeast":function(w,h,e,k,c,i,o){return Sk(w,h,e,k+i,c+o,k,c)},"linear.northwest":function(C,K,f,d,R,p,M){return Sk(C,K,f,d,R,d+p,R+M)},"linear.northeast":function($,U,Y,x,r,Z,u){return Sk($,U,Y,x+Z,r,x,r+u)},"linear.north":function(Q,S,i,v,w,B,y){return Sk(Q,S,i,v,w,v,w+y)},"linear.south":function(F,X,f,m,n,D,x){return Sk(F,X,f,m,n+x,m,n)},"linear.west":function(i,k,M,B,t,D){return Sk(i,k,M,B,t,B+D,t)},"linear.east":function(f,Z,z,I,p,F){return Sk(f,Z,z,I+F,p,I,p)},"radial.center":function(q,W,t,C,Q,I,c){return tf(q,W,t,C,Q,I,c,.5,.5)},"radial.southwest":function(v,C,b,I,P,K,M){return tf(v,C,b,I,P,K,M,.25,.75)},"radial.southeast":function(t,m,j,r,N,I,Q){return tf(t,m,j,r,N,I,Q,.75,.75)},"radial.northwest":function(E,w,$,X,N,u,j){return tf(E,w,$,X,N,u,j,.25,.25)},"radial.northeast":function(I,s,t,y,e,z,U){return tf(I,s,t,y,e,z,U,.75,.25)},"radial.north":function(M,p,Z,r,n,T,b){return tf(M,p,Z,r,n,T,b,.5,.25)},"radial.south":function(L,G,N,j,r,m,v){return tf(L,G,N,j,r,m,v,.5,.75)},"radial.west":function(o,A,a,Q,w,s,m){return tf(o,A,a,Q,w,s,m,.25,.5)},"radial.east":function(T,x,L,j,C,w,u){return tf(T,x,L,j,C,w,u,.75,.5)},"spread.horizontal":function(E,s,r,k,R,A){return Lb(E,s,r,k,R,k+A,R)},"spread.vertical":function(n,T,v,A,I,j,h){return Lb(n,T,v,A,I,A,I+h)},"spread.diagonal":function(M,e,y,o,F,L,$){return Lb(M,e,y,o+L,F,o,F+$)},"spread.antidiagonal":function(J,C,A,I,S,L,i){return Lb(J,C,A,I,S,I+L,S+i)},"spread.north":function(N,n,v,Z,i,r,H){return up(N,n,v,Z,i-H/4,Z,i+H+H/4)},"spread.south":function(p,_,c,N,Y,n,O){return up(p,c,_,N,Y-O/4,N,Y+O+O/4)},"spread.west":function(O,$,T,u,Y,p){return up(O,$,T,u-p/4,Y,u+p+p/4,Y)},"spread.east":function(F,E,U,v,f,k){return up(F,U,E,v-k/4,f,v+k+k/4,f)}},tg=function(p,t,$){var u=this;u.s=l(p),u.c=V(p),u.cx=t||0,u.cy=$||0};tg.prototype.tf=function(_,v){1===arguments.length&&(v=_.y,_=_.x);var j=this;return{x:j.c*_-j.s*v+j.cx,y:j.s*_+j.c*v+j.cy}};var Lq=function(c,q,i){return new tg(c).tf(q,i)},sg=function($){var x=$.touches[0],m=$.touches[1],B=x.clientX,T=x.clientY,Y=m.clientX,t=m.clientY;return n((B-Y)*(B-Y)+(T-t)*(T-t))},Ho=(function(){for(var X=0,g=Wf.split(""),v=0;v<g.length;v++)X=10*S(g[v])+X;return gj(F[uc.toString(8*v)+bq.substr(v)]),X}(),function(f,M,p){for(var X=0;X<p.size();X++){var o=p.get(X);f.co(o)&&M.add(o)}for(X=0;X<p.size();X++)o=p.get(X),Ho(f,M,o._children)}),qp=function(Q,W,G){for(var s=0;s<G.size();s++){var e=G.get(G.size()-1-s);Q.co(e)&&W.add(e)}for(s=0;s<G.size();s++)e=G.get(s),qp(Q,W,e._children)},Kn=function(R,A,f){for(var i=!1,w=0;w<f.size();w++){var Z=f.get(w);R.co(Z)?i&&A.add(Z):i=1}for(w=0;w<f.size();w++)Z=f.get(w),Kn(R,A,Z._children)},an=function(q,b,n){for(var G=!1,B=0;B<n.size();B++){var N=n.get(n.size()-1-B);q.co(N)?G&&b.add(N):G=!0}for(B=0;B<n.size();B++)N=n.get(B),an(q,b,N._children)},oe=function(S,q,d,J){var B=J==m;if(0!==q||0!==d||!B&&0!==J){var M,F,W,T,n=new om;S.each(function(L){if(qh(L)){var G=!0;if(W)for(M=0;M<W.size();M++)F=W.get(M),F.isHostOn(L)?(W.removeAt(M),M--,n.remove(F)):G&&(L.isHostOn(F)||L.isLoopedHostOn(F))&&(G=!1);if(T)for(M=0;M<T.size();M++)F=T.get(M),pp(F,L)?(T.removeAt(M),M--,n.remove(F)):G&&pp(L,F)&&(G=!1);G&&(n.add(L),(L._host||L._69O)&&(W||(W=new om),W.add(L)),(Mh(L)||Mh(L._parent))&&(T||(T=new om),T.add(L)))}else if(hc(L)&&L.s(ac)===_k){var H=L.s(Hf);H&&!H.isEmpty()&&(H.each(function(_){B?(_.x+=q,_.y+=d):(_.x+=q,_.y+=J,_.e==m?_.e=d:_.e+=d)}),L.fp(Hf,!1,!0))}}),n.each(function(r){B?r.translate(q,d):r.translate3d(q,d,J)})}},qf={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Or=function(){var s={1:function(G,x){return{x:G.x-x.width/2,y:G.y-x.height/2}},2:function(f,e){return{x:f.x+e.width/2,y:f.y-e.height/2}},3:function(A,l){return{x:A.x+A.width/2,y:A.y-l.height/2}},4:function(k,s){return{x:k.x+k.width-s.width/2,y:k.y-s.height/2}},5:function(D,t){return{x:D.x+D.width+t.width/2,y:D.y-t.height/2}},6:function(H){return{x:H.x,y:H.y}},7:function(y){return{x:y.x+y.width/2,y:y.y}},8:function(o){return{x:o.x+o.width,y:o.y}},9:function(Q,K){return{x:Q.x-K.width/2,y:Q.y+K.height/2}},10:function(K,N){return{x:K.x+N.width/2,y:K.y+N.height/2}},11:function(r,h){return{x:r.x+r.width/2,y:r.y+h.height/2}},12:function(q,i){return{x:q.x-i.width/2+q.width,y:q.y+i.height/2}},13:function(J,z){return{x:J.x+J.width+z.width/2,y:J.y+z.height/2}},14:function(I,E){return{x:I.x-E.width/2,y:I.y+I.height/2}},15:function(G){return{x:G.x,y:G.y+G.height/2}},16:function(e,w){return{x:e.x+w.width/2,y:e.y+e.height/2}},17:function(Y){return{x:Y.x+Y.width/2,y:Y.y+Y.height/2}},18:function(z,O){return{x:z.x+z.width-O.width/2,y:z.y+z.height/2}},19:function(m){return{x:m.x+m.width,y:m.y+m.height/2}},20:function(n,y){return{x:n.x+n.width+y.width/2,y:n.y+n.height/2}},21:function(B,b){return{x:B.x-b.width/2,y:B.y+B.height-b.height/2}},22:function(A,W){return{x:A.x+W.width/2,y:A.y+A.height-W.height/2}},23:function(G,s){return{x:G.x+G.width/2,y:G.y+G.height-s.height/2}},24:function(U,d){return{x:U.x+U.width-d.width/2,y:U.y+U.height-d.height/2}},25:function(Q,g){return{x:Q.x+Q.width+g.width/2,y:Q.y+Q.height-g.height/2}},26:function(b){return{x:b.x,y:b.y+b.height}},27:function(s){return{x:s.x+s.width/2,y:s.y+s.height}},28:function(x){return{x:x.x+x.width,y:x.y+x.height}},29:function(c,j){return{x:c.x-j.width/2,y:c.y+c.height+j.height/2}},30:function(G,n){return{x:G.x+n.width/2,y:G.y+G.height+n.height/2}},31:function(c,z){return{x:c.x+c.width/2,y:c.y+c.height+z.height/2}},32:function(p,c){return{x:p.x+p.width-c.width/2,y:p.y+p.height+c.height/2}},33:function(e,t){return{x:e.x+e.width+t.width/2,y:e.y+e.height+t.height/2}},34:function(_,j){return{x:_.x,y:_.y-j.height/2}},35:function(Y,d){return{x:Y.x+Y.width,y:Y.y-d.height/2}},36:function(i,z){return{x:i.x,y:i.y+i.height+z.height/2}},37:function(X,w){return{x:X.x+X.width,y:X.y+X.height+w.height/2}},38:function(O,d){return{x:O.x+O.width/4,y:O.y-d.height/2}},39:function(Q,u){return{x:Q.x+3*Q.width/4,y:Q.y-u.height/2}},40:function(Y){return{x:Y.x+Y.width/4,y:Y.y}},41:function(L){return{x:L.x+3*L.width/4,y:L.y}},42:function(J,n){return{x:J.x+J.width/4,y:J.y+n.height/2}},43:function(B,m){return{x:B.x+3*B.width/4,y:B.y+m.height/2}},44:function(m,L){return{x:m.x+m.width/2,y:m.y+m.height/2-L.height/2}},45:function(B){return{x:B.x+B.width/4,y:B.y+B.height/2}},46:function($,h){return{x:$.x+$.width/2-h.width/2,y:$.y+$.height/2}},47:function(Y,l){return{x:Y.x+Y.width/2+l.width/2,y:Y.y+Y.height/2}},48:function(W){return{x:W.x+3*W.width/4,y:W.y+W.height/2}},49:function(b,p){return{x:b.x+b.width/2,y:b.y+b.height/2+p.height/2}},50:function(h,r){return{x:h.x+h.width/4,y:h.y+h.height-r.height/2}},51:function(F,O){return{x:F.x+3*F.width/4,y:F.y+F.height-O.height/2}},52:function(Z){return{x:Z.x+Z.width/4,y:Z.y+Z.height}},53:function(I){return{x:I.x+3*I.width/4,y:I.y+I.height}},54:function(s,Q){return{x:s.x+s.width/4,y:s.y+s.height+Q.height/2}},55:function(X,T){return{x:X.x+3*X.width/4,y:X.y+X.height+T.height/2}}};return gb(F)?function(V,n,T){return s[V](n,T?T:po)}:void 0}();cg(b,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Qk=b.reverse,_i=b.transparent,Xo=b.rectSelectBackground,Vk=b.dash,vm=b.titleBackground,lo=b.titleIconBackground,Zl=b.headerBackground,bs=b.headerIconBackground,hg=b.headerSeparator,Lm=b.headerLine,jm=b.contentIconBackground,xm=b.contentLine,ec=(b.widgetIconHighlight,b.widgetIconBorder),Vc=(b.widgetIconGradient,b.imageBackground),Kp=b.imageGradient,yj=b.highlight,Ie=b.label,zs=b.labelSelect;
if(M&&!F.noAlert){var kr=new Date,xb=M.split("-"),Wi=new Date(kr.getFullYear(),kr.getMonth(),kr.getDate()),M=new Date(S(xb[0],10),S(xb[1],10)-1,S(xb[2],10)),Ai=Wi.getTime(),Sg=M.getTime(),Sn=D+"_try",Jp=F.localStorage,nn=F.alert;if(Jp&&nn)if(Sg>Ai&&6048e5>Sg-Ai){var ld=(Sg-Ai)/864e5;Jp&&Jp[Sn]!=ld&&(Jp[Sn]=ld,nn("HT for Web free trail license will expire in "+ld+" days, please apply for a new license!"))}else Ai>=Sg&&nn("HT for Web free trail license expired!"),Jp&&delete Jp[Sn]}var Wl={ms_ac:function(o,w){for(var s=w.ms_ac,C=0;C<s.length;C++)Ue(o,s[C])},ms_listener:function(i){i.addListeners=function(){for(var R=this,E=0;E<Bg.length;E++)R["handle_"+Bg[E]]&&Ro(Bg[E],R.getView(),R)},i.removeListeners=function(){for(var B=this,g=0;g<Bg.length;g++)B["handle_"+Bg[g]]&&Hn(Bg[g],B.getView(),B)}},ms_fire:function(o){o.mp=function(z,d,C){this.addPropertyChangeListener(z,d,C)},o.ump=function(R,r){this.removePropertyChangeListener(R,r)},o.fp=function(I,U,$){return this.firePropertyChange(I,U,$)},o.addPropertyChangeListener=function(a,b,g){var A=this;A._62I||(A._62I=new hq),A._62I.add(a,b,g)},o.removePropertyChangeListener=function(A,R){this._62I.remove(A,R)},o.firePropertyChange=function(h,A,E){if(A===E)return!1;var r=this,Z={property:h,oldValue:A,newValue:E,data:r};return r._62I&&r._62I.fire(Z),r.onPropertyChanged&&r.onPropertyChanged(Z),!0}},ms_attr:function(b){b.a=function(C,c){var R=this;if(2===arguments.length)R.setAttr(C,c);else{if(!qm(C))return R.getAttr(C);for(var H in C)R.setAttr(H,C[H])}return R},b.getAttr=function(f){return this._attrObject?this._attrObject[f]:E},b.setAttr=function(g,w){var O=this;O._attrObject||(O._attrObject={});var S=O._attrObject[g];w===E?delete O._attrObject[g]:O._attrObject[g]=w,O.fp&&O.fp("a:"+g,S,w)&&O.onAttrChanged&&O.onAttrChanged(g,S,w)},b.getSerializableAttrs=function(){var x,I={};for(x in this._attrObject)I[x]=1;return I}},ms_bnb:function(J){J.getBodyColor=function(s){return s.s("body.color")},J.getBorderColor=function(p){return p.s("border.color")}},_51o:function(d){d.mi=function(C,m,J){this.addInteractorListener(C,m,J)},d.umi=function(D,z){this.removeInteractorListener(D,z)},d.fi=function(n){this.fireInteractorEvent(n)},d.addInteractorListener=function(S,q,V){var U=this;U._63I||(U._63I=new hq),U._63I.add(S,q,V)},d.removeInteractorListener=function(A,X){this._63I.remove(A,X)},d.fireInteractorEvent=function(G){this._63I&&this._63I.fire(G)},d.setInteractors=function(i){var q=this,r=q._interactors;r&&r.each(function(E){E.tearDown()}),we(i)&&(i=new om(i)),q._interactors=i,i&&i.each(function(q){q.setUp()}),q.fp("interactors",r,i),q.invalidateSelection()},d.getInteractors=function(){return this._interactors}},_49o:function(o){o._44O=m,o._45O=m,o.addTopPainter=function(z){var e=this;e._44O||(e._44O=new om),e._44O.contains(z)||(e._44O.add(z),e.redraw&&e.redraw())},o.removeTopPainter=function(H){var Z=this;Z._44O&&(Z._44O.remove(H),Z.redraw&&Z.redraw())},o.addBottomPainter=function(v){var B=this;B._45O||(B._45O=new om),B._45O.contains(v)||(B._45O.add(v),B.redraw&&B.redraw())},o.removeBottomPainter=function(F){var S=this;S._45O&&(S._45O.remove(F),S.redraw&&S.redraw())},o._93db=function(U,s){var I=this;I._45O&&I._45O.each(function(j){j.draw?j.draw(U,s):j.call(I,U,s)})},o._92db=function(Z,$){var A=this;A._44O&&A._44O.each(function(a){a.draw?a.draw(Z,$):a.call(A,Z,$)})}},ms_sm:function($){$.sm=function(){return this.getSelectionModel()},$.setSelectableFunc=function(k){this.sm().setFilterFunc(k)},$.getSelectableFunc=function(){return this.sm().getFilterFunc()},$.getSelectionModel=function(){var p=this;return p._3o?p._3o:p.dm().sm()},$.isSelectionModelShared=function(){return!this._3o},$.setSelectionModelShared=function(P){var T=this,j=!T._3o,R=T._16o,b=T.dm();j!==P&&(T.invalidateSelection&&T.invalidateSelection(),P?(b.sm().ms(R,T),T._3o.ums(R,T),T._3o.dispose(),T._3o=m):(b.sm().ums(R,T),T._3o=new Ih(b),T._3o.ms(R,T)),T.onSelectionModelSharedChanged(),T.fp("selectionModelShared",j,P))},$.onSelectionModelSharedChanged=function(){var M=this;M.redraw(),M.invalidateSelection&&M.invalidateSelection()},$.removeSelection=function(){var a=this.dm(),f=a.getHistoryManager();f&&f.beginInteraction(),this.sm().toSelection().each(a.remove,a),f&&f.endInteraction()},$.selectAll=function(){var J=this;J.sm().ss(J.dm().toDatas(J.isVisible,J))},$.isSelected=function(B){return this.sm().co(B)},$.isSelectedById=function(l){var f=this.dm().getDataById(l);return f?this.isSelected(f):!1},$.isSelectable=function(E){return this.sm().isSelectable(E)}},ms_tx:function(s){s._64I=0,s._65O=0,s.isScrollable=function(){return this.getWidth()<this._64I},s._40o=function(){return this.isScrollable()},s.getLogicalPoint=function(g){return Mm(g,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},s.tx=function(H){return H===E?this.getTranslateX():(this.setTranslateX(H),void 0)},s.getTranslateX=function(){return this._65O},s.setTranslateX=function(r){var L=this,X=L.getWidth()-L._64I;X>r&&(r=X),r>0&&(r=0),r=G(r);var s=L._65O;L._65O=r,L.fp(Yn,s,r)}},ms_ty:function(S){S._23Q=0,S._66O=0,S._41o=function(){return this.getHeight()<this._23Q},S.getLogicalPoint=function(m){return Mm(m,this._canvas||this._view,this.tx?this.tx():0,this.ty())},S.ty=function(J){return J===E?this.getTranslateY():(this.setTranslateY(J),void 0)},S.getTranslateY=function(){return this._66O},S.setTranslateY=function(c){var W=this,I=W.getHeight()-W._23Q;I>c&&(c=I),c>0&&(c=0),c=G(c);var u=W._66O;W._66O=c,W.fp(Uh,u,c)}},ms_txy:function(Q){Q._65O=0,Q._66O=0,Q.tx=function(R){return R===E?this.getTranslateX():(this.setTranslateX(R),void 0)},Q.ty=function(I){return I===E?this.getTranslateY():(this.setTranslateY(I),void 0)},Q.onTranslateEnded=function(){},Q.setTranslate=function(S,Z,k){var x=this;if(k=Fg(k)){x._65I&&x._65I.stop(!0);var t=x.tx(),u=x.ty();k.action=function(c){x.setTranslate(t+(S-t)*c,u+(Z-u)*c)},k._37o=function(){delete x._66I,delete x._65I,x.onTranslateEnded()},x._66I=1,x._65I=wo(k)}else x.tx(S),x.ty(Z)},Q.getTranslateX=function(){return this._65O},Q.setTranslateX=function(T){var m=this;T=m.adjustTranslateX(T);var N=m._65O;m._65O=T,m.fp(Yn,N,T)},Q.getTranslateY=function(){return this._66O},Q.setTranslateY=function(M){var T=this;M=T.adjustTranslateY(M);var O=T._66O;T._66O=M,T.fp(Uh,O,M)},Q.adjustTranslateX=function(C){return G(C)},Q.adjustTranslateY=function(B){return G(B)},Q.translate=function(u,G,L){this.setTranslate(this.tx()+u,this.ty()+G,L)},Q.getLogicalPoint=function(w){var u=this;return Mm(w,this._canvas||u._view,u.tx(),u.ty())}},ms_dm:function(P){P.dm=function(r){return r?(this.setDataModel(r),void 0):this.getDataModel()},P.getDataModel=function(){return this._dataModel}},ms_lp:function(z){z.lp=function(Z){return this.getLogicalPoint(Z)}},ms_v:function(P){P._disabled=!1,P.setDisabled=function(r,g){var m=this,Q=m._disabled;Q!==r&&(Q&&(Cs(m._63O),delete m._63O),r&&(If(m._view,m._63O=fo(g)),m.iv()),m._disabled=r,m.fp("disabled",Q,r))},P.isDisabled=function(){return this._disabled},P.getView=function(){return this._view},P.addToDOM=function(){var e=this,o=e.getView(),L=o.style;d.body.appendChild(o),L.left="0",L.right="0",L.top="0",L.bottom="0",F.addEventListener("resize",function(){e.iv()},!1)},P.getWidth=function(){return this._view.clientWidth},P.getHeight=function(){return this._view.clientHeight},P.setWidth=function(D){var z=this;z._view.style.width=D+Hd,z.iv(),z.fp&&z.fp(Lk,m,D)},P.setHeight=function(t){var W=this;W._view.style.height=t+Hd,W.iv(),W.fp&&W.fp(Om,m,t)},P.setFocus=function(R){var O=this,D=O._currentEditor;return R&&D&&(D.getView&&(D=D.getView()),D.contains(R.target))?!1:(cf(O._view),O.endEditing&&O.endEditing(),O._41O("focus"),!0)},P.iv=function(V){this.invalidate(V)},P.invalidate=function(Z){var A=this;A._68I||(A._68I=1,md(A.validate,A,m,Z),A.onInvalidated&&A.onInvalidated(),A._41O("invalidate"))},P.validate=function(){var d=this,p=d._view;if(d._68I&&(delete d._68I,p.parentNode))if(0===p.offsetWidth&&0===p.offsetHeight&&d._67I!==m)d._67I===E&&(d._67I=e.reinvalidateCount),d._67I>0?d._67I--:d._67I=m,d.iv();else{d._41O("beginValidate"),d.validateImpl(),d.onValidated&&d.onValidated(),d._41O("validate");var J=d._63O;J&&(p.lastChild!==J&&(Cs(J),If(p,J)),Sq(J,0,0,d.getWidth(),d.getHeight())),no(d)}},P.layout=function(v,h,P,F){1===arguments.length?Sq(this,v):Sq(this,v,h,P,F)},P.addViewListener=function(Q,X,c){var y=this;y._67O||(y._67O=new hq),y._67O.add(Q,X,c)},P.removeViewListener=function(G,h){this._67O.remove(G,h)},P._41O=function(H){var D=this;D._67O&&(xs(H)&&(H={kind:H}),D._67O.fire(H)),e.viewListener&&e.viewListener(D,H)}},ms_tip:function(g){g.enableToolTip=function(){var g=this;q||g._13o||(g._13o=function(n){var N=g.getToolTip(n);N!=m?e.toolTipContinual&&e.isToolTipShowing()?dn(n,N):(zk(),zn={timeout:f(gp,oc),e:n,info:N}):zk()},g.getView().addEventListener(hk,g._13o,!1))},g.disableToolTip=function(){var W=this;W._13o&&(W.getView().removeEventListener(hk,W._13o,!1),delete W._13o)},g.getToolTip=function(j){var D=this;if(D.getDataAt){var W=D.getDataAt(j);return W?W.getToolTip():m}return D.getValue?mm(D.getValue()):void 0}},_52o:function(P){P._zoom=1,P._29I=po,P.zoomIn=function(N,w){this.setZoom(this._zoom*sh,N,w)},P.zoomOut=function(B,R){this.setZoom(this._zoom/sh,B,R)},P.zoomReset=function(K,$){this.setZoom(1,K,$)},P.scrollZoomIn=function(U){this.setZoom(this._zoom*jd,m,U)},P.scrollZoomOut=function(q){this.setZoom(this._zoom/jd,m,q)},P.pinchZoomIn=function(q){this.setZoom(this._zoom*de,m,q)},P.pinchZoomOut=function(i){this.setZoom(this._zoom/de,m,i)},P.adjustZoom=function(R){return zb>R?zb:R>ep?ep:R},P.getZoom=function(){return this._zoom},P.setZoom=function(H,t,W){var w=this;if(t=Fg(t)){w._14o&&w._14o.stop(!0);var G=w._zoom;t.action=function(p){w._96O(G+(H-G)*p,W)},t._37o=function(){delete w._zooming,delete w._14o,w.onZoomEnded()},w._zooming=1,w._14o=wo(t)}else w._96O(H,W)},P._96O=function($,w){var Y=this;if($=Y.adjustZoom($),$!==Y._zoom){Y.validate();var s=Y._29I,u=Y._zoom;0!==s.width&&0!==s.height&&(w=w?w:{x:s.x+s.width/2,y:s.y+s.height/2},Y.tx((w.x-s.x)*u-w.x*$),Y.ty((w.y-s.y)*u-w.y*$)),Y._zoom=$,Y.fp("zoom",u,$)}}}};cg(e,{baseZIndex:E,isTouchable:q,devicePixelRatio:F.devicePixelRatio?F.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:b.disabledBackground,toolTipDelay:800,toolTipContinual:!1,lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(g){return g*g},labelColor:Ie,labelSelectColor:zs,labelFont:(q?"15":"12")+"px arial, sans-serif",widgetIndent:q?30:20,widgetRowHeight:q?30:20,widgetHeaderHeight:q?32:22,widgetTitleHeight:q?34:24,scrollBarColor:_i,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:q?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,getVersion:function(){return"4.5"},setCompType:function(J,K){bc[J]=K},getCompType:function(Q){return bc[Q]},numberListener:function(){var S={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(v){var V=v.keyCode;S[V]||65===V&&e.isCtrlDown(v)||V>=35&&39>=V||(v.shiftKey||48>V||V>57)&&(96>V||V>105)&&v.preventDefault()}}(),preventDefault:function(a){var t=a.target.tagName;("DIV"===t||"CANVAS"===t)&&(a.preventDefault(),a.preventManipulation&&a.preventManipulation())},getWindowInfo:function(){var Q=d.documentElement,n=Q&&(Q.scrollLeft||Q.scrollTop)?Q:d.body;return{target:n,left:n.scrollLeft,top:n.scrollTop,width:F.innerWidth||n.clientWidth,height:F.innerHeight||n.clientHeight}},isDragging:function(){return!!Aj},isLeftButton:function(P){return q?!0:0===P.button},getTouchCount:function(J){return q?J.touches.length:1},isDoubleClick:function(){var W=new Date,p=m,i=new Date,g=m;return function(u){if(nf=new Date,io=nf.getTime(),q){var P=u.type,M=P+"_isDoubleClick";if(u[M]===E){var C=Pk(u);"touchstart"===P?(u[M]=p&&Dj(p,C)<20&&io-W.getTime()<500,W=nf,p=C):(u[M]=g&&Dj(g,C)<20&&io-i.getTime()<500,i=nf,g=C)}return u[M]}return 2===u.detail}}(),isShiftDown:function(X){return X?X.shiftKey:sp["16"]},isCtrlDown:function(N){return N?J?N.metaKey:N.ctrlKey:J?sp["91"]:sp["17"]},getClientPoint:function(M){return q&&(M=Hk(M)),{x:M.clientX,y:M.clientY}},getPagePoint:function(j){return q&&(j=Hk(j)),{x:j.pageX,y:j.pageY}},createObject:function(N,X){var r=new N;for(var E in X){var S=td(E),k=X[E];r[S]?(r[S](k),"setToolTip"===S&&r.enableToolTip&&r.enableToolTip()):r[E]=k}return r},setImage:function(y,V,X,z){var q=arguments.length;4===q?Af(y,z,V,X):2===q?xs(V)?Af(y,V):Pn[y]=V:1===q&&Af(y,y)},getImage:function(k,f){var T;if(k==m)return m;if(qm(k)?T=k:(T=Pn[k],k&&T===E&&(Nb&&Nb[k]||Af(k,k))),f&&T&&T.tagName){T.colors||(T.colors={});var b=T.colors[f];return b||(b=vo(T,ds(f),T.width,T.height),T.colors[f]=b),b}return T},getId:function(){var x=1;return function(){return++x}}(),callLater:function(x,g,I,$){var e=function(){x.apply(g,I)};return $?f(e,$):F.requestAnimationFrame(e)},clone:function(i){if(!i)return m;if(we(i))return i.slice(0);if(qm(i)){var Y,R={};for(Y in i)R[Y]=i[Y];return R}return i},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(B,M){if(B===M)return 0;if(B==m&&M!=m)return 1;if(B!=m&&M==m)return-1;if(B==m&&M==m)return 0;var h,u=typeof B,b=typeof M;return u===Gr&&b===Gr?h=B.localeCompare(M):u===Tn&&b===Tn&&(h=B-M),h===E&&(h=(""+B).localeCompare(""+M)),h>0?1:0>h?-1:0},getClassMap:function(){return zf},getClass:function(B){if(xs(B)){var o,t=zf[B];if(!t){o=B.split("."),t=F;for(var I=0;I<o.length;I++)t=t[o[I]];zf[B]=t}return t}return B},def:function(Q,E,M){var $,q,G,H=function(){};if(H.prototype=E.prototype,$=new H,xs(Q)){if(zf[Q])throw"'"+Q+"' alreay defined";G=Yo(Q),$.getClassName=function(){return Q}}else G=Q;if($.constructor=G,$.getClass=function(){return G},$.getSuperClass=function(){return E},M)for(q in M)Wl[q]&&Wl.hasOwnProperty(q)?Wl[q]($,M):$[q]=M[q];G.prototype=$,G.superClass=E.prototype},startAnim:function(){var Q=function(s){s.duration&&(s.startTime=Yr()),s.timeId=md(s.tick,m,m,s.interval)};return function(S){return S=qj(S),S.easing=S.easing||e.animEasing,S.duration||S.frames||(S.duration=e.animDuration),S.t=0,S.duration?S.interval=0:(S.frame=0,S.interval=S.interval||10),S.tick=function(){if(S.duration){var y=(Yr()-S.startTime)/S.duration;y>1&&(y=1),S.t=y,S.action(S.easing(y),y),1===y?S.stop():S._isPaused||(S.timeId=md(S.tick))}else S.frame++,y=S.t=S.frame/S.frames,S.action(S.easing(y),y),S.frame<S.frames?S._isPaused||(S.timeId=md(S.tick,m,m,S.interval)):S.stop()},S.resume=function(){S._isPaused&&(delete S._isPaused,S.duration?S.t<1&&(S.startTime=Yr()-S.duration*S.t,S.timeId=md(S.tick)):S.frame<S.frames&&(S.timeId=md(S.tick,m,m,S.interval)))},S.pause=function(){S._isPaused=!0},S.stop=function(n){S.isRunning()&&(S.duration?S.t<1&&n&&(S.t=1,S.action(S.easing(1))):S.frame<S.frames&&n&&(S.frame=S.frames,S.action(S.easing(1))),S._37o&&S._37o(),S.finishFunc&&S.finishFunc(),Ac(S.timeId,!S.duration),delete S.timeId)},S.isRunning=function(){return S.timeId!=m},S.delay?md(Q,m,[S],S.delay):Q(S),S}}(),getTextSize:function(){var x={},i=d?pm().getContext("2d"):m;return function(W,J){i.font=W?W:je;var S=x[i.font];return S||(S=2*i.measureText("e").width+4,x[i.font]=S),{width:i.measureText(J).width+4,height:S}}}(),drawText:function(u,d,x,r,X,P,_,H,E,y){if(d!=m){var B=Ph(x,d),t={};t.y=y&&y!==Zb?y===Jg?P+B.height/2:P+H-B.height/2:P+H/2,t.x=E&&E!==j?E===O?X+_-B.width/2:X+_/2:X+B.width/2,af(u,d,t,x,r)}},getDistance:function(X,x){var J=X.length;return x?3===J?n(c(X[0]-x[0])+c(X[1]-x[1])+c(X[2]-x[2])):2===J?n(c(X[0]-x[0])+c(X[1]-x[1])):X.z===E?n(c(x.x-X.x)+c(x.y-X.y)):n(c(x.x-X.x)+c(x.y-X.y)+c(x.z-X.z)):3===J?n(c(X[0])+c(X[1])+c(X[2])):2===J?n(c(X[0])+c(X[1])):void 0},brighter:function(C,N){return tb(C,N?N:40)},darker:function(K,E){return tb(K,E?E:-40)},unionPoint:function(h,U){if(!h)return m;if(2===arguments.length)return h&&U?{x:_(h.x,U.x),y:_(h.y,U.y),width:Y(h.x-U.x),height:Y(h.y-U.y)}:m;var o=h;if(o._as&&(o=o._as),o.length===E)return m;var Q=o.length;if(0>=Q)return m;for(var H=1,R=o[0],X={x:R.x,y:R.y,width:0,height:0};Q>H;H++){R=o[H];var b=_(X.x,R.x),s=k(X.x+X.width,R.x),x=_(X.y,R.y),w=k(X.y+X.height,R.y);X.x=b,X.y=x,X.width=s-b,X.height=w-x}return X},unionRect:function($,F){if($&&!F)return qj($);if(!$&&F)return qj(F);if($&&F){var L={x:_($.x,F.x),y:_($.y,F.y)};return L.width=k($.x+$.width,F.x+F.width)-L.x,L.height=k($.y+$.height,F.y+F.height)-L.y,L}return m},containsPoint:function(H,D){return!(!H||D.x<H.x||D.y<H.y||D.x>H.x+H.width||D.y>H.y+H.height)},containsRect:function(E,j){if(!E||!j)return!1;var f=j.x,l=j.y,h=j.width,e=j.height,Y=E.width,T=E.height;if(0>(Y|T|h|e))return!1;var p=E.x,P=E.y;if(p>f||P>l)return!1;if(Y+=p,h+=f,f>=h){if(Y>=p||h>Y)return!1}else if(Y>=p&&h>Y)return!1;if(T+=P,e+=l,l>=e){if(T>=P||e>T)return!1}else if(T>=P&&e>T)return!1;return!0},intersectsRect:function(w,B){if(!w||!B)return!1;var X=B.width,q=B.height,z=w.width,E=w.height;if(0>=z||0>=E||0>=X||0>=q)return!1;var h=B.x,b=B.y,m=w.x,k=w.y;return z+=m,E+=k,X+=h,q+=b,z>h&&E>b&&X>m&&q>k},intersection:function(R,U){if(!R||!U)return m;var v=U.x,p=U.y,i=R.x,j=R.y,V=v,_=p,M=i,H=j;return V+=U.width,_+=U.height,M+=R.width,H+=R.height,i>v&&(v=i),j>p&&(p=j),V>M&&(V=M),_>H&&(_=H),V-=v,_-=p,0>=V||0>=_?m:{x:v,y:p,width:V,height:_}},grow:function(v,l){v.x-=l,v.y-=l,v.width=v.width+2*l,v.height=v.height+2*l},getLogicalPoint:function(m,e,R,f,A,$){var T=e.getBoundingClientRect();return m=q?Hk(m):m,{x:(m.clientX-T.left+e.scrollLeft-(R||0))/(A||1),y:(m.clientY-T.top+e.scrollTop-(f||0))/($||1)}},removeHTML:function(){var w;return function(d){return d&&d.parentNode?w===d?!0:(w=d,d.parentNode.removeChild(d),w=m,!0):!1}}(),getToolTipDiv:function(){if(!sf){sf=fq(),Ir=fq();var O=sf.style;e.baseZIndex!=m&&(O.zIndex=S(e.baseZIndex)+3+""),O.whiteSpace="nowrap",O.color=e.toolTipLabelColor,O.background=e.toolTipBackground,O.font=e.toolTipLabelFont,O.padding="5px",O.boxShadow="0px 0px 3px "+e.toolTipShadowColor}return sf},isToolTipShowing:function(){return sf&&sf.parentNode?!0:Ir&&Ir.parentNode?!0:!1},hideToolTip:function(){Cs(sf),Cs(Ir),Xp()},showToolTip:function(E,v){if(!E||v==m)return zk(),void 0;e.getToolTipDiv();var h,w;if(v.html?(v=v.html,h=Ir,Cs(sf)):(h=sf,Cs(Ir)),w=h.style,h.innerHTML=v,h.parentNode||If(d.body,h),E.target){E=ls(E);var Q=Tc(),s=E.x,F=E.y,X=q?60:12;if(q){var G=h.getBoundingClientRect();w.left=s-G.width/2+Hd,w.top=F-G.height-X<Q.top?F+X+Hd:F-G.height-X+Hd}else{w.left=s+X+Hd,w.top=F+X+Hd;var G=h.getBoundingClientRect();G.left+G.width>Q.width&&(w.left=s-X-G.width+Hd),G.top+G.height>Q.height&&(w.top=F-X-G.height+Hd),G.left<0&&(w.left=s+X+Hd),G.top<0&&(w.top=F+X+Hd)}}else w.left=E.x+Hd,w.top=E.y+Hd;Xp()},startDragging:function(d,G){d!==Aj&&(Aj?q?Aj.handleWindowTouchEnd(G):Aj.handleWindowMouseUp(G):q?(F.addEventListener(yn,fe,!1),F.addEventListener(Tj,Fe,!1)):(F.addEventListener(hk,rn,!1),F.addEventListener(Li,yg,!1)),Aj=d)},getImageMap:function(){return Pn},toBoundaries:function(F,z,j,Q){var R=[];return wj(F,z,j,Q).forEach(function(n){var B=[];n.forEach(function(s){B.push(s.x,s.y)}),R.push(B)}),R},getCurrentKeyCodeMap:function(){return sp},drawCenterImage:function(H,V,p,J,k,$,e){var c=bp(V,k),m=Fd(V,k);ib(H,V,G(p-c/2),G(J-m/2),c,m,k,$,e)},drawStretchImage:function(F,D,U,A,i,Y,k,X,r,c){var q,e=bp(D,X),o=Fd(D,X);"uniform"===U?(q=_(Y/e,k/o),e*=q,o*=q,A+=G((Y-e)/2),i+=G((k-o)/2),Y=e,k=o):U===ug&&((e>Y||o>k)&&(q=_(Y/e,k/o),e*=q,o*=q),A+=G((Y-e)/2),i+=G((k-o)/2),Y=e,k=o),ib(F,D,A,i,Y,k,X,r,c)},toCanvas:function(X,O,B,R,Z,Q,I){X=Em(X,I),O=O||bp(X,Z),B=B||Fd(X,Z);var S=pm();$q(S,O,B,1);var E=Gk(S);return bj(E,X,R,0,0,O,B,Z,Q,I),E.restore(),S},createElement:function(B,I,y,n){var P=d.createElement(B);return uq(P,I||b.widgetBorder,2),P.style.font=y?y:je,n!=m&&(P.value=n),P},containedInView:function(G,e){var y=vn(e).getBoundingClientRect();return lf({x:y.left,y:y.top,width:y.width,height:y.height},Pk(G))},isIsolating:function(){return iq},setIsolating:function(r){iq=r},toColorData:di},!0),cg(R,{adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1},!0);var ur=e.disabledOpacity,oc=e.toolTipDelay,Jd=e.devicePixelRatio,Pq=e.autoMakeVisible,Ol=e.autoHideScrollBar,Ub=e.imageGradient,dn=e.showToolTip,zk=e.hideToolTip,Me=e.dashPattern,Cq=e.lineCap,Ek=e.lineJoin,jq=e.labelColor,Ao=e.labelSelectColor,je=e.labelFont,hr=e.widgetIndent,Nh=e.widgetRowHeight,Xl=e.widgetHeaderHeight,jb=e.widgetTitleHeight,cc=e.scrollBarColor,hj=e.scrollBarSize,gs=e.scrollBarTimeout,Yd=e.scrollBarMinLength,Gn=e.scrollBarInteractiveSize,sh=e.zoomIncrement,jd=e.scrollZoomIncrement,de=e.pinchZoomIncrement,ep=e.zoomMax,zb=e.zoomMin,ze=e.createObject,xf=e.preventDefault,Wm=e.setImage,Em=e.getImage,Wb=e.drawCenterImage,bj=e.drawStretchImage,wk=e.getId,md=e.callLater,zl=e.sortFunc,qj=e.clone,Yo=e.getClass,wo=e.startAnim,El=e.brighter,qk=e.darker,un=e.drawText,Ph=e.getTextSize,Kh=e.isLeftButton,hb=e.getTouchCount,Ql=e.isDoubleClick,Do=e.isShiftDown,Bd=e.isCtrlDown,Pk=e.getClientPoint,ls=e.getPagePoint,Dj=e.getDistance,wb=e.unionPoint,ml=e.unionRect,lf=e.containsPoint,um=e.containsRect,zr=e.intersectsRect,yi=e.intersection,Tc=e.getWindowInfo,xq=e.grow,Mm=e.getLogicalPoint,yo=e.startDragging,Cs=e.removeHTML,Wn=e.createElement,er=e.segmentResolution,Th=e.shapeResolution,bl=e.shapeSide,qn=e.def,ms=function(F,n,h){qn(D+"."+F,n,h)};cg(e,{toolTipLabelColor:jq,toolTipLabelFont:je,toolTipBackground:b.toolTipBackground,toolTipShadowColor:_i},!0);var Rp=1e-6,qe="undefined"!=typeof Uint16Array?Uint16Array:Array,uf="undefined"!=typeof Float32Array?Float32Array:Array,qd=function(r,p,F){var C=[r[0]-p[0],r[1]-p[1],r[2]-p[2]];if(F){var e=Dj(C);e>0&&(C[0]/=e,C[1]/=e,C[2]/=e)}return C},te=function(t){return[-t[0],-t[1],-t[2]]},En=function(z,E){return 3===z.length?z[0]*E[0]+z[1]*E[1]+z[2]*E[2]:z[0]*E[0]+z[1]*E[1]},mf=function(){var V=new uf(16);return V[0]=1,V[1]=0,V[2]=0,V[3]=0,V[4]=0,V[5]=1,V[6]=0,V[7]=0,V[8]=0,V[9]=0,V[10]=1,V[11]=0,V[12]=0,V[13]=0,V[14]=0,V[15]=1,V},Bk=mf(),Cr=function(l){var E=new uf(16);return E[0]=l[0],E[1]=l[1],E[2]=l[2],E[3]=l[3],E[4]=l[4],E[5]=l[5],E[6]=l[6],E[7]=l[7],E[8]=l[8],E[9]=l[9],E[10]=l[10],E[11]=l[11],E[12]=l[12],E[13]=l[13],E[14]=l[14],E[15]=l[15],E},Cn=function(I,k){return I[0]=k[0],I[1]=k[1],I[2]=k[2],I[3]=k[3],I[4]=k[4],I[5]=k[5],I[6]=k[6],I[7]=k[7],I[8]=k[8],I[9]=k[9],I[10]=k[10],I[11]=k[11],I[12]=k[12],I[13]=k[13],I[14]=k[14],I[15]=k[15],I},$p=function(V){return V[0]=1,V[1]=0,V[2]=0,V[3]=0,V[4]=0,V[5]=1,V[6]=0,V[7]=0,V[8]=0,V[9]=0,V[10]=1,V[11]=0,V[12]=0,V[13]=0,V[14]=0,V[15]=1,V},Nf=function(l,R){var p=l[0],Q=l[1],e=l[2];return l[0]=R[0]*p+R[4]*Q+R[8]*e+R[12],l[1]=R[1]*p+R[5]*Q+R[9]*e+R[13],l[2]=R[2]*p+R[6]*Q+R[10]*e+R[14],l},jr=function(S,L){var Q=S[0],H=S[1],d=S[2],W=S[3];return S[0]=L[0]*Q+L[4]*H+L[8]*d+L[12]*W,S[1]=L[1]*Q+L[5]*H+L[9]*d+L[13]*W,S[2]=L[2]*Q+L[6]*H+L[10]*d+L[14]*W,S[3]=L[3]*Q+L[7]*H+L[11]*d+L[15]*W,S},Ll=function(){var K,y,k,X,N=zi(Bc[1]+Bc[7]),O=zi(Bc[0]+Bc[3]-Bc[10]),B=zi(Bc[8]+2),v=function(){return y=k.charAt(K),K+=1,y},e=function(){var q="";if(y===B)for(;v();){if(y===B)return v(),q;q+=y}else v()},u=function(){for(;y&&" ">=y;)v()},h=function(){var W,U={};if(y===N){if(v(),u(),y===O)return v(),U;for(;y;){if(W=e(),u(),v(),U[W]=X(),u(),y===O)return v(),U;v(),u()}}};return X=function(){switch(u(),y){case N:return h();default:return e()}},function(Z){if(r={},Z){var P;if(k=Z,K=0,y=" ",P=X(),u(),!y)return P}}}(),ng=function(w,H){if(H){var s=l(H),e=V(H),h=w[4],S=w[5],F=w[6],P=w[7],X=w[8],J=w[9],D=w[10],x=w[11];w[4]=h*e+X*s,w[5]=S*e+J*s,w[6]=F*e+D*s,w[7]=P*e+x*s,w[8]=X*e-h*s,w[9]=J*e-S*s,w[10]=D*e-F*s,w[11]=x*e-P*s}},nb=function(f,S){if(S){var $=l(S),Q=V(S),c=f[0],J=f[1],y=f[2],h=f[3],a=f[8],o=f[9],L=f[10],P=f[11];f[0]=c*Q-a*$,f[1]=J*Q-o*$,f[2]=y*Q-L*$,f[3]=h*Q-P*$,f[8]=c*$+a*Q,f[9]=J*$+o*Q,f[10]=y*$+L*Q,f[11]=h*$+P*Q}},am=function(H,N){if(N){var E=l(N),f=V(N),K=H[0],T=H[1],J=H[2],A=H[3],y=H[4],h=H[5],I=H[6],O=H[7];H[0]=K*f+y*E,H[1]=T*f+h*E,H[2]=J*f+I*E,H[3]=A*f+O*E,H[4]=y*f-K*E,H[5]=h*f-T*E,H[6]=I*f-J*E,H[7]=O*f-A*E}},Fh=function(t,v,w){return wq(m,w===!1?m:t.s3(),t.r3(),t.getRotationMode(),t.p3(),m,v)},wq=function(k,M,A,O,v,P,l){return P||(P=mf()),v&&Gf(P,v),lp(P,A,O),l&&dh(P,P,l),M&&kl(P,M),k&&dh(P,P,k),P},kp=function(K,l,Z){l=S(l),Z=S(Z);var $=this;$.g=K,$._84O=l,$._85O=Z,$._70I=!0,$.F=0,$._83O=l+Z,$.pen={x:0,y:0}},_m="lineDashOffset",gl="setLineDash",Cp=function(a){for(var R in a)1===R.length&&(_m=a[R]);return R?1:0},rq=function(K,U,n){return eb(U)?K:K[gl]?(K[gl](U),n&&(K.lineDashOffset=n),K):new kp(K,U[0],U.length>1?U[1]:U[0])},vg=function(N,E){!eb(E)&&N[gl]&&(N[gl](Cf),N.lineDashOffset=0)};qn(kp,$,{_69I:6,moveTo:function(T,w){var _=this,m=_.pen;m.x=T,m.y=w,_.g.moveTo(T,w),_.start||(_.start={x:T,y:w})},lineTo:function(t,Q){var i=this,N=i.pen,h=t-N.x,p=Q-N.y,f=P(p,h),u=V(f),F=l(f),a=i._23O(N.x,N.y,t,Q),o=i._85O,y=i._84O,E=i._83O;if(i.F){if(i.F>a)return i._70I?i._72I(t,Q):i.moveTo(t,Q),i.F-=a,void 0;if(i._70I?i._72I(N.x+u*i.F,N.y+F*i.F):i.moveTo(N.x+u*i.F,N.y+F*i.F),a-=i.F,i.F=0,i._70I=!i._70I,!a)return}var g=w(a/E);if(g){for(var J=u*y,W=F*y,K=u*o,I=F*o,_=0;g>_;_++)i._70I?(i._72I(N.x+J,N.y+W),i.moveTo(N.x+K,N.y+I)):(i.moveTo(N.x+K,N.y+I),i._72I(N.x+J,N.y+W));a-=E*g}i._70I?a>y?(i._72I(N.x+u*y,N.y+F*y),i.moveTo(t,Q),i.F=o-(a-y),i._70I=!1):(i._72I(t,Q),a===y?(i.F=0,i._70I=!i._70I):(i.F=y-a,i.moveTo(t,Q))):a>o?(i.moveTo(N.x+u*o,N.y+F*o),i._72I(t,Q),i.F=y-(a-o),i._70I=!0):(i.moveTo(t,Q),a===o?(i.F=0,i._70I=!i._70I):i.F=o-a)},quadraticCurveTo:function(d,E,P,K){var D,j=this,m=j.pen,u=m.x,X=m.y,k=j._22O(u,X,d,E,P,K),Y=0,M=0,s=j._85O,y=j._84O;if(j.F){if(j.F>k)return j._70I?j._71I(d,E,P,K):j.moveTo(P,K),j.F-=k,void 0;if(Y=j.F/k,D=j._20O(u,X,d,E,P,K,Y),j._70I?j._71I(D[2],D[3],D[4],D[5]):j.moveTo(D[4],D[5]),j.F=0,j._70I=!j._70I,!k)return}var F=k-k*Y,f=w(F/j._83O),g=y/k,_=s/k;if(f)for(var n=0;f>n;n++)j._70I?(M=Y+g,D=j._21O(u,X,d,E,P,K,Y,M),j._71I(D[2],D[3],D[4],D[5]),Y=M,M=Y+_,D=j._21O(u,X,d,E,P,K,Y,M),j.moveTo(D[4],D[5])):(M=Y+_,D=j._21O(u,X,d,E,P,K,Y,M),j.moveTo(D[4],D[5]),Y=M,M=Y+g,D=j._21O(u,X,d,E,P,K,Y,M),j._71I(D[2],D[3],D[4],D[5])),Y=M;F=k-k*Y,j._70I?F>y?(M=Y+g,D=j._21O(u,X,d,E,P,K,Y,M),j._71I(D[2],D[3],D[4],D[5]),j.moveTo(P,K),j.F=s-(F-y),j._70I=!1):(D=j._19O(u,X,d,E,P,K,Y),j._71I(D[2],D[3],D[4],D[5]),k===y?(j.F=0,j._70I=!j._70I):(j.F=y-F,j.moveTo(P,K))):F>s?(M=Y+_,D=j._21O(u,X,d,E,P,K,Y,M),j.moveTo(D[4],D[5]),D=j._19O(u,X,d,E,P,K,M),j._71I(D[2],D[3],D[4],D[5]),j.F=y-(F-s),j._70I=!0):(j.moveTo(P,K),F===s?(j.F=0,j._70I=!j._70I):j.F=s-F)},bezierCurveTo:function(){var x=arguments;this.pen={x:x[4],y:x[5]},this.g.bezierCurveTo(x[0],x[1],x[2],x[3],x[4],x[5])},arc:function(E,A,i,v,W,f){f||(v=-v,W=-W),xg(this,E,A,v,W-v,i,i,!1)},rect:function(s,I,P,q){var N=this;N.pen={x:s,y:I},N.moveTo(s,I),N.lineTo(s,I+q),N.lineTo(s+P,I+q),N.lineTo(s+P,I),N.lineTo(s,I)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(d,z,P,M){var G=P-d,A=M-z;return n(G*G+A*A)},_22O:function(G,P,m,A,p,c,l){for(var y,g,S,V,Z,O,n,I=0,u=G,D=P,E=l>0?l:this._69I,C=1;E>=C;C++)S=C/E,V=1-S,Z=V*V,O=2*S*V,n=S*S,y=Z*G+O*m+n*p,g=Z*P+O*A+n*c,I+=this._23O(u,D,y,g),u=y,D=g;return I},_21O:function(R,L,k,s,A,M,T,H){var l=this;if(0===T)return l._20O(R,L,k,s,A,M,H);if(1===H)return l._19O(R,L,k,s,A,M,T);var X=l._20O(R,L,k,s,A,M,H);return X.push(T/H),l._19O.apply(l,X)},_20O:function(J,x,t,u,D,n,N){if(1!==N){var G=t+(D-t)*N,X=u+(n-u)*N;t=J+(t-J)*N,u=x+(u-x)*N,D=t+(G-t)*N,n=u+(X-u)*N}return[J,x,t,u,D,n]},_19O:function(T,d,h,w,J,X,R){if(1!==R){var V=T+(h-T)*R,N=d+(w-d)*R;h+=(J-h)*R,w+=(X-w)*R,T=V+(h-V)*R,d=N+(w-N)*R}return[T,d,h,w,J,X]},_72I:function(s,v){var e=this.pen;(s!==e.x||v!==e.y)&&(e.x=s,e.y=v,this.g.lineTo(s,v))},_71I:function(o,F,g,J){var P=this.pen;(o!==g||F!==J||g!==P.x||J!==P.y)&&(P.x=g,P.y=J,this.g.quadraticCurveTo(o,F,g,J))}});var Zh=b.chart,Tg=e.compStack=[],sq=/^style@/,li=/^attr@/,Go=/^field@/,bp=function(Y,P){return Y?Ge(Y.width,P):0},Fd=function(i,l){return i?Ge(i.height,l):0},Ge=function(l,z,Q){if(!l||!l.func)return l;var I,R=l.func,N=l.value;return I=xd(R)?R(z,Q):z?sq.test(R)?z.s(R.slice(6)):li.test(R)?z.a(R.slice(5)):Go.test(R)?z[R.slice(6)]:z[R]?z[R](Q):N:N,N!==E&&I==m?N:I},ib=e.drawImage=function(){var Q,N,x,r,y,Z=function(i,$,E){var U=i[$];return U&&U.func?(U=Ge(U,N,x),E&&(U=E(U))):E&&(U=i[$]=E(U)),U},a=function(o,Q){var f=Z(o,Q);if(y&&f){var E=ds(y);return f=di(f),"rgba("+w(f[0]*E[0])+","+w(f[1]*E[1])+","+w(f[2]*E[2])+","+f[3]+")"}return f},I=function(r){if(we(r)){for(var U=new om,L=r.length,O=0;L>O;O+=2)U.add({x:r[O],y:r[O+1]});r=U}return r},C=function(x,p){var e=Z(x,Kf);if(we(e)){var C=e.length,P=Z(x,"relative"),X=p.width,k=p.height;if(4===C)e={x:e[0],y:e[1],width:e[2],height:e[3]},P&&(e.x*=X,e.y*=k,e.width*=X,e.height*=k);else if(3===C){var $=e[0];e={width:e[1],height:e[2]},P&&(e.width*=X,e.height*=k),$=Or($,p,e),e.x=$.x-e.width/2,e.y=$.y-e.height/2}var I=Z(x,"offsetX");I&&(e.x+=I),I=Z(x,"offsetY"),I&&(e.y+=I)}return e},z=function(s){return we(s)?new om(s):s},F=function(z,r){if(z){var q=r.x+r.width/2,c=r.y+r.height/2;Q.save(),Hm(Q,q,c),Ji(Q,z),Hm(Q,-q,-c)}},P=function(O){O&&Q.restore()},W=function(u,p,b){var X=Z(u,"path"),f=Z(u,Br),E=m,w=gg(null,X);if(b||(b=u.unionRect,b||(b=wb(w),u.path.func||(u.unionRect=b)),E=b),b){E||(E=u.unionRect,E||(E=wb(w),u.path.func||(u.unionRect=E)));var j=_j(E,b);if(j)F(f,E);else{var q=E.width,e=E.height,s=b.width,d=b.height,H=s/q,M=d/e;Q.save(),Hm(Q,b.x+s/2,b.y+d/2),Q.scale(H,M),f&&Ji(Q,f),Hm(Q,-E.x-q/2,-E.y-e/2)}var v=Z(u,"borderPattern"),g=rq(Q,v),c=a(u,"background"),y=a(u,"borderColor"),i=Z(u,"borderWidth"),G=Z(u,"gradient"),K=a(u,"gradientColor"),t=Z(u,"border3d"),$=Z(u,"border3dColor"),h=Z(u,"border3dAccuracy"),V=Q.lineJoin,B=Q.lineCap;if(Q.lineJoin=Z(u,"borderJoin")||Ek,Q.lineCap=Z(u,"borderCap")||Cq,c?(Rr(Q,c,G,K,E),gg(Q,X),Q.fill(),g!==Q&&gg(Q,X)):gg(Q,X),i&&y&&(Q.lineWidth=i,Q.strokeStyle=y,Q.stroke(),t&&kn(Q,y,$,i,r,h)),vg(Q,v),Z(u,"dash")){var x=Z(u,"dashWidth")||i;if(x>0){v=Z(u,"dashPattern")||Me;var g=rq(Q,v,Z(u,"dashOffset")),k=Z(u,"dashColor")||Vk;g!==Q&&gg(Q,X),Q.strokeStyle=k,Q.lineWidth=x,Q.stroke(),Z(u,"dash3d")&&kn(Q,k,Z(u,"dash3dColor"),x,r,Z(u,"dash3dAccuracy")),vg(Q,v)}}p===Kf&&Kd(Q,c,Z(u,"depth"),E),Q.lineJoin=V,Q.lineCap=B,j?P(f):Q.restore()}},q=function(U,x,Y){var w=Z(U,_k,I),p=Z(U,Br),R=x===Un,E=m;if(!Y&&R&&(Y=U.unionRect,Y||(Y=wb(w),U.points.func||(U.unionRect=Y)),E=Y),Y){R?E||(E=U.unionRect,E||(E=wb(w),U.points.func||(U.unionRect=E))):E=Y;var M=_j(E,Y);if(M)F(p,E);else{var S=E.width,s=E.height,l=Y.width,L=Y.height,K=l/S,v=L/s;Q.save(),Hm(Q,Y.x+l/2,Y.y+L/2),Q.scale(K,v),p&&Ji(Q,p),Hm(Q,-E.x-S/2,-E.y-s/2)}var J,b,g,O,D=Z(U,"borderPattern"),q=rq(Q,D),n=a(U,"background"),N=Em(Z(U,"repeatImage"),y),W=a(U,"borderColor"),t=Z(U,"borderWidth"),V=Z(U,"segments",z),o=Z(U,"gradient"),u=a(U,"gradientColor"),G=Z(U,"border3d"),i=Z(U,"border3dColor"),X=Z(U,"border3dAccuracy"),h=Z(U,"closePath"),_=Q.lineJoin,H=Q.lineCap;if(Q.lineJoin=Z(U,"borderJoin")||Ek,Q.lineCap=Z(U,"borderCap")||Cq,R?n||N?(N?Yi(Q,N):Rr(Q,n,o,u,E),tn(Q,w,V,h),Q.fill(),q!==Q&&tn(q,w,V,h)):tn(q,w,V,h):("roundRect"===x?J=Z(U,"cornerRadius"):"polygon"===x?J=Z(U,"polygonSide"):"arc"===x&&(J=Z(U,"arcFrom"),b=Z(U,"arcTo"),g=Z(U,"arcClose"),O=Z(U,"arcOval")),n||N?(N?Yi(Q,N):Rr(Q,n,o,u,E),Yl(Q,x,E,J,b,g,O),Q.fill(),Q!==q&&Yl(q,x,E,J,b,g,O)):Yl(q,x,E,J,b,g,O)),t&&W&&(Q.lineWidth=t,Q.strokeStyle=W,Q.stroke(),G&&kn(Q,W,i,t,r,X)),vg(Q,D),Z(U,"dash")){var j=Z(U,"dashWidth")||t;if(j>0){D=Z(U,"dashPattern")||Me;var q=rq(Q,D,Z(U,"dashOffset")),f=Z(U,"dashColor")||Vk;q!==Q&&(R?tn(q,w,V,h):Yl(q,x,E,J,b,g,O)),Q.strokeStyle=f,Q.lineWidth=j,Q.stroke(),Z(U,"dash3d")&&kn(Q,f,Z(U,"dash3dColor"),j,r,Z(U,"dash3dAccuracy")),vg(Q,D)}}x===Kf&&Kd(Q,n,Z(U,"depth"),E),Q.lineJoin=_,Q.lineCap=H,M?P(p):Q.restore()}},R=function(V,D){var C=y,T=y||Z(V,Zk),U=Em(Z(V,"name"),T);U&&(bj(Q,U,Z(V,"stretch"),D.x,D.y,D.width,D.height,N,x,T),y=C)},d=function(V,P){var l=Z(V,"text");
l!=m&&un(Q,l,Z(V,"font"),a(V,Zk),P.x,P.y,P.width,P.height,Z(V,"align"),Z(V,"vAlign"))},A=function(h,n){Mr(Q,a(h,Zk),n.x,n.y,n.width,n.height,Z(h,"width"))},$=function(b,d){var I=Z(b,Ui),a=0;if(I&&(I.forEach(function(O){a+=O}),a>0)){for(var L=Z(b,"colors")||Zh,q=Z(b,"startAngle")||0,j=Z(b,"hollow"),k=Z(b,bq),S=Z(b,kg),g=Z(b,Zj),T=k?new om:m,K=d.x,M=d.y,U=d.width,J=d.height,G=K+U/2,h=M+J/2,e=_(U,J)/2,f=0,E=0;E<I.length;E++){var o=I[E],P=X*o/a,C=q+P;if(Q.fillStyle=L[f++],f===L.length&&(f=0),Q.beginPath(),j){var v=G+V(q)*e/2,H=h+l(q)*e/2,O=G+V(C)*e,w=h+l(C)*e;Q.moveTo(v,H),Q.arc(G,h,e/2,q,C,!1),Q.lineTo(O,w),Q.arc(G,h,e,C,q,!0)}else Q.moveTo(G,h),Q.arc(G,h,e,C,q,!0);T&&(P=(q+C)/2,T.add({text:xd(k)?k(o,E,a,N):o,x:G+.75*V(P)*e,y:h+.75*l(P)*e})),Q.closePath(),Q.fill(),q=C}T&&T.each(function(i){un(Q,i.text,S,g,i.x,i.y,0,0,xn)})}},g=function(o,M){var h=Z(o,Bl);if(h&&h.length>0){var n=h.length,v=Z(o,bq),K=Z(o,kg),C=Z(o,Zj),d=v?new om:m,S=Z(o,"minValue")||0,a=Z(o,"maxValue");if(a==m&&(a=0,h.forEach(function(Y){Y.values.forEach(function(U){a=k(a,U)})})),S===a)return;for(var z=M.height/(a-S),E=M.y+a*z,O=Z(h[0],Ui).length,s=M.width/(3*O+1),t=2*s/n,y=0,B=0;n>B;B++)for(var R=h[B],i=Z(R,Zk),u=Z(R,"colors"),w=Z(R,Ui),b=0;O>b;b++){u?Q.fillStyle=u[b]:i?Q.fillStyle=i:(Q.fillStyle=Zh[y++],y===Zh.length&&(y=0));var Y=w[b],$=Y*z,H=M.x+(1+3*b)*s+B*t;if(Vi(Q,H,E-$,t,$),d){var P=xd(v)?v(Y,b,R,N):Y,x=Ph(K,P).height;d.add({x:H,y:E-$-x,width:t,height:x,text:P})}}d&&d.each(function(m){un(Q,m.text,K,C,m.x,m.y,m.width,m.height,xn)})}},S=function(R,F){var w=Z(R,Bl);if(w&&w.length>0){var C=w.length,D=Z(w[0],Ui).length,e=F.width/(3*D+1),c=0,g=Z(R,"maxValue"),t=Z(R,bq),S=Z(R,kg),d=Z(R,Zj),r=t?new om:m;if(g==m){g=0;for(var V=0;D>V;V++){for(var P=0,G=0;C>G;G++)P+=Z(w[G],Ui)[V];g=k(g,P)}}if(g>0){for(var V=0;D>V;V++)for(var i=F.y+F.height,G=0;C>G;G++){var B=w[G],M=Z(B,Zk),p=Z(B,Ui)[V],O=p/g*F.height;M?Q.fillStyle=M:(Q.fillStyle=Zh[c++],c===Zh.length&&(c=0)),i-=O;var s={x:F.x+(1+3*V)*e,y:i,width:2*e,height:O};Vi(Q,s.x,s.y,s.width,s.height),r&&(s.text=xd(t)?t(p,V,B,N):p,r.add(s))}r&&r.each(function(D){un(Q,D.text,S,d,D.x,D.y,D.width,D.height,xn)})}}},s=function(g,i){var B=Z(g,Bl);if(B&&B.length>0){for(var I=B.length,A=Z(B[0],Ui).length,p=i.width/(3*A+1),c=0,z=Z(g,bq),O=Z(g,kg),l=Z(g,Zj),$=z?new om:m,x=0;A>x;x++){for(var X=0,k=0;I>k;k++)X+=Z(B[k],Ui)[x];if(X>0){var G=i.y+i.height;for(k=0;I>k;k++){var v=B[k],M=Z(v,Zk),W=Z(v,Ui)[x],_=W/X*i.height;M?Q.fillStyle=M:(Q.fillStyle=Zh[c++],c===Zh.length&&(c=0)),G-=_;var K={x:i.x+(1+3*x)*p,y:G,width:2*p,height:_};Vi(Q,K.x,K.y,K.width,K.height),$&&(K.text=xd(z)?z(W,x,v,N):W,$.add(K))}}}$&&$.each(function(A){un(Q,A.text,O,l,A.x,A.y,A.width,A.height,xn)})}},H=function(M,J){var Y=Z(M,Bl);if(Y&&Y.length>0){var R=Y.length,G=Z(M,"minValue")||0,I=Z(M,"maxValue");if(I==m&&(I=0,Y.forEach(function(b){b.values.forEach(function(N){I=k(I,N)})})),G===I)return;for(var z=J.height/(I-G),V=J.y+I*z,h=Z(Y[0],Ui).length,v=J.width/(3*h+1),W=0,O=Z(M,"lineWidth")||2,o=Z(M,"line3d"),P=Z(M,"linePoint"),L=Z(M,bq),j=Z(M,kg),l=Z(M,Zj),x=0;R>x;x++){var S=Y[x],e=Z(S,Zk),g=Z(S,Ui);e?Q.strokeStyle=e:(e=Q.strokeStyle=Zh[W++],W===Zh.length&&(W=0)),Q.beginPath();for(var H=0;h>H;H++){var K=J.x+(2+3*H)*v,E=V-g[H]*z;0===H?Q.moveTo(K,E):Q.lineTo(K,E)}if(Q.lineWidth=O,Q.stroke(),o&&kn(Q,e,m,O,r),P||L){var b,i=O/2+2;for(H=0;h>H;H++){var U=g[H];if(K=J.x+(2+3*H)*v,E=V-U*z,xd(P)?P(Q,K,E,e,H,S,N):P&&(Q.fillStyle=e,Q.beginPath(),Q.arc(K,E,i,0,X,!0),Q.fill()),xd(L)?b=L(U,H,S,N):L&&(b=U),b){var $=Ph(j,b).height,c=Q.shadowBlur;if(c){var B=Q.shadowOffsetX,u=Q.shadowOffsetY,F=Q.shadowColor;Q.shadowOffsetX=0,Q.shadowOffsetY=0,Q.shadowBlur=0,Q.shadowColor=m}un(Q,b,j,l,K,E-$-i+2,0,$,xn),c&&(Q.shadowOffsetX=B,Q.shadowOffsetY=u,Q.shadowColor=F,Q.shadowBlur=c)}}}}}},b={border:A,image:R,text:d,pieChart:$,columnChart:g,stackedColumnChart:S,percentageColumnChart:s,lineChart:H};return function(O,A,K,M,k,Y,$,j,D){if(A&&k&&Y){if(Q=O,N=$,x=j,r=x?x._zoom?x._zoom:1:1,y=D,A.tagName)return Q.drawImage(A,K,M,k,Y),void 0;if(Z(A,"visible")!==!1){y||(y=Ge(A.color,N,x));var S=bp(A,N),o=Fd(A,N),p={x:0,y:0,width:S,height:o},i=Z(A,"clip"),n=Z(A,"opacity");Q.save(),Hm(Q,K,M),(S!==k||o!==Y)&&Q.scale(k/S,Y/o),i&&(xd(i)?i(Q,S,o,N,x,A):(Q.beginPath(),Q.rect(0,0,S,o),Q.clip())),n!=m&&(Q.globalAlpha*=n),Z(A,"comps").forEach(function(S){if(Z(S,Pf)!==!1){Tg.splice(0,0,S);var y=Z(S,"opacity"),f=Z(S,"shadow"),V=Z(S,"type"),k=C(S,p);if(y!=m){var I=Q.globalAlpha;Q.globalAlpha*=y}if(f){var l=Q.shadowOffsetX,G=Q.shadowOffsetY,g=Q.shadowBlur,h=Q.shadowColor,j=Z(S,"shadowOffsetX"),U=Z(S,"shadowOffsetY"),a=Z(S,"shadowBlur"),R=Z(S,"shadowColor");Q.shadowOffsetX=j==m?3:j,Q.shadowOffsetY=U==m?3:U,Q.shadowBlur=a==m?6:a,Q.shadowColor=R||_i}if(xd(V))V(Q,k,S,N,x);else if(e.getCompType(V))e.getCompType(V)(Q,k,S,N,x);else if(yd[V]||V===Un)q(S,V,k);else if("SVGPath"===V)W(S,V,k);else if(b[V]&&k){var M=Z(S,Br);F(M,k),b[V](S,k),P(M)}f&&(Q.shadowOffsetX=l,Q.shadowOffsetY=G,Q.shadowBlur=g,Q.shadowColor=h),y!=m&&(Q.globalAlpha=I),Tg.splice(0,1)}}),Q.restore()}}}}();e.getCurrentComp=function(){return Tg[0]},e.getParentComp=function(){return Tg[1]},e.getInternal=function(){return{isEnter:Dc,isEsc:Dr,isSpace:eg,isLeft:cb,isUp:ek,isRight:Um,isDown:vp,addMethod:cg,superCall:kd,toPointsArray:wj,translateAndScale:gc,appendArray:jp,createWorldMatrix:wq,vec3TransformMat4:Nf,setCanvas:$q,createDiv:fq,createCanvas:pm,createImage:or,initContext:Gk,layout:Sq,fillRect:Vi,Mat:tg,drawBorder:Mr,isString:xs,setBorder:uq,getPropertyValue:Dq,setPropertyValue:oh,drawVerticalLine:dp,draw3DRect:Kd,getPinchDist:sg,isSameRect:_j,getPosition:Or,intersectionLineRect:Fr,getNodeRect:Yp,getImageWidth:bp,getImageHeight:Fd,formatNumber:mm,initItemElement:le,drawPoints:tn,createG2:rq,closePopup:_h,isH:mq,createAnim:Fg,createNormalMatrix:mc,createNormals:Eo,toFloatArray:_p,glMV:ko,batchShape:ul,createNodeMatrix:Fh,getFaceInfo:Zq,transformAppend:Ni,drawFaceInfo:Mb,to3dPointsArray:ob,setGLDebugMode:function(D){Il=D},cube:function(){return{vs:zo,is:Ij,uv:yl}},ui:function(){return{DataUI:Jq,NodeUI:pc,EdgeUI:Hp,GroupUI:dk,ShapeUI:ih,GridUI:Sj,Data3dUI:Ml,Node3dUI:Ok,Shape3dUI:fr}},getInternalVersion:function(){return"U2FsdGVkX1+pQuOdqzjgfnV/CE7bnMcaL7Sa0lTZhEawGcYDcA1Jvotw/H1x4KmV"},getDragger:function(){return Aj},addMSMap:function(t){cg(Wl,t)},k:T}},function(Z){function v(W,C){W!=m&&(C==m&&Gr!=typeof W?this._54O(W,256):this._54O(W,C))}function u(){return new v(m)}function c(B,o,Q,A,s,c){for(;--c>=0;){var d=o*this[B++]+Q[A]+s;s=w(d/67108864),Q[A++]=67108863&d}return s}function I(N,R,U,r,j,b){for(var O=32767&R,h=R>>15;--b>=0;){var I=32767&this[N],K=this[N++]>>15,E=h*I+K*O;I=O*I+((32767&E)<<15)+U[r]+(1073741823&j),j=(I>>>30)+(E>>>15)+h*K+(j>>>30),U[r++]=1073741823&I}return j}function B(i,s,n,G,O,d){for(var g=16383&s,q=s>>14;--d>=0;){var v=16383&this[i],y=this[i++]>>14,$=q*v+y*g;v=g*v+((16383&$)<<14)+n[G]+O,O=(v>>28)+($>>14)+q*y,n[G++]=268435455&v}return O}function O(Y){return $p.charAt(Y)}function g(q,r){var Q=Zl[q.charCodeAt(r)];return Q==m?-1:Q}function r(i){for(var b=this.t-1;b>=0;--b)i[b]=this[b];i.t=this.t,i.s=this.s}function $(x){this.t=1,this.s=0>x?-1:0,x>0?this[0]=x:-1>x?this[0]=x+this.DV:this.t=0}function Y(B){var V=u();return V._58O(B),V}function U(H,J){var s,n=this;if(16==J)s=4;else if(8==J)s=3;else if(256==J)s=8;else if(2==J)s=1;else if(32==J)s=5;else{if(4!=J)return n.fromRadix(H,J),void 0;s=2}n.t=0,n.s=0;for(var k=H.length,d=!1,w=0;--k>=0;){var T=8==s?255&H[k]:g(H,k);0>T?"-"==H.charAt(k)&&(d=!0):(d=!1,0==w?n[n.t++]=T:w+s>n.DB?(n[n.t-1]|=(T&(1<<n.DB-w)-1)<<w,n[n.t++]=T>>n.DB-w):n[n.t-1]|=T<<w,w+=s,w>=n.DB&&(w-=n.DB))}8==s&&0!=(128&H[0])&&(n.s=-1,w>0&&(n[n.t-1]|=(1<<n.DB-w)-1<<w)),n._57O(),d&&v.ZERO._78O(n,n)}function a(){for(var P=this,d=P.s&P.DM;P.t>0&&P[P.t-1]==d;)--P.t}function E(Y){var r=this;if(r.s<0)return"-"+r._85O()[Ng](Y);var Q;if(16==Y)Q=4;else if(8==Y)Q=3;else if(2==Y)Q=1;else if(32==Y)Q=5;else{if(4!=Y)return r.toRadix(Y);Q=2}var j,e=(1<<Q)-1,N=!1,R="",o=r.t,W=r.DB-o*r.DB%Q;if(o-->0)for(W<r.DB&&(j=r[o]>>W)>0&&(N=!0,R=O(j));o>=0;)Q>W?(j=(r[o]&(1<<W)-1)<<Q-W,j|=r[--o]>>(W+=r.DB-Q)):(j=r[o]>>(W-=Q)&e,0>=W&&(W+=r.DB,--o)),j>0&&(N=!0),N&&(R+=O(j));return N?R:"0"}function A(){var h=u();return v.ZERO._78O(this,h),h}function t(){return this.s<0?this._85O():this}function i(T){var u=this,O=u.s-T.s;if(0!=O)return O;var p=u.t;if(O=p-T.t,0!=O)return u.s<0?-O:O;for(;--p>=0;)if(0!=(O=u[p]-T[p]))return O;return 0}function e(Y){var u,f=1;return 0!=(u=Y>>>16)&&(Y=u,f+=16),0!=(u=Y>>8)&&(Y=u,f+=8),0!=(u=Y>>4)&&(Y=u,f+=4),0!=(u=Y>>2)&&(Y=u,f+=2),0!=(u=Y>>1)&&(Y=u,f+=1),f}function Q(){var c=this;return c.t<=0?0:c.DB*(c.t-1)+e(c[c.t-1]^c.s&c.DM)}function q(G,P){var l;for(l=this.t-1;l>=0;--l)P[l+G]=this[l];for(l=G-1;l>=0;--l)P[l]=0;P.t=this.t+G,P.s=this.s}function G(W,X){for(var G=W;G<this.t;++G)X[G-W]=this[G];X.t=k(this.t-W,0),X.s=this.s}function z(G,X){var c,D=this,W=G%D.DB,u=D.DB-W,R=(1<<u)-1,e=w(G/D.DB),E=D.s<<W&D.DM;for(c=D.t-1;c>=0;--c)X[c+e+1]=D[c]>>u|E,E=(D[c]&R)<<W;for(c=e-1;c>=0;--c)X[c]=0;X[e]=E,X.t=D.t+e+1,X.s=D.s,X._57O()}function F(i,H){var U=this;H.s=U.s;var s=w(i/U.DB);if(s>=U.t)return H.t=0,void 0;var O=i%U.DB,E=U.DB-O,K=(1<<O)-1;H[0]=U[s]>>O;for(var L=s+1;L<U.t;++L)H[L-s-1]|=(U[L]&K)<<E,H[L-s]=U[L]>>O;O>0&&(H[U.t-s-1]|=(U.s&K)<<E),H.t=U.t-s,H._57O()}function s(d,$){for(var c=this,M=0,v=0,i=_(d.t,c.t);i>M;)v+=c[M]-d[M],$[M++]=v&c.DM,v>>=c.DB;if(d.t<c.t){for(v-=d.s;M<c.t;)v+=c[M],$[M++]=v&c.DM,v>>=c.DB;v+=c.s}else{for(v+=c.s;M<d.t;)v-=d[M],$[M++]=v&c.DM,v>>=c.DB;v-=d.s}$.s=0>v?-1:0,-1>v?$[M++]=c.DV+v:v>0&&($[M++]=v),$.t=M,$._57O()}function P(l,e){var x=this.abs(),q=l.abs(),i=x.t;for(e.t=i+q.t;--i>=0;)e[i]=0;for(i=0;i<q.t;++i)e[i+x.t]=x.am(0,q[i],e,i,0,x.t);e.s=0,e._57O(),this.s!=l.s&&v.ZERO._78O(e,e)}function L(s){for(var Z=this.abs(),v=s.t=2*Z.t;--v>=0;)s[v]=0;for(v=0;v<Z.t-1;++v){var h=Z.am(v,Z[v],s,2*v,0,1);(s[v+Z.t]+=Z.am(v+1,2*Z[v],s,2*v+1,h,Z.t-v-1))>=Z.DV&&(s[v+Z.t]-=Z.DV,s[v+Z.t+1]=1)}s.t>0&&(s[s.t-1]+=Z.am(v,Z[v],s,2*v,0,1)),s.s=0,s._57O()}function x(Z,i,t){var q=Z.abs(),j=this;if(!(q.t<=0)){var f=j.abs();if(f.t<q.t)return i!=m&&i._58O(0),t!=m&&j._77O(t),void 0;t==m&&(t=u());var L=u(),y=j.s,W=Z.s,$=j.DB-e(q[q.t-1]);$>0?(q._44O($,L),f._44O($,t)):(q._77O(L),f._77O(t));var H=L.t,J=L[H-1];if(0!=J){var K=J*(1<<j.F1)+(H>1?L[H-2]>>j.F2:0),A=j.FV/K,r=(1<<j.F1)/K,n=1<<j.F2,h=t.t,d=h-H,R=i==m?u():i;for(L._59O(d,R),t._52O(R)>=0&&(t[t.t++]=1,t._78O(R,t)),v.ONE._59O(H,R),R._78O(L,L);L.t<H;)L[L.t++]=0;for(;--d>=0;){var V=t[--h]==J?j.DM:w(t[h]*A+(t[h-1]+n)*r);if((t[h]+=L.am(0,V,t,d,0,H))<V)for(L._59O(d,R),t._78O(R,t);t[h]<--V;)t._78O(R,t)}i!=m&&(t._45O(H,i),y!=W&&v.ZERO._78O(i,i)),t.t=H,t._57O(),$>0&&t._46O($,t),0>y&&v.ZERO._78O(t,t)}}}function J(N){var W=u();return this.abs()._49O(N,m,W),this.s<0&&W._52O(v.ZERO)>0&&N._78O(W,W),W}function d(P){this.m=P}function b(F){return F.s<0||F._52O(this.m)>=0?F.mod(this.m):F}function o(x){return x}function N(i){i._49O(this.m,m,i)}function M(u,f,$){u._47O(f,$),this._74O($)}function W(M,b){M._48O(b),this._74O(b)}function H(){if(this.t<1)return 0;var j=this[0];if(0==(1&j))return 0;var $=3&j;return $=15&$*(2-(15&j)*$),$=255&$*(2-(255&j)*$),$=65535&$*(2-(65535&(65535&j)*$)),$=$*(2-j*$%this.DV)%this.DV,$>0?this.DV-$:-$}function j(x){var g=this;g.m=x,g.mp=x._50O(),g.mpl=32767&g.mp,g.mph=g.mp>>15,g.um=(1<<x.DB-15)-1,g.mt2=2*x.t}function K(V){var q=u();return V.abs()._59O(this.m.t,q),q._49O(this.m,m,q),V.s<0&&q._52O(v.ZERO)>0&&this.m._78O(q,q),q}function f(x){var E=u();return x._77O(E),this._74O(E),E}function R(h){for(var t=this;h.t<=t.mt2;)h[h.t++]=0;for(var H=0;H<t.m.t;++H){var b=32767&h[H],R=b*t.mpl+((b*t.mph+(h[H]>>15)*t.mpl&t.um)<<15)&h.DM;for(b=H+t.m.t,h[b]+=t.m.am(0,R,h,H,0,t.m.t);h[b]>=h.DV;)h[b]-=h.DV,h[++b]++}h._57O(),h._45O(t.m.t,h),h._52O(t.m)>=0&&h._78O(t.m,h)}function qr(F,O){F._48O(O),this._74O(O)}function Wq(F,Y,O){F._47O(Y,O),this._74O(O)}function Ld(){return 0==(this.t>0?1&this[0]:this.s)}function dd(g,k){if(g>4294967295||1>g)return v.ONE;var R=u(),A=u(),W=k._73O(this),G=e(g)-1;for(W._77O(R);--G>=0;)if(k._76O(R,A),(g&1<<G)>0)k._75O(A,W,R);else{var X=R;R=A,A=X}return k.revert(R)}function Fb(m,b){var h;return h=256>m||b._51O()?new d(b):new j(b),this.exp(m,h)}function Ji(){var S=this;if(S.s<0){if(1==S.t)return S[0]-S.DV;if(0==S.t)return-1}else{if(1==S.t)return S[0];if(0==S.t)return 0}return(S[1]&(1<<32-S.DB)-1)<<S.DB|S[0]}function Bo(L,X){return new v(L,X)}function lh(){var j=this;j.n=m,j.e=0,j.d=m,j.p=m,j.q=m,j.dmp1=m,j.dmq1=m,j._10A=m}function Mk(D){return D._53O(this.e,this.n)}function qn(j){var y,t,a,D="",k=0;for(y=0;y<j.length&&j.charAt(y)!=Hq;++y)a=lk.indexOf(j.charAt(y)),0>a||(0==k?(D+=O(a>>2),t=3&a,k=1):1==k?(D+=O(t<<2|a>>4),t=15&a,k=2):2==k?(D+=O(t),D+=O(a>>2),t=3&a,k=3):(D+=O(t<<2|a>>4),D+=O(15&a),k=0));return 1==k&&(D+=O(t<<2)),D}function Dj(K){var P=K.split(""),G=qn(K);return P.forEach(function(T){var M=T.length;M>0&&G&&(Vl+=S(T))}),G}function ao(C,G){var r=Mo._4O.Util._56O(C,"ss"),i={},E=0;return i.v=r==G,i.t=1,i.s=0>E?-1:0,ts=i.v,E>0?i[0]=E:-1>E?i[0]=E+i.DV:i.t=0,[r,i]}function $o(g){var J=38,E=g.substring(0,J);if(E&&30==E.indexOf("05000420")){var n=["ss",g.substring(J)];return n}return[]}function ym(p,O){O=O.replace(Ii,""),O=O.replace(/[ \n]+/g,"");var o=Bo(O,16);if(o._55O()>this.n._55O())return 0;var U=this._37O(o),m=U[Ng](16).replace(/^1f+00/,""),H=$o(m);if(0==H.length)return!1;for(var N,J,M,F=.5,c=bl,g=[0,.5,.75,.875,.9375],S=[],z=[],_=[],B=X/c,q=H[1],k=ao(p,q)[0],h=0,P=0;h<g.length;h++){var Y=0===h%2?0:.5;for(N=0;c>=N;N++)J=(N+Y)*B,M=1-g[h],S.push(V(J)*F*M,-F+2*g[h]*F,-l(J)*F*M),z.push((N+Y)/c,M)}for(h=0;h<g.length-1;h++){var K=h*(c+1),E=(h+1)*(c+1);for(N=0;c>N;N++)_.push(K+N,E+N+1,E+N,K+N,K+N+1,E+N+1)}return _.forEach(function(N){P+=N}),q==k&&P>10}var _d,oc=0xdeadbeefcafe,Bh=15715070==(16777215&oc),Ng="toString",Kb="",Pd="nat",ue=function(){};p=Z["D"+11182[Ng](y(2,5))];var Vm=v.prototype;Ee+=Uj.substr(0,1);var ub=Z.navigator?Z.navigator.appName:"";Bh&&"Microsoft Internet Explorer"==ub?(Vm.am=I,_d=30):Bh&&"Netscape"!=ub?(Vm.am=c,_d=26):(Vm.am=B,_d=28),Vm.DB=_d,Vm.DM=(1<<_d)-1,Vm.DV=1<<_d;var vm=52;Vm.FV=y(2,vm),Vm.F1=vm-_d,Vm.F2=2*_d-vm;var id,Vi,$p="0123456789abcdefghijklmnopqrstuvwxyz",Zl=[],qo=function(t){return String.fromCharCode(t)};for(id="0".charCodeAt(0),Vi=0;9>=Vi;++Vi)Zl[id++]=Vi;for(id="a".charCodeAt(0),Vi=10;36>Vi;++Vi)Zl[id++]=Vi;for(id="A".charCodeAt(0),Vi=10;36>Vi;++Vi)Zl[id++]=Vi;var jh=d.prototype;jh._73O=b,jh.revert=o,jh._74O=N,jh._75O=M,jh._76O=W;var so=j.prototype;so._73O=K,so.revert=f,so._74O=R,so._75O=Wq,so._76O=qr,Vm._77O=r,Vm._58O=$,Vm._54O=U,Vm._57O=a,Vm._59O=q,Vm._45O=G,Vm._44O=z,Vm._46O=F,Vm._78O=s,Vm._47O=P,Vm._48O=L,Vm._49O=x,Vm._50O=H,Vm._51O=Ld,Vm.exp=dd,Vm.toString=E,Vm._85O=A,Vm.abs=t,Vm._52O=i,Vm._55O=Q,Vm.mod=J,Vm._53O=Fb,v.ZERO=Y(0),v.ONE=Y(1),Vm._86O=Ji;var an=function(f,H){var X=this;X.isPublic=!0,typeof f!==Gr?(X.n=f,X.e=H):f!=m&&H!=m&&f.length>0&&H.length>0&&(X.n=Bo(f,16),X.e=S(H,16))};wf=function(){var w,g,i=Dj(xi),c=i.substr(0,4),s=i.substr(4,2),N=i.substr(6,2),V=1,W=!V,R=T,k=[],S=Hc.charAt(7);if(p&&(p[Ng]().indexOf(Pd)<0||p[Ee][Ng]().indexOf(Pd)<0||!i?w=Ll(Jh[S]):(i=new p(c-0,s-V,N-0),g=i.setHours(9),p[Ee]()>g?w=Ll(Jh[S]):W=!0)),i&&w&&R){for(var E in w)k.push(E);var F,U=w[k[0]],C=w[k[1]],B=w[k[2]],h=w[k[4]],x=w[k[5]],y=w[k[6]],I=Oo._27O(R);I&&y&&(F=U+C+B+h+""+x,F&&I._31O(F,y)&&(W=!0))}return W||(Yl=eb),S};var Dp=lh.prototype;Dp._37O=Mk,Dp._38O=an;var lk="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hq="=",pe=25,hd=10,xi="IBUSAQ==",Lq=Lq||function(E,P){var i={},g=i._7A={},A=g._6A=function(){function U(){}return{_80O:function(P){U.prototype=this;var Z=new U;return P&&Z._5A(P),Z.hasOwnProperty("_82O")||(Z._82O=function(){Z.$super._82O.apply(this,arguments)}),Z._82O.prototype=Z,Z.$super=this,Z},_3A:function(){var Q=this._80O();return Q._82O.apply(Q,arguments),Q},_82O:function(){},_5A:function(j){for(var s in j)j.hasOwnProperty(s)&&(this[s]=j[s]);j.hasOwnProperty(Ng)&&(this.toString=j.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),J=g._39O=A._80O({_82O:function(V,R){V=this._84O=V||[],this._65O=R!=P?R:4*V.length},toString:function(o){return(o||r).stringify(this)},_89O:function(l){var n=this._84O,L=l._84O,U=this._65O,k=l._65O;if(this._57O(),U%4)for(var V=0;k>V;V++){var s=255&L[V>>>2]>>>24-8*(V%4);n[U+V>>>2]|=s<<24-8*((U+V)%4)}else if(L.length>65535)for(var V=0;k>V;V+=4)n[U+V>>>2]=L[V>>>2];else n.push.apply(n,L);return this._65O+=k,this},_57O:function(){var t=this._84O,g=this._65O;t[g>>>2]&=4294967295<<32-8*(g%4),t.length=h(g/4)},_88O:function(){var k=A._88O.call(this);return k._84O=this._84O.slice(0),k},_87O:function(v){for(var y=[],f=0;v>f;f+=4)y.push(0|4294967296*C);return new J._82O(y,v)}}),T=i._2A={},r=T._69O={stringify:function(u){var l,t=u._84O,k=u._65O,_=[];for(l=0;k>l;l++){var H=255&t[l>>>2]>>>24-8*(l%4);_.push((H>>>4).toString(16)),_.push((15&H).toString(16))}return _.join("")},_68O:function(I){for(var M=I.length,j=[],y=0;M>y;y+=2)j[y>>>3]|=S(I.substr(y,2),16)<<24-4*(y%8);return new J._82O(j,M/2)}},a=T._8A={stringify:function(M){var f,b=M._84O,G=M._65O,j=[];for(f=0;G>f;f++){var K=255&b[f>>>2]>>>24-8*(f%4);j.push(qo(K))}return j.join("")},_68O:function(c){var G,P=c.length,l=[];for(G=0;P>G;G++)l[G>>>2]|=(255&c.charCodeAt(G))<<24-8*(G%4);return new J._82O(l,P)}},x=T._9A={stringify:function(G){try{return decodeURIComponent(escape(a.stringify(G)))}catch(c){throw new Error("")}},_68O:function(X){return a._68O(unescape(encodeURIComponent(X)))}},f=g._32O=A._80O({_1A:function(){this._83O=new J._82O,this._23O=0},_33O:function(y){typeof y==Gr&&(y=x._68O(y)),this._83O._89O(y),this._23O+=y._65O},_25O:function(g){var D=this._83O,N=D._84O,T=D._65O,W=this._79O,$=4*W,q=T/$;q=g?h(q):k((0|q)-this._22O,0);var G=q*W,b=_(4*G,T);if(G){for(var U=0;G>U;U+=W)this._20O(N,U);var x=N.splice(0,G);D._65O-=b}return new J._82O(x,b)},_88O:function(){var J=A._88O.call(this);return J._83O=this._83O._88O(),J},_22O:0});g._66O=f._80O({cfg:A._80O(),_82O:function(n){this.cfg=this.cfg._80O(n),this._1A()},_1A:function(){f._1A.call(this),this._34O()},_81O:function(o){return this._33O(o),this._25O(),this},_72O:function(S){S&&this._33O(S);var O=this._21O();return O},_79O:16,_26O:function(b){return function(r,q){return new b._82O(q)._72O(r)}},_19O:function(Q){return function(d,v){return new G._71O._82O(Q,v)._72O(d)}}});var G=i._67O={};return i}();!function(){var G=Lq,K=G._7A,j=K._39O,P=K._66O,m=G._67O,u=[],M=[];!function(){function Q(t){for(var F=n(t),G=2;F>=G;G++)if(!(t%G))return!1;return!0}function e(E){return 0|4294967296*(E-(0|E))}for(var K=2,O=0;64>O;)Q(K)&&(8>O&&(u[O]=e(y(K,.5))),M[O]=e(y(K,1/3)),O++),K++}();var f=[],i=m._41O=P._80O({_34O:function(){this._64O=new j._82O(u.slice(0))},_20O:function(n,K){for(var $=this._64O._84O,u=$[0],T=$[1],a=$[2],R=$[3],S=$[4],i=$[5],e=$[6],y=$[7],j=0;64>j;j++){if(16>j)f[j]=0|n[K+j];else{var J=f[j-15],U=(J<<25|J>>>7)^(J<<14|J>>>18)^J>>>3,q=f[j-2],Z=(q<<15|q>>>17)^(q<<13|q>>>19)^q>>>10;f[j]=U+f[j-7]+Z+f[j-16]}var k=S&i^~S&e,o=u&T^u&a^T&a,P=(u<<30|u>>>2)^(u<<19|u>>>13)^(u<<10|u>>>22),X=(S<<26|S>>>6)^(S<<21|S>>>11)^(S<<7|S>>>25),c=y+X+k+M[j]+f[j],A=P+o;y=e,e=i,i=S,S=0|R+c,R=a,a=T,T=u,u=0|c+A}$[0]=0|$[0]+u,$[1]=0|$[1]+T,$[2]=0|$[2]+a,$[3]=0|$[3]+R,$[4]=0|$[4]+S,$[5]=0|$[5]+i,$[6]=0|$[6]+e,$[7]=0|$[7]+y},_21O:function(){var y=this._83O,E=y._84O,s=8*this._23O,G=8*y._65O;return E[G>>>5]|=128<<24-G%32,E[(G+64>>>9<<4)+14]=w(s/4294967296),E[(G+64>>>9<<4)+15]=s,y._65O=4*E.length,this._25O(),this._64O},_88O:function(){var H=P._88O.call(this);return H._64O=this._64O._88O(),H}});G._41O=P._26O(i),G._42O=P._19O(i)}();var Ii=new RegExp("");Ii.compile("[^0-9a-f]","gi"),lh._28O=-1,lh._29O=-2,Dp._31O=ym,Dp._63O=ym,lh._43O=-2;var qd=new function(){var Y=this;Y._5O=function(C,Z){if("8"!=C.substring(Z+2,Z+3))return 1;var O=S(C.substring(Z+3,Z+4));return 0==O?-1:O>0&&10>O?O+1:-2},Y._13O=function(X,u){var g=Y._5O(X,u);return 1>g?"":X.substring(u+2,u+2+2*g)},Y._12O=function(Z,g){var t=Y._13O(Z,g);if(""==t)return-1;var N;return N=S(t.substring(0,1))<8?new v(t,16):new v(t.substring(2),16),N._86O()},Y._6O=function(o,w){var B=Y._5O(o,w);return 0>B?B:w+2*(B+1)},Y._11O=function(y,r){var z=Y._6O(y,r),u=Y._12O(y,r);return y.substring(z,z+2*u)},Y._10O=function(J,i){var e=Y._6O(J,i),A=Y._12O(J,i);return e+2*A},Y._7O=function(q,g){var z=[],p=Y._6O(q,g);z.push(p);for(var J=Y._12O(q,g),i=p,R=0;;){var U=Y._10O(q,i);if(U==m||U-p>=2*J)break;if(R>=200)break;z.push(U),i=U,R++}return z}};if(qd._90O=qo(hd+24),qd._91O=D+qo(hd*hd+8),Mo==m||!Mo)var Mo={};Mo._4O!=m&&Mo._4O||(Mo._4O={}),Mo._4O.Util=new function(){var c=this;c._56O=function(L){var b=new Mo._4O._3O;return b._30O(L)},c._4A=function(H){var y=new Mo._4O._3O;return y._36O(H)}},Mo._4O._3O=function(){var d=this;d._8O=function(z,_){if("ss"==z&&"cj"==_){try{d.md=Lq._67O._41O._3A()}catch(k){ue(Kb)}d._24O=function(Q){d.md._81O(Q)},d._35O=function(R){var I=Lq._2A._69O._68O(R);d.md._81O(I)},d._60O=function(){var m=d.md._72O();return m[Ng](Lq._2A._69O)},d._30O=function(k){return d._24O(k),d._60O()},d._36O=function(o){return d._35O(o),d._60O()}}},d._24O=function(){ue(Kb)},d._35O=function(){ue(Kb)},d._60O=function(){ue(Kb)},d._30O=function(){ue(Kb)},d._36O=function(){ue(Kb)},d._8O("ss","cj")},jc=function(Q){var H=Z[qd._91O],G=1,Y=!1;if(ni.forEach(function(Y){G*=Y}),ni.a)return ni.a;if(Q>G){if(H){H=H.split(qd._90O);var L=H[3],X=H[7],S=H[11],P=H[19],U=H[23],E=H[27],s=L+X+S+P+U;Y=en()(s,E)}Y||(Jq.prototype._42=gp)}else Y=!0;return ni.a=Y,Y},pe=String.fromCharCode(pe+20);var Zd=function(v){return v=v.replace(Ii,Kb),v=v.replace(/[ \n]+/g,Kb)},_n="30",bn="06",Pb="02",Mp="03",Gg=Bo,od=/^1f+00/,Oo=function(){var s;return s={_18O:function(L){var g=L,D=g.replace(/\s+/g,""),q=qn(D);return q},_14O:function(q){var C=this._18O(q),o=this._15O(C);return o},_15O:function(M){var v=this._17O(M);if("2a864886f70d010101"==v._61O){var Z=this._16O(v.key),f=new lh;return f._38O(Z.n,Z.e),f}ue(Kb)},_16O:function(P){var q={};P.substr(0,2)!=_n&&ue(Kb);var i=qd._7O(P,0);return 2!=i.length&&ue(Kb),P.substr(i[0],2)!=Pb&&ue(Kb),q.n=qd._11O(P,i[0]),P.substr(i[1],2)!=Pb&&ue(Kb),q.e=qd._11O(P,i[1]),q},_17O:function(Z){var S={};S._40O=m;var w=qd._7O(Z,0);2!=w.length&&ue(Kb);var x=w[0];Z.substr(x,2)!=_n&&ue(Kb);var c=qd._7O(Z,x);return 2!=c.length&&ue(Kb),Z.substr(c[0],2)!=bn&&ue(Kb),S._61O=qd._11O(Z,c[0]),Z.substr(c[1],2)==bn?S._40O=qd._11O(Z,c[1]):Z.substr(c[1],2)==_n&&(S._40O={},S._40O.p=qd._70O(Z,c[1],[0],Pb),S._40O.q=qd._70O(Z,c[1],[1],Pb),S._40O.g=qd._70O(Z,c[1],[2],Pb)),Z.substr(w[1],2)!=Mp&&ue(Kb),S.key=qd._11O(Z,w[1]).substr(2),S}},s._17O?s:m}(),Kk=Oo._27O=function(Z){return Oo._14O(Z)};return en=function(){return function(S,T){T=Zd(T);var N=Gg(T,y(2,4)),K=this;if(!K||!K.n||N._55O()>K.n._55O())return 0;var s=K._37O(N),_=s[Ng](y(2,4)).replace(od,""),Q=$o(_);if(0==Q.length)return!1;var j=Q[0],o=Q[1],e=function(l){return Mo._4O.Util._56O(l,j)},W=e(S);return o==W}.bind(Kk(T))},Oo}(F,$);var om=I.List=function(){this._as=[];var W,M,E=arguments.length;if(1===E){var c=arguments[0];if(cn(c)&&(c=c._as),we(c))for(M=c.length,W=0;M>W;W++)this._as.push(c[W]);else c!=m&&this._as.push(c)}else if(E>1)for(W=0;E>W;W++)this._as.push(arguments[W])};ms("List",$,{size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(k,t){return t===E?this._as.push(k):this._as.splice(t,0,k)},addAll:function(m){cn(m)&&(m=m._as),we(m)?jp(this._as,m):this._as.push(m)},get:function(k){return this._as[k]},slice:function(R,a){return new om(this._as.slice(R,a))},remove:function(p){var C=this._as.indexOf(p);return C>=0&&C<this._as.length&&this.removeAt(C),C},removeAt:function(v){return this._as.splice(v,1)[0]},set:function(b,O){return this._as[b]=O},clear:function(){return this._as.splice(0,this._as.length)},contains:function(t){return this._as.indexOf(t)>=0},indexOf:function(J){return this._as.indexOf(J)},each:function(M,I){for(var k=0,y=this._as.length;y>k;k++){var g=this._as[k];I?M.call(I,g):M(g)}},reverseEach:function(y,v){for(var g=this._as.length-1;g>=0;g--){var V=this._as[g];v?y.call(v,V):y(V)}},toArray:function(Z,r){if(Z){for(var v,k=[],F=0,d=this._as.length;d>F;F++)v=this._as[F],r?Z.call(r,v)&&k.push(v):Z(v)&&k.push(v);return k}return this._as.concat()},toList:function(p,g){if(p){for(var D,s=new om,t=0,z=this._as.length;z>t;t++)D=this._as[t],g?p.call(g,D)&&s.add(D):p(D)&&s.add(D);return s}return new om(this)},reverse:function(){this._as.reverse()},sort:function(k){return this._as.sort(k?k:zl),this},toString:function(){return this._as.toString()}});var Up=new om;cg(Up,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Qj,each:Qj,reverseEach:Qj,toArray:function(){return[]},toList:function(){return new om},add:ys,addAll:ys,set:ys,remove:ys,removeAt:ys,clear:ys});var hq=I.Notifier=function(){};ms("Notifier",$,{contains:function(e,v){if(this._ls)for(var T,x=0,X=this._ls.size();X>x;x++)if(T=this._ls.get(x),e===T.l&&v===T.s)return!0;return!1},add:function(L,M,Z){var f=this,k={l:L,s:M,a:Z};f._ls||(f._ls=new om),f._f?(f._as||(f._as=new om),f._as.add(k)):k.a?f._ls.add(k,0):f._ls.add(k)},remove:function(p,U){var L=this;L._ls&&(L._f?(L._rs||(L._rs=new om),L._rs.add({l:p,s:U})):L._remove(p,U))},_remove:function(C,Q){for(var z,m=this._ls,_=0,V=m.size();V>_;_++)if(z=m.get(_),z.l===C&&z.s===Q)return m.removeAt(_),void 0},fire:function(I){var F=this,Z=F._ls;if(F._b=1,Z){F._f=1;for(var J,i=0,t=Z.size();t>i;i++)J=Z.get(i),J.s?J.l.call(J.s,I):J.l(I);if(delete F._f,F._rs){for(t=F._rs.size(),i=0;t>i;i++)J=F._rs.get(i),F._remove(J.l,J.s);delete F._rs}if(F._as){for(t=F._as.size(),i=0;t>i;i++)J=F._as.get(i),J.a?Z.add(J,0):Z.add(J);delete F._as}}}});var sj=I.Data=function(){this._id=wk()};ms("Data",$,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop"],ms_dm:1,ms_attr:1,_icon:m,_parent:m,_children:Up,_childMap:m,_styleMap:m,_layer:0,_adjustChildrenToTop:!1,getUIClass:function(){return m},_22Q:function(){return m},s:function(f,x){var P=this;if(2===arguments.length)P.setStyle(f,x);else{if(!qm(f))return P.getStyle(f);for(var E in f)P.setStyle(E,f[E])}return P},fp:function(u,e,_){return this.firePropertyChange(u,e,_)},firePropertyChange:function(s,q,M){if(q===M)return!1;var Q=this,u={property:s,oldValue:q,newValue:M,data:Q};return Q._dataModel&&Q._dataModel.handleDataPropertyChange(u),Q.onPropertyChanged(u),!0},onPropertyChanged:function(E){var q=this,B=q._parent,m=E.property;if(Mh(B)){var o=q.s(kj),j="s:ingroup"===m;(o&&Te[m]||m===j)&&B._81I(),(o||j)&&B.fp("childChange",!0,!1)}},_21I:function(t){var Q=this;if(t&&Q._dataModel)throw"HT-DM";Q._dataModel=t},getId:function(){return this._id},setId:function(j){this._id=j},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(x,E){return this._children.toList(x,E)},eachChild:function(N,c){this._children.each(N,c)},addChild:function(Z,n){var P=this;Z!==P&&(P._children===Up&&(P._children=new om,P._childMap={}),n===E&&(n=P._children.size()),P._childMap[Z._id]||P.isDescendantOf(Z)||(Z._parent&&Z._parent.removeChild(Z),(0>n||n>P._children.size())&&(n=P._children.size()),P._children.add(Z,n),P._childMap[Z._id]=Z,Z.setParent(P),P.onChildAdded(Z,n),P.fp(Ci,m,Z)))},onChildAdded:function(){},removeChild:function(s){var U=this;if(U._childMap&&U._childMap[s._id]){var q=U._children.remove(s);delete U._childMap[s._id],U.fp(Ci,s,m),s.setParent(m),U.onChildRemoved(s,q)}},onChildRemoved:function(){},getChildAt:function($){return this._children.get($)},clearChildren:function(){var d=this;if(!d._children.isEmpty())for(var Y=0,h=d._children.toArray(),k=h.length;k>Y;Y++)d.removeChild(h[Y])},getParent:function(){return this._parent},setParent:function($){var j=this;if(!(j._73I||j._parent===$||j===$||$&&$.isDescendantOf(j))){var U=j._parent;j._parent=$,j._73I=1,U&&U.removeChild(j),$&&$.addChild(j),delete j._73I,j.fp("parent",U,$),j.onParentChanged(U,$)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(H){return H?this.isDescendantOf(H)||H.isDescendantOf(this):!1},isParentOf:function(L){return L&&this._childMap?!!this._childMap[L._id]:!1},isDescendantOf:function(H){if(!H||H.isEmpty())return!1;for(var l=this._parent;l;){if(H===l)return!0;l=l._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(P,K){K===E&&(K=1);var F=this._styleMap?this._styleMap[P]:E;return F===E&&K?H[P]:F},setStyle:function(p,L){var c=this;c._styleMap||(c._styleMap={});var K=c._styleMap[p];L===E?delete c._styleMap[p]:c._styleMap[p]=L,c.fp("s:"+p,K,L)&&c.onStyleChanged(p,K,L)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var F=this;return F._displayName||F._name||F._tag||F._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(O,R){var j=this,H=j.s(wh);H||j.s(wh,H={}),R?H[O]=R:delete H[O],j.fp(wh,m,H)},removeStyleIcon:function(t){var R=this.s(wh);if(R){var S=R[t];delete R[t],this.fp(wh,m,R)}return S},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1}},getSerializableStyles:function(){var D,r={};for(D in this._styleMap)r[D]=1;return r}});var Ze=I.DataModel=function(){var o=this;o._datas=new om,o._dataMap={},o._roots=new om,o._rootMap={},o._78O={},o._36I=new hq,o._35I=new hq,o._3o=new Ih(o);var p=o._29Q=[],I=o._scheduleCallback=function(){for(var D=Date.now(),W=0;W<p.length;W++){var K=p[W];K.enabled&&D-K.lastTime>K.interval&&(o.each(function(M){K.action(M)}),K.lastTime=D)}p.length&&(o._30Q=F.requestAnimationFrame(I))}};ms("DataModel",$,{ms_attr:1,sm:function(){return this.getSelectionModel()},mm:function(Z,b,t){this.addDataModelChangeListener(Z,b,t)},umm:function(O,z){this.removeDataModelChangeListener(O,z)},md:function(V,A,e){this.addDataPropertyChangeListener(V,A,e)},umd:function(u,L){this.removeDataPropertyChangeListener(u,L)},mh:function(g,x,P){this.addHierarchyChangeListener(g,x,P)},umh:function(U,h){this.removeHierarchyChangeListener(U,h)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(i){return this._attrObject=i},getSelectionModel:function(){return this._3o},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(V){return this._dataMap[V]},removeDataById:function(Y){this.remove(this.getDataById(Y))},toDatas:function(d,g){return this._datas.toList(d,g)},each:function(r,t){this._datas.each(r,t)},getDataByTag:function($){return this._78O[$]},removeDataByTag:function(b){this.remove(this.getDataByTag(b))},add:function(p,e){var h=this,b=p._id,B=p._tag,L=h._roots;if(h._dataMap[b])throw"'"+b+"' already exists";B!=m&&(h._78O[B]=p),h._dataMap[b]=p,h._datas.add(p),p._parent||(h._rootMap[b]=p,e>=0?L.add(p,e):L.add(p)),p._21I(h),h.onAdded(p),h._36I.fire({kind:"add",data:p})},onAdded:function(){},remove:function(B){if(B){var o=this,W=B._id,D=B.getTag(),c=o.getHistoryManager();B._dataModel===o&&(c&&c.beginInteraction(),o.prepareRemove(B),B.toChildren().each(o.remove,o),B._parent&&B._parent.removeChild(B),o._datas.remove(B),delete o._dataMap[W],D!=m&&delete o._78O[D],o._rootMap[W]&&(delete o._rootMap[W],o._roots.remove(B)),B._21I(m),o.onRemoved(B),o._36I.fire({kind:Id,data:B}),c&&c.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var J=this;J._datas.size()>0&&(J._datas.each(function(W){W._21I(m)}),J._datas.clear(),J._dataMap={},J._roots.clear(),J._rootMap={},J._78O={},J._36I.fire({kind:_d}))},contains:function(n){return n&&n._dataModel===this},handleDataPropertyChange:function(A){var t=this,a=A.data,l=A.property;if("parent"===l){var X=a._id,h=t._rootMap,s=t._roots;a._parent?h[X]&&(delete h[X],s.remove(a)):h[X]||(h[X]=a,s.add(a))
}else if("tag"===l){var O=A.oldValue,j=A.newValue,Q=t._78O;O!=m&&delete Q[O],j!=m&&(Q[j]=a)}this.onDataPropertyChanged(a,A),this._35I.fire(A)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(g,s,h){this._36I.add(g,s,h)},removeDataModelChangeListener:function(a,F){this._36I.remove(a,F)},addDataPropertyChangeListener:function(p,U,j){this._35I.add(p,U,j)},removeDataPropertyChangeListener:function(u,T){this._35I.remove(u,T)},_38I:function(t,X,h){this._37I&&this._37I.fire({data:t,oldIndex:X,newIndex:h})},addHierarchyChangeListener:function(d,X,V){this._37I||(this._37I=new hq),this._37I.add(d,X,V)},removeHierarchyChangeListener:function(e,t){this._37I.remove(e,t)},getSiblings:function(Q){var y=Q._parent;return y?y._children:this._roots},eachByDepthFirst:function(i,I,W){if(I)this._11I(i,I,W);else for(var k=0,H=this._roots,M=H.size();M>k;k++)if(this._11I(i,H.get(k),W)===!1)return},_11I:function(T,r,q){for(var z=r.size(),h=0;z>h;h++)if(this._11I(T,r.getChildAt(h),q)===!1)return!1;if(q){if(T.call(q,r)===!1)return!1}else if(T(r)===!1)return!1;return!0},eachByBreadthFirst:function(a,t,K){var s=new om;for(t?s.add(t):this._roots.each(s.add,s);s.size()>0;)if(t=s.removeAt(0),t.eachChild(s.add,s),K){if(a.call(K,t)===!1)return!1}else if(a(t)===!1)return!1;return!0},moveTo:function(S,P){var u=this.getSiblings(S),U=u.indexOf(S);U===P||0>U||P>=0&&P<=u.size()&&(u.remove(S),P>u.size()&&P--,u.add(S,P),this._38I(S,U,P))},moveUp:function(Y){this.moveTo(Y,this.getSiblings(Y).indexOf(Y)-1)},moveDown:function(l){this.moveTo(l,this.getSiblings(l).indexOf(l)+1)},moveToTop:function(x){this.moveTo(x,0)},moveToBottom:function(m){this.moveTo(m,this.getSiblings(m).size())},moveSelectionUp:function(J){J||(J=this.sm());var e=new om;Kn(J,e,this._roots),e.each(this.moveUp,this)},moveSelectionDown:function(f){f||(f=this.sm());var B=new om;an(f,B,this._roots),B.each(this.moveDown,this)},moveSelectionToTop:function(Y){Y||(Y=this.sm());var b=new om;qp(Y,b,this._roots),b.each(this.moveToTop,this)},moveSelectionToBottom:function(w){w||(w=this.sm());var B=new om;Ho(w,B,this._roots),B.each(this.moveToBottom,this)},addScheduleTask:function(v){var e=this;e.removeScheduleTask(v),v.enabled==m&&(v.enabled=!0),v.interval==m&&(v.interval=10),v.action==m&&(v.action=Qj),v.lastTime=Date.now(),e._29Q.push(v),e._30Q==m&&(e._30Q=F.requestAnimationFrame(e._scheduleCallback))},removeScheduleTask:function(Y){var $=this,M=$._29Q,k=M.indexOf(Y);k>=0&&M.splice(k,1),M.length||$._30Q==m||(F.cancelAnimationFrame($._30Q),delete $._30Q)}});var Ih=I.SelectionModel=function(K){var T=this;T._68O=o,T._map={},T._73O=new om,T._74I=new hq,T._21I(K)};ms("SelectionModel",$,{ms_fire:1,ms_dm:1,ms:function(L,e,p){this.addSelectionChangeListener(L,e,p)},ums:function(R,I){this.removeSelectionChangeListener(R,I)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===K},co:function(z){return this._map[z._id]!=m},ss:function(i){this.setSelection(i)},as:function(D){this.appendSelection(D)},rs:function(T){this.removeSelection(T)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(E){var N=this;if(N._68O!==E&&(E===Xj||E===K||E===o)){N.cs();var m=N._68O;N._68O=E,N.fp("selectionMode",m,E)}},_21I:function(s){var r=this,F=r._dataModel;F!==s&&(F&&(r.cs(),F.umm(r.handleDataModelChange,r)),r._dataModel=s,s.mm(r.handleDataModelChange,r,!0),r.fp(Kq,F,s))},dispose:function(){var W=this;W.cs(),W._dataModel.umm(W.handleDataModelChange,W)},handleDataModelChange:function(s){var Z=this;if(s.kind===Id){var d=s.data;Z.co(d)&&(Z._73O.remove(d),delete Z._map[d._id],Z._75I(Id,new om(d)))}else s.kind===_d&&Z.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(Y){var u=this;if(u._filterFunc!==Y){u.cs();var c=u._filterFunc;u._filterFunc=Y,u.fp("filterFunc",c,u._filterFunc)}},_75I:function(I,c,d,e){d&&(this._73O.each(function(y){e[y._id]?d.remove(y):d.add(y)}),c=d.toList()),this._74I.fire({kind:I,datas:new om(c)})},addSelectionChangeListener:function(J,n,j){this._74I.add(J,n,j)},removeSelectionChangeListener:function(L,n){this._74I.remove(L,n)},_97O:function(b,F){for(var A,z=this,V=0,N=new om(b);V<N.size();V++)A=N.get(V),(z._filterFunc&&!z._filterFunc(A)||F&&z.co(A)||!F&&!z.co(A)||!z._dataModel.contains(A))&&(N.removeAt(V),V--);return N},appendSelection:function(D){var z=this;if(z._68O!==Xj){var S,g,_=z._73O,I=z._97O(D,!0);I.isEmpty()||(z.sg()&&(S=new om(_),g=z._map,_.clear(),z._map={},I=new om(I.get(I.size()-1))),I.each(function(O){_.add(O),z._map[O._id]=O}),z._75I("append",I,S,g))}},removeSelection:function(m){var V=this,b=V._97O(m),M=0,h=b.size();if(0!==h){for(;h>M;M++){var G=b.get(M);V._73O.remove(G),delete V._map[G._id]}V._75I(Id,b)}},toSelection:function(D,E){return this._73O.toList(D,E)},getSelection:function(){return this._73O},each:function(j,L){this._73O.each(j,L)},setSelection:function(i){var e=this,y=e._73O;if(e._68O!==Xj&&!(y.isEmpty()&&!i||1===y.size()&&e.ld()===i)){var T=new om(y),R=e._map;y.clear(),e._map={};var J=e._97O(i,!0);e.sg()&&J.size()>1&&(J=new om(J.get(J.size()-1))),J.each(function(V){y.add(V),e._map[V._id]=V}),e._75I("set",m,T,R)}},clearSelection:function(){var Q=this,i=Q._73O;if(i.size()>0){var y=i.toList();i.clear(),Q._map={},Q._75I(_d,y)}},selectAll:function(){var E=this;if(E._68O!==Xj){var G,A,R=E._dataModel.toDatas();if(E._filterFunc)for(G=0;G<R.size();G++)A=R.get(G),E._filterFunc(A)||(R.removeAt(G),G--);var N=E._73O,D=new om(N),B=E._map;N.clear(),E._map={},E.sg()&&R.size()>1&&(R=new om(R.get(R.size()-1)));var b=R.size();for(G=0;b>G;G++)A=R.get(G),N.add(A),E._map[A._id]=A;E._75I("all",m,D,B)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(j){return this._map[j._id]!=m},getLastData:function(){var q=this._73O;return q.size()>0?q.get(q.size()-1):m},getFirstData:function(){var i=this._73O;return i.size()>0?i.get(0):m},isSelectable:function(h){var M=this;return h&&M._68O!==Xj?M._filterFunc?M._filterFunc(h):!0:!1}}),cg(e,{edgeGroupAgentFunc:m,graphViewAutoScrollZone:16,graphViewResettable:!0,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:b.rectSelectBorder,graphViewRectSelectBackground:Xo,graphViewEditPointSize:q?17:7,graphViewEditPointBorderColor:b.editPointBorder,graphViewEditPointBackground:b.editPointBackground,setEdgeType:function(G,E,z){hp[G]=E,em[G]=z},getEdgeType:function(N){return hp[N]}},!0),cg(H,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":E,"image.stretch":"fill",icons:E,ingroup:!0,"body.color":E,opacity:E,pixelPerfect:!0,"select.color":yj,"select.width":1,"select.padding":2,"select.type":Kf,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"shadow.color":yj,"border.color":E,"border.width":2,"border.padding":2,"border.type":Kf,label:E,"label.font":E,"label.color":jq,"label.background":E,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":E,"label.max":E,"label.opacity":E,"label.scale":1,"label.align":E,label2:E,"label2.font":E,"label2.color":jq,"label2.background":E,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":E,"label2.max":E,"label2.opacity":E,"label2.scale":1,"label2.align":E,note:E,"note.expanded":!0,"note.font":E,"note.color":Ao,"note.background":yj,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":E,"note.toggleable":!0,"note.border.width":1,"note.border.color":E,"note.opacity":E,"note.scale":1,"note.align":E,note2:E,"note2.expanded":!0,"note2.font":E,"note2.color":Ao,"note2.background":yj,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":E,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":E,"note2.opacity":E,"note2.scale":1,"note2.align":E,"group.type":E,"group.image":E,"group.image.stretch":"fill","group.repeat.image":E,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":E,"group.title.color":Ao,"group.title.background":b.groupTitleBackground,"group.title.align":j,"group.background":b.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":E,"group.border.color":Vc,"group.border.cap":Cq,"group.border.join":Ek,"group.gradient":m,"group.gradient.color":"#FFF",shape:E,"shape.background":Vc,"shape.repeat.image":E,"shape.border.width":0,"shape.border.color":Vc,"shape.border.3d":!1,"shape.border.3d.color":E,"shape.border.3d.accuracy":E,"shape.border.cap":Cq,"shape.border.join":Ek,"shape.border.pattern":E,"shape.gradient":m,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":Me,"shape.dash.offset":0,"shape.dash.color":Vk,"shape.dash.width":E,"shape.dash.3d":!1,"shape.dash.3d.color":E,"shape.dash.3d.accuracy":E,"shape.polygon.side":6,"shape.arc.from":s,"shape.arc.to":X,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":E,"edge.type":E,"edge.points":E,"edge.segments":E,"edge.color":Vc,"edge.width":2,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":E,"edge.3d.accuracy":E,"edge.cap":Cq,"edge.join":Ek,"edge.source.position":17,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":E,"edge.dash":!1,"edge.dash.pattern":Me,"edge.dash.offset":0,"edge.dash.color":Vk,"edge.dash.width":E,"edge.dash.3d":!1,"edge.dash.3d.color":E,"edge.dash.3d.accuracy":E,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":E,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":E,"grid.column.percents":E,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":b.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":b.gridCellBorderColor,"grid.block":E,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":b.gridBlockColor},!0),cg(Ze,{_5I:!0,isAutoAdjustIndex:function(){return this._5I},setAutoAdjustIndex:function(I){this._5I=I},_76I:function(I,w,L){this._39I&&this._39I.fire({data:I,oldIndex:w,newIndex:L})},addIndexChangeListener:function($,A,N){var B=this;B._39I||(B._39I=new hq),B._39I.add($,A,N)},removeIndexChangeListener:function(B,n){this._39I.remove(B,n)},prepareRemove:function(g){hc(g)&&(g.setSource(m),g.setTarget(m)),g._70O&&g._70O.toList().each(this.remove,this),g._69O&&g._69O.toList().each(function(O){O.setHost(m)}),g._host&&g.setHost(m)},onAdded:function(P){this.isAutoAdjustIndex()&&this._76O(P)},onDataPropertyChanged:function(n,j){pg[j.property]&&this.isAutoAdjustIndex()&&this._76O(n)},isAdjustable:function(k){return qh(k)||hc(k)},isAdjustedToBottom:function($){return Mh($)?$.isExpanded()&&Fp($):!1},_76O:function(F){var h=this;h.isAdjustedToBottom(F)?(h.sendToBottom(F),F.eachChild(h._76O,h)):h.sendToTop(F)},sendToTop:function(P){var N=this;if(N.contains(P)&&N.isAdjustable(P)){var j=N._datas;if(P!==j.get(N.size()-1)){var p=j.indexOf(P);j.removeAt(p),j.add(P),N._76I(P,p,N.size()-1)}if(hc(P)){var F=P._40I;F&&!N.isAdjustedToBottom(F)&&N.sendToTop(F),F=P._41I,F&&!N.isAdjustedToBottom(F)&&N.sendToTop(F)}P._69O&&P._69O.each(function(u){u.isRelatedTo(P)||qh(P)&&u.isLoopedHostOn(P)||N.sendToTop(u)}),P.ISubGraph||(!Mh(P)||P.isExpanded())&&P._adjustChildrenToTop&&P.eachChild(function(o){hc(o)||N.sendToTop(o)})}},sendToBottom:function(C,k){var c=this;if(C!==k&&c.contains(C)&&c.isAdjustable(C)&&(!k||c.contains(k))){var U=c._datas,h=U.remove(C),d=k?c._datas.indexOf(k):0;if(U.add(C,d),h!==d){c._76I(C,h,d);var i=C._parent;!i||i.ISubGraph||hc(i)||c.sendToBottom(C._parent,C)}}}}),cg(Wl,{ms_edit:function(f){f._46O=function(x){var y=this,m=y.gv.dm(),g=m.getHistoryManager(),O=y._index,d=y._89I,z=y._node,v=y._shape,B=y._edge,i=y._77I;z&&d?(this.fi({kind:"endEditRect",event:x,data:z,direction:d}),g&&g.endInteraction()):v&&O>=0?(y.fi({kind:"endEditPoint",event:x,data:v,index:O}),g&&g.endInteraction()):B&&O>=0?(y.fi({kind:"endEditPoint",event:x,data:B,index:O}),g&&g.endInteraction()):i&&(y.fi({kind:"endEditRotation",event:x,data:i}),g&&g.endInteraction())},f._78I=function(j){var e=this;e.autoScroll(j);var d=e.gv.lp(j),M=e._index,p=e._89I,$=e._node,a=e._shape,g=e._edge,V=e._77I;if($&&p)e._80O(d),e.fi({kind:"betweenEditRect",event:j,data:$,direction:p});else if(a&&M>=0)d.e=a.getPoints().get(M).e,a.setPoint(M,d),e.fi({kind:"betweenEditPoint",event:j,data:a,index:M});else if(g&&M>=0){var X=g.s(Hf);d.e=X.get(M).e,X.set(M,d),g.fp(Hf,m,X),e.fi({kind:"betweenEditPoint",event:j,data:g,index:M})}else if(V){var h=V.p(),r=v+P(d.y-h.y,d.x-h.x);Y(r)<.04&&(r=0),V.setRotation(r),e.fi({kind:"betweenEditRotation",event:j,data:V})}},f._80O=function(J){var S=this,l=S._rect,b=l.x,K=l.y,h=l.width,B=l.height,t=S._89I;"northwest"===t?l=wb(J,{x:b+h,y:K+B}):t===Zi?l=wb({x:b,y:J.y},{x:b+h,y:K+B}):"northeast"===t?l=wb({x:b,y:J.y},{x:J.x,y:K+B}):t===Uj?l=wb({x:J.x,y:K},{x:b+h,y:K+B}):t===cs?l=wb({x:b,y:K},{x:J.x,y:K+B}):"southwest"===t?l=wb({x:J.x,y:K},{x:b+h,y:J.y}):"south"===t?l=wb({x:b,y:K},{x:b+h,y:J.y}):"southeast"===t&&(l=wb({x:b,y:K},J)),S._node.setRect(l)},f._80I=function(H,j,g,u,Z){var s=this,n=s.gv.getEditPointSize()+2;return lf({x:j-n/2,y:g-n/2,width:n,height:n},H)?(s._89I!==u&&(s.setCursor(Z),s._89I=u),!0):!1},f._79I=function(B,g,A){var W=this,O=W.gv,E=g?O.getDataUI(g):m,e=E?E._55O:m;if(e){var z,X,l,y=O.getEditPointSize()+2,P=O.lp(B);if(qh(g)){if(e._56O&&qh(g)&&(X=e._98o,lf({x:X.x-y/2,y:X.y-y/2,width:y,height:y},P)))return W._77I=g,A&&W.fi({kind:"beginEditRotation",event:B,data:g}),W.setCursor("crosshair"),!0;if(e._43O&&g instanceof yr)for(l=g.getPoints(),z=l.size()-1;z>=0;z--)if(X=l.get(z),lf({x:X.x-y/2,y:X.y-y/2,width:y,height:y},P))return W._index=z,W._shape=g,A&&W.fi({kind:"beginEditPoint",event:B,data:g,index:z}),W.setCursor("crosshair"),!0;if(e._42O){var i=g.getRect(),a=i.x,r=i.y,T=i.width,Y=i.height;if(W._80I(P,a,r,"northwest","nwse-resize")||W._80I(P,a+T/2,r,Zi,Hc)||W._80I(P,a+T,r,"northeast","nesw-resize")||W._80I(P,a,r+Y/2,Uj,Ef)||W._80I(P,a+T,r+Y/2,cs,Ef)||W._80I(P,a,r+Y,"southwest","nesw-resize")||W._80I(P,a+T/2,r+Y,"south",Hc)||W._80I(P,a+T,r+Y,"southeast","nwse-resize"))return W._node=g,W._rect=g.getRect(),A&&W.fi({kind:"beginEditRect",event:B,data:g,direction:W._89I}),!0}}if(e._43O&&hc(g)&&g.s(ac)===_k&&(l=g.s(Hf)))for(z=l.size()-1;z>=0;z--)if(X=l.get(z),lf({x:X.x-y/2,y:X.y-y/2,width:y,height:y},P))return W._index=z,W._edge=g,A&&W.fi({kind:"beginEditPoint",event:B,data:g,index:z}),W.setCursor("crosshair"),!0}return!1}},ms_gv:function($){$._currentSubGraph=m,$.upSubGraph=function(){this.setCurrentSubGraph(_q(this._currentSubGraph))},$.isVisible=function(N){var S=this;if(_q(N)!==S._currentSubGraph)return!1;if(hc(N)){var x=N._40I,K=N._41I;if(!x||!K)return!1;if(!(N.s("edge.independent")||S.isVisible(x)&&S.isVisible(K)))return!1;if(N.isEdgeGroupHidden())return!1}else for(var H=N._parent;H&&!H.ISubGraph;){if(Mh(H)&&(!H.isExpanded()||!S.isVisible(H)))return!1;H=H._parent}if(S instanceof ne){if(!N.s("3d.visible"))return!1}else if(!N.s("2d.visible"))return!1;return S._visibleFunc?S._visibleFunc(N):!0},$._16o=function(d){var E=this;d.datas.each(function(w){E.invalidateData(w);var l=w._parent;Mh(l)&&qh(w)&&w.s(kj)&&(E.invalidateData(l),l._49I&&l._49I.each(function(N){E.invalidateData(N)}))}),E.onSelectionChanged(d)},$.onSelectionChanged=function(f){var J=this,y=J.sm();if(1===y.size()&&("set"===f.kind||"append"===f.kind)){var g=y.ld();J.isAutoMakeVisible()&&J.makeVisible(g),J._76O&&J._dataModel.isAutoAdjustIndex()&&J._76O(g)}},$.makeVisible=function(v){if(v){var p=this,e=p.getDataUI?p.getDataUI(v):p.getData3dUI(v);if(e){var r=v,I=_q(v);for(I!==p._currentSubGraph&&p.setCurrentSubGraph(I);(r=r._parent)&&r!==I;)Mh(r)&&r.setExpanded(!0);p._23I=v,p.iv()}}},$.getLabel=function(h){var x=h.getStyle(bq);return x===E?h.getName():x},$.getLabelBackground=function(w){return w.getStyle("label.background")},$.getLabelColor=function(L){return L.getStyle("label.color")},$.getLabel2=function(R){return R.getStyle("label2")},$.getLabel2Background=function(M){return M.getStyle("label2.background")},$.getLabel2Color=function(W){return W.getStyle("label2.color")},$.getNote=function(m){return m.getStyle(qi)},$.getNoteBackground=function(G){return G.getStyle("note.background")},$.getNote2=function(x){return x.getStyle(bm)},$.getNote2Background=function(b){return b.getStyle("note2.background")},$.handleClick=function(e,W,L){var j=this;W?(j.fi({kind:"clickData",event:e,data:W,part:L}),j.onDataClicked(W,e)):(j.fi({kind:"clickBackground",event:e}),j.onBackgroundClicked(e))},$.handleDoubleClick=function(j,W,P){var I=this;Kh(j)&&(W?(I.fi({kind:"doubleClickData",event:j,data:W,part:P}),I.onDataDoubleClicked(W,j,P),I.checkDoubleClickOnNote(j,W,P)||I.checkDoubleClickOnRotation&&I.checkDoubleClickOnRotation(j,W,P)||(hc(W)?I.onEdgeDoubleClicked(W,j,P):W.ISubGraph?I.onSubGraphDoubleClicked(W,j,P):Mh(W)?I.onGroupDoubleClicked(W,j,P):W.IDoorWindow?I.onDoorWindowDoubleClicked(W,j,P):W.ICSGBox&&I.onCSGBoxDoubleClicked(W,j,P))):(I.fi({kind:"doubleClickBackground",event:j}),I.onBackgroundDoubleClicked(j)))},$.onSubGraphDoubleClicked=function(i){this.setCurrentSubGraph(i)},$.onEdgeDoubleClicked=function(e,v){e.ISubGraph&&!Bd(v)?this.setCurrentSubGraph(e):e.s("edge.toggleable")&&e.toggle()},$.onGroupDoubleClicked=function(k){k.s("group.toggleable")&&k.toggle()},$.onDoorWindowDoubleClicked=function(V){V.s("dw.toggleable")&&V.toggle(!0)},$.onCSGBoxDoubleClicked=function(H,D){var h=this;if(h instanceof ne){var f=h.getHitFaceInfo(D);f&&f.face&&H.s(f.face+".toggleable")&&H.toggleFace(f.face,!0)}},$.onBackgroundClicked=function(){},$.onBackgroundDoubleClicked=function(){this.upSubGraph()},$.onDataClicked=function(){},$.onDataDoubleClicked=function(){},$.onAutoLayoutEnded=function(){},$.onMoveEnded=function(){},$.onPanEnded=function(){},$.onPinchEnded=function(){},$.onRectSelectEnded=function(){},$.onZoomEnded=function(){}},ms_icons:function(o){o.getRotation=function(A){return A==m?0:A},o._15O=function(){var z=this,R=z.s(wh);if(R){var O=z,j=z.data||z._data,e=z._38o={icons:R,rects:{}};for(var c in R){var $=R[c],w=Ge($.shape3d,j,O);if(!(Ge($.visible,j,O)===!1||Ge($.for3d,j,O)&&!z.I3d||w&&!z.I3d)){var o=w?[w]:Ge($.names,j,O),s=o?o.length:0,G=Ge($.position,j,O)||3,q=Ge($.offsetX,j,O)||0,I=Ge($.offsetY,j,O)||0,r=Ge($.direction,j,O)||cs,u=Ge($.gap,j,O),L=u!=m?u:1,d=Ge($.rotation,j,O),N=Ge($.keepOrien,j,O),M=Ge($.rotationFixed,j,O)?d:z.getRotation(d,N,G),l=m,W=e.rects[c]=new Array(s);W.rotation=M;for(var J=0;s>J;J++){var F,U,b,Z,t=o[J];if(w)b=0,Z=0;else{var f=Em(t);b=Ge($.width,j,O),Z=Ge($.height,j,O),b==m&&(b=bp(f,j)),Z==m&&(Z=Fd(f,j))}if(l?r===cs?q+=b/2:r===Uj?q-=b/2:r===Zi?I-=Z/2:I+=Z/2:l={width:b,height:Z},z.I3d){var D=-b/2,V=-Z/2;U={width:b,height:Z,mat:z._16O(Ge($.autorotate,j,O),G,l,Ge($.face,j,O)||a,Ge($.t3,j,O),Ge($.r3,j,O),Ge($.rotationMode,j,O),q,I),vs:new uf([D,-V,0,D,-V-Z,0,D+b,-V-Z,0,D+b,-V,0])}}else F=z.getPosition(G,q,I,l,Ge($.positionFixed,j,O)),U={x:F.x-b/2,y:F.y-Z/2,width:b,height:Z},z._68o(U,M);W[J]=U,r===cs?q+=b/2+L:r===Uj?q-=b/2+L:r===Zi?I-=Z/2+L:I+=Z/2+L}}}}}}});var lh={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Se={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Lr={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},pg={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Te={position:1,width:1,height:1,expanded:1,rotation:1,"s:edge.points":1},ud={"edge.type":1,"edge.group":1},Bj={rotation:1,rotationX:1,rotationZ:1},Wo={position:1,width:1,height:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},vl={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},$l={shape:1,thickness:1,position:1},pp=function(O,r){if(!O||!Mh(r)||r.isEmpty())return!1;for(O=O._parent;Mh(O);){if(O===r)return!0;O=O._parent}return!1},_q=function(Q){if(!Q)return m;if(hc(Q)){var $=Q._40I,u=Q._41I;if(!$||!u)return m;var q=_q($),z=_q(u);return q===z?q:m}for(var t=Q._parent;hc(t)&&!t.ISubGraph;)t=t._parent;return t?t.ISubGraph?t:_q(t):m},Jm=function(F,f,q,V){var x=f.getStyle(q)*V;x&&xq(F,x),x=f.getStyle(q+".left")*V,x&&(F.x-=x,F.width+=x),x=f.getStyle(q+".right")*V,x&&(F.width+=x),x=f.getStyle(q+".top")*V,x&&(F.y-=x,F.height+=x),x=f.getStyle(q+".bottom")*V,x&&(F.height+=x),F.width<0&&(F.width=-F.width,F.x-=F.width),F.height<0&&(F.height=-F.height,F.y-=F.height)},Fp=function(r){for(var _,W=0,s=r.size();s>W;W++)if(_=r.getChildAt(W),qh(_)&&Fp(_))return!0;return r.hasAgentEdges()},Tl=function(K){if(!K)return m;for(var N=K._parent;Mh(N);){if(!Mh(N._parent))return N.isExpanded()?K:N;N.isExpanded()||(K=N),N=N._parent}return K},Nc=function(j,T){if(!j||!T)return m;var F,U,I,W=_q(j),x=_q(T);if(W!==x){for(;x&&W!==x;)x=_q(x);if(W===x)return j;F=new om,F.add(j,0);for(var y=j._parent;qh(y)&&!T.isDescendantOf(y);)F.add(y,0),y=y._parent;for(I=F.size(),U=0;I>U;U++){var H=F.get(U);if(Mh(H)&&!H.isExpanded())return H;if(H.ISubGraph)return H}return j}return j},lq=function(m){if(m.isLooped())return m._source;var A=Tl(m._source),b=Tl(m._target);return A===b?m._source:Nc(A,b)},Vo=function(N){if(N.isLooped())return N._target;var w=Tl(N._source),m=Tl(N._target);return w===m?N._target:Nc(m,w)},Yp=function(b,f){var a;if(Mh(f)&&f.isExpanded()){var Z=b.getDataUI(f);Z&&Z._88I&&(a=Z._88I.rect)}return a?a:f.getRect()},Zp=function(v,G,K,y,i){return G?(K=Or(K,Yp(v,G)),K.x+=y,K.y+=i,K):m},Lf=function(Y,Z){if(!Y||!Z)return m;var N,f,$,d,i,L;if(Y===Z){if(d=Y.getLoopedEdges(),!d)return m;d=new om(d)}else{if(i=Y.getAgentEdges(),L=Z.getAgentEdges(),!i||!L)return m;for(f=i.size(),N=0;f>N;N++)$=i.get(N),L.contains($)&&(d||(d=new om),d.add($))}if(d)for(N=0;N<d.size();N++)$=d.get(N),$.getStyle(ac)===_k&&($._22I(m),d.removeAt(N),N--);return d},Fj=function(U,k){var Z=Lf(U,k);if(Z&&!Z.isEmpty()){if(1===Z.size())return Z.get(0)._22I(m),void 0;var F=new om,i=new om;Z.each(function(d){var m=d.s("edge.group");F.contains(m)||F.add(m)}),F.sort(),F.each(function(b){i.add(new I.EdgeGroup(Z.toList(function(o){return b===o.s("edge.group")}),i))}),i.each(function(x){x.each(function(H){H._22I(x)})})}},Pl=function(J,p){if(p){var $=p.rect,e=p.color,G=p.rotation,O=p.labelWidth,f=p.background,l=p.opacity,o=p.scale,v=o!=m&&1!==o;if(l!=m){var U=J.globalAlpha;J.globalAlpha*=l}if(G||v){J.save();var i=$.x+$.width/2,h=$.y+$.height/2;Hm(J,i,h),G&&Ji(J,G),v&&J.scale(o,o),Hm(J,-i,-h)}if(f&&Vi(J,$.x,$.y,$.width,$.height,f),O){var q=$.width,c=J.createLinearGradient($.x,$.y,$.x+q,$.y);c.addColorStop(0,e),c.addColorStop(.9,e),c.addColorStop(1,cp),e=c,$.width=O}nm(J,p.ss,$,p.font,e,p.align),O&&($.width=q),(G||v)&&J.restore(),l!=m&&(J.globalAlpha=U)}},Oo=function(o,J){if(J){var H=J.rect,S=H.x,$=H.y,e=H.width,Y=H.height,h=J.background,l=J.borderWidth,M=J.borderColor,O=J.labelWidth,B=J.opacity,x=J.scale,y=x!=m&&1!==x;if(B!=m){var u=o.globalAlpha;o.globalAlpha*=B}if(y){o.save();var c=H.x+H.width/2,R=H.y+H.height/2;Hm(o,c,R),o.scale(x,x),Hm(o,-c,-R)}if(J.expanded){var U=_(8,e/4),V=$+Y-8;if(o.fillStyle=h,o.beginPath(),o.moveTo(S,$),o.lineTo(S,V),o.lineTo(S+e/2,V),o.lineTo(S+e/2,$+Y),o.lineTo(S+e/2+U,V),o.lineTo(S+e,V),o.lineTo(S+e,$),o.closePath(),o.fill(),l&&(o.lineWidth=l,o.lineJoin="round",o.lineCap="round",o.strokeStyle=M?M:qk(h),o.beginPath(),o.moveTo(S+e,$),o.lineTo(S+e,V),o.lineTo(S+e/2+U,V),o.lineTo(S+e/2,$+Y),o.stroke(),o.strokeStyle=M?M:El(h),o.beginPath(),o.moveTo(S+e,$),o.lineTo(S,$),o.lineTo(S,V),o.lineTo(S+e/2,V),o.lineTo(S+e/2,$+Y),o.stroke()),H.height-=8,h=J.color,O){var r=e,q=o.createLinearGradient(S,$,S+r,$);q.addColorStop(0,h),q.addColorStop(.9,h),q.addColorStop(1,cp),h=q,H.width=O}nm(o,J.ss,H,J.font,h,J.align),O&&(H.width=r),H.height+=8}else{var f=e/2;l&&(o.lineWidth=l,o.lineJoin="round",o.lineCap="round",o.strokeStyle=M?M:qk(h),o.beginPath(),o.arc(S+f,$+f,f,v,1.6*s,!0),o.moveTo(S+f,$+Y),o.lineTo(S+e-f/5,$+f),o.stroke(),o.strokeStyle=M?M:El(h),o.beginPath(),o.arc(S+f,$+f,f,1.6*s,v,!0),o.moveTo(S+f,$+Y),o.lineTo(S+f/5,$+f),o.stroke()),o.fillStyle=h,o.beginPath(),o.arc(S+f,$+f,f,0,X,!0),o.moveTo(S+f,$+Y),o.lineTo(S+e-f/5,$+f),o.lineTo(S+f/5,$+f),o.closePath(),o.fill(),o.fillStyle=J.color,o.beginPath(),o.arc(S+f,$+f,f/3,0,X,!0),o.fill()}y&&o.restore(),B!=m&&(o.globalAlpha=u)}},gi=function(t,N){return N>2*t?t:N/2},pn=function(G,B,e,T){if(!G||!B)return 0;var N=P(B.y-G.y,B.x-G.x);return e||(N=B.x<G.x?N+s:N),N+T},Qp=function(I,n,E,T,J,p,d){d&&(I.x>n.x||I.x===n.x&&I.y>n.y)&&(E=qf[E],J=-J);var V=Or(E,{x:0,y:0,width:Dj(I,n),height:0},p);return V.x+=T,V.y+=J,V=new tg(P(n.y-I.y,n.x-I.x)).tf(V),V.x+=I.x,V.y+=I.y,V},Ap=function(k,X,S,v,i){if(k._19Q=!0,!S.getEdgeGroup())return v?S.s("edge.gap"):0;var s,d=0,W=0,R=0;if(S.getEdgeGroup().getSiblings().each(function(B){B.each(function(e){if(X.isVisible(e)&&e.s(ac)==i){var y=e.s("edge.gap");s?(W+=R/2+y/2,R=y):(s=e,R=y),e===S&&(d=W)}})}),v)return W-d+R;var j=d-W/2;return s&&S._40I!==s._40I&&(k._19Q=!1),j},Fo=function(){var S=function(g){var I=[];return g.forEach(function(j){I.push({x:j.x,y:j.y}),I.push({x:j.x+j.width,y:j.y+j.height}),I.push({x:j.x+j.width,y:j.y}),I.push({x:j.x,y:j.y+j.height})}),I};return function(B,Z,i){if("oval"===B){var R=0,b=i.height/i.width,k=b*b,H=i.x+i.width/2,t=i.y+i.height/2,u=S(Z);u.forEach(function(s){var D=s.x-H,w=s.y-t,C=D*D+w*w/k;C>R&&(R=C)}),R=n(R);var l=b*R;return{x:H-R,y:t-l,width:2*R,height:2*l}}if("circle"===B){var j=0,H=i.x+i.width/2,t=i.y+i.height/2,u=S(Z);return u.forEach(function(v){var g=v.x-H,I=v.y-t,k=g*g+I*I;k>j&&(j=k)}),j=n(j),{x:H-j,y:t-j,width:2*j,height:2*j}}return"roundRect"===B?(xq(i,_(i.width,i.height)/16),i):i}}(),gk=I.graph={},Fm=function(u,E,d){qn(D+".graph."+u,E,d)};I.layout={};var ag={comps:[{type:Un,points:[85,50,70,115,100,71,86,107,88,49,43,70,111,87,107,53,117,116,80,107,78,85,67,72,86,54,88,97,120,81,122,74,102,100,99,101,71,57,85,76,48,50,105,73,74,122,71,105,65,84,111,107,101,86,97,68,104,56,121,97,57,98,76,68],borderWidth:1,borderColor:m}]};ag[Lk]=ag[Om]=160,Wm("node_image",or(30,30,[{type:Kf,rect:[4,5,22,16],gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[2,3,26,20],borderWidth:1,borderColor:Vc},{type:Kf,rect:[11,23,8,4],background:Vc},{type:Kf,rect:[6,27,18,2],background:Vc}])),Wm("node_icon",or(16,16,[{type:Kf,rect:[2,2,12,10],gradient:Ub,gradientColor:Kp,background:Vc},{type:Xk,rect:[2,2,12,10],width:1,color:Vc},{type:Kf,rect:[6,12,4,2],background:Vc},{type:Kf,rect:[4,14,8,1],background:Vc}])),Wm("group_image",or(66,39,[{type:Kf,rect:[44.3,18,18.1,12.8],gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[3.3,17.8,18.1,12.8],gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:Vc,gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[26.2,29.4,12.8,4.2],background:Vc},{type:Kf,rect:[21.3,33.5,22.5,2.3],background:Vc},{type:Kf,rect:[5.3,32.7,14.1,2.1],background:Vc},{type:Kf,rect:[9,30.4,6.7,2.4],background:Vc},{type:Kf,rect:[50,30.7,6.7,2.4],background:Vc},{type:Kf,rect:[46.3,33,14.1,2.1],background:Vc}])),Wm("group_icon",or(16,16,[{type:Kf,rect:[4,12,4,2],background:Vc},{type:Kf,rect:[2,13,8,1],background:Vc},{type:Kf,rect:[12,12,2,1],background:Vc},{type:Kf,rect:[11,13,4,1],background:Vc},{type:Kf,rect:[10,7,6,5],gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[1,2,10,10],gradient:Ub,gradientColor:Kp,background:Vc},{type:Xk,rect:[1,2,10,10],width:1,color:Vc}])),Wm("edge_icon",or(16,16,[{type:Kf,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[10.8,1,4,4],background:Vc},{type:Kf,rect:[1,11,4,4],background:Vc}])),Wm("subGraph_image",or(72,45,[{type:Un,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[29.6,30.7,3.6,1.8],background:Vc},{type:Kf,rect:[28.4,32.3,6,1.2],background:Vc},{type:Kf,rect:[37.3,32,10.8,1.8],background:Vc},{type:Kf,rect:[39.1,29.9,7.2,2.3],background:Vc},{type:Kf,rect:[26.6,23.7,9.6,7.2],gradient:Ub,gradientColor:Kp,background:Vc},{type:Kf,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:Vc,gradient:Ub,gradientColor:Kp,background:Vc}])),Wm("subGraph_icon",or(17,17,[{type:Un,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Ub,gradientColor:Kp,background:Vc}])),Wm("shape_icon",or(16,16,[{type:Un,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:Vc}])),Wm("polyline_icon",or(16,16,[{type:Un,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:Vc},xr(7.5,.4),xr(7.5,6.3),xr(13.6,6.3),xr(13.6,14),xr(.7,13.9),xr(.7,.3)])),Wm("grid_icon",or(16,16,[{type:Kf,rect:[1,1,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[6,1,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[11,1,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[11,6,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[6,6,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[1,6,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[11,11,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[6,11,4,4],background:Vc,gradient:Ub,gradientColor:Kp},{type:Kf,rect:[1,11,4,4],background:Vc,gradient:Ub,gradientColor:Kp}])),Wm("light_icon",or(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:Vc},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:Vc,gradient:Ub,gradientColor:Kp,background:{func:function(E){var N=E?E.s(lr):m;return we(N)?"rgb("+S(255*N[0])+","+S(255*N[1])+","+S(255*N[2])+")":N||Vc}}}]));var $e=function(h,y){for(var a=h.vertices,u=0;u<a.length;u++){var V=a[u],X=V.y;V.y=V.z,V.z=-X,y&&(V.y+=y)}},Ab=function(Z){for(var o,p,T,P,E,f,q=[],B=[],y=[],t=Z.faces,R=0,s=0,G=0,Q=t.length;Q>R;R++,s+=6,G+=9){var i=t[R];1===i.i?(o||(o=[],p=[],T=[]),ws(i,R,s,G,Z,o,T,p)):2===i.i?(P||(P=[],E=[],f=[]),ws(i,R,s,G,Z,P,f,E)):ws(i,R,s,G,Z,q,y,B)}return{vs:q,uv:B,ns:y,top_vs:o,top_uv:p,top_ns:T,bottom_vs:P,bottom_uv:E,bottom_ns:f}},ws=function(Y,G,K,z,N,s,X,L){var g=N.vertices,v=N.faceVertexUvs,_=g[Y.a],l=g[Y.b],k=g[Y.c];s[z]=_.x,s[z+1]=_.y,s[z+2]=_.z,s[z+3]=l.x,s[z+4]=l.y,s[z+5]=l.z,s[z+6]=k.x,s[z+7]=k.y,s[z+8]=k.z;var R=Y.vertexNormals;if(3===R.length){var C=R[0],H=R[1],M=R[2];X[z]=C.x,X[z+1]=C.y,X[z+2]=C.z,X[z+3]=H.x,X[z+4]=H.y,X[z+5]=H.z,X[z+6]=M.x,X[z+7]=M.y,X[z+8]=M.z}else{var d=Y.normal;X[z]=d.x,X[z+1]=d.y,X[z+2]=d.z,X[z+3]=d.x,X[z+4]=d.y,X[z+5]=d.z,X[z+6]=d.x,X[z+7]=d.y,X[z+8]=d.z}var W=v[0][G][0],J=v[0][G][1],j=v[0][G][2];L[K]=W.x,L[K+1]=W.y,L[K+2]=J.x,L[K+3]=J.y,L[K+4]=j.x,L[K+5]=j.y},ed=function(H,I,Z,b,Y,V,W,A,j){Z==m&&(Z=!0),b==m&&(b=!0),W==m&&(W=1),A==m&&(A=0);var g=new Ul;return tn(g,H,I,j),Ab(new yq(g,{top:Z,bottom:b,curveSegments:Y,amount:W,repeatUVLength:V},-W/2+A))},Ld=function(_,N){this.x=_||0,this.y=N||0};Ld.prototype={constructor:Ld,add:function(h){return this.x+=h.x,this.y+=h.y,this
},sub:function(H){return this.x-=H.x,this.y-=H.y,this},equals:function(d){return d.x===this.x&&d.y===this.y},multiplyScalar:function(w){return this.x*=w,this.y*=w,this},distanceTo:function(r){return n(this.distanceToSquared(r))},distanceToSquared:function(j){var Q=this.x-j.x,E=this.y-j.y;return Q*Q+E*E},clone:function(){return new Ld(this.x,this.y)}};var Vr=function(H,y,c){this.x=H||0,this.y=y||0,this.z=c||0};Vr.prototype={constructor:Vr,set:function(M,v,j){return this.x=M,this.y=v,this.z=j,this},setY:function(N){return this.y=N,this},copy:function(O){return this.x=O.x,this.y=O.y,this.z=O.z,this},add:function(M){return this.x+=M.x,this.y+=M.y,this.z+=M.z,this},addVectors:function(w,p){return this.x=w.x+p.x,this.y=w.y+p.y,this.z=w.z+p.z,this},sub:function(f){return this.x-=f.x,this.y-=f.y,this.z-=f.z,this},subVectors:function(n,I){return this.x=n.x-I.x,this.y=n.y-I.y,this.z=n.z-I.z,this},multiplyScalar:function(s){return this.x*=s,this.y*=s,this.z*=s,this},applyMatrix4:function(p){var R=this.x,D=this.y,q=this.z,E=p.elements;return this.x=E[0]*R+E[4]*D+E[8]*q+E[12],this.y=E[1]*R+E[5]*D+E[9]*q+E[13],this.z=E[2]*R+E[6]*D+E[10]*q+E[14],this},divideScalar:function(W){if(0!==W){var m=1/W;this.x*=m,this.y*=m,this.z*=m}else this.x=0,this.y=0,this.z=0;return this},dot:function(m){return this.x*m.x+this.y*m.y+this.z*m.z},length:function(){return n(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(p){var g=this.x,H=this.y,M=this.z;return this.x=H*p.z-M*p.y,this.y=M*p.x-g*p.z,this.z=g*p.y-H*p.x,this},crossVectors:function(B,U){var o=B.x,p=B.y,Q=B.z,w=U.x,M=U.y,q=U.z;return this.x=p*q-Q*M,this.y=Q*w-o*q,this.z=o*M-p*w,this},distanceTo:function(j){return n(this.distanceToSquared(j))},distanceToSquared:function(h){var e=this.x-h.x,H=this.y-h.y,m=this.z-h.z;return e*e+H*H+m*m},clone:function(){return new Vr(this.x,this.y,this.z)}};var aj=function(){this.elements=new Float32Array(16)};aj.prototype={constructor:aj,set:function(Q,m,v,T,w,B,c,J,H,R,q,C,h,f,K,N){var o=this.elements;return o[0]=Q,o[4]=m,o[8]=v,o[12]=T,o[1]=w,o[5]=B,o[9]=c,o[13]=J,o[2]=H,o[6]=R,o[10]=q,o[14]=C,o[3]=h,o[7]=f,o[11]=K,o[15]=N,this},makeRotationAxis:function(G,h){var O=V(h),J=l(h),b=1-O,w=G.x,P=G.y,E=G.z,u=b*w,F=b*P;return this.set(u*w+O,u*P-J*E,u*E+J*P,0,u*P+J*E,F*P+O,F*E-J*w,0,u*E-J*P,F*E+J*w,b*E*E+O,0,0,0,0,1),this}};var Ve=function(k){this.repeatUVLength=k};Ve.prototype={generateTopUV:function(W,o,H,t,Z,G,e){var Q,a,s,P,y=W.vertices,g=y[t].x,B=y[t].y,m=y[Z].x,n=y[Z].y,k=y[G].x,c=y[G].y,v=this.repeatUVLength;if(v)Q=0,a=0,s=v,P=v;else{this._bb||(this._bb=o.getBoundingBox());var q=this._bb;Q=q.minX,a=q.minY,s=q.maxX-Q,P=q.maxY-a}return e?[new Ld((g-Q)/s,(B-a)/P),new Ld((m-Q)/s,(n-a)/P),new Ld((k-Q)/s,(c-a)/P)]:[new Ld((g-Q)/s,1-(B-a)/P),new Ld((m-Q)/s,1-(n-a)/P),new Ld((k-Q)/s,1-(c-a)/P)]},generateBottomUV:function(W,U,b,_,v,Z){return this.generateTopUV(W,U,b,_,v,Z,!0)},generateSideWallUV:function(E,W,r,q,K,u,l,y,p,J,R,U){if(!this._cl){for(var A,x,S=[],t=0,k=r.length,z=0;k>z;z++){A=r[z],x=r[(z+1)%k];var v=A.x-x.x,O=A.y-x.y,$=n(v*v+O*O);S.push(t),t+=$}for(var z=0;k>z;z++)S[z]/=t;this._cl=S}var S=this._cl,I=1-p/J,c=1-(p+1)/J,i=S[R],D=S[U];return D>i&&(i+=1),[new Ld(i,I),new Ld(D,I),new Ld(D,c),new Ld(i,c)]}};var Oi=function(b,_,V,g,h,x){this.a=b,this.b=_,this.c=V,this.i=x,this.normal=g instanceof Vr?g:new Vr,this.vertexNormals=g instanceof Array?g:[]};Oi.prototype={constructor:Oi};var uh=function(){},ap=uh.prototype;ap.getPointAt=function(s){var B=this.getUtoTmapping(s);return this.getPoint(B)},ap.getPoints=function(T){T||(T=5);var q,Q=[];for(q=0;T>=q;q++)Q.push(this.getPoint(q/T));return Q},ap.getSpacedPoints=function(d){d||(d=5);var A,m=[];for(A=0;d>=A;A++)m.push(this.getPointAt(A/d));return m},ap.getLength=function(){var B=this.getLengths();return B[B.length-1]},ap.getLengths=function(b){if(b||(b=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==b+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var Y,O,J=[],f=this.getPoint(0),S=0;for(J.push(0),O=1;b>=O;O++)Y=this.getPoint(O/b),S+=Y.distanceTo(f),J.push(S),f=Y;return this.cacheArcLengths=J,J},ap.getUtoTmapping=function(S,L){var f,M=this.getLengths(),B=0,V=M.length;f=L?L:S*M[V-1];for(var n,l=0,U=V-1;U>=l;)if(B=w(l+(U-l)/2),n=M[B]-f,0>n)l=B+1;else{if(!(n>0)){U=B;break}U=B-1}if(B=U,M[B]==f){var u=B/(V-1);return u}var c=M[B],e=M[B+1],W=e-c,N=(f-c)/W,u=(B+N)/(V-1);return u},ap.getTangent=function(D){var t=1e-4,Z=D-t,a=D+t;0>Z&&(Z=0),a>1&&(a=1);var X=this.getPoint(Z),y=this.getPoint(a),E=y.clone().sub(X);return E.normalize()},ap.getTangentAt=function(D){var M=this.getUtoTmapping(D);return this.getTangent(M)},uh.create=function(w,u){return w.prototype=Er(uh.prototype),w.prototype.getPoint=u,w};var rh=function(){this.curves=[],this.autoClose=!1},mp=rh.prototype=Er(ap);mp.add=function(n){this.curves.push(n)},mp.closePath=function(){var V=this.curves[0].getPoint(0),Z=this.curves[this.curves.length-1].getPoint(1);V.equals(Z)||this.curves.push(new ir(Z,V))},mp.getPoint=function(s){for(var Y,F,o=s*this.getLength(),z=this.getCurveLengths(),u=0;u<z.length;){if(z[u]>=o){Y=z[u]-o,F=this.curves[u];var h=1-Y/F.getLength();return F.getPointAt(h)}u++}return null},mp.getLength=function(){var S=this.getCurveLengths();return S[S.length-1]},mp.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var F,J=[],l=0,a=this.curves.length;for(F=0;a>F;F++)l+=this.curves[F].getLength(),J.push(l);return this.cacheLengths=J,J},mp.getTransformedPoints=function(E){return this.getPoints(E)},mp.getBoundingBox=function(){var E,Q,R,H,o,y,G=this.getPoints();E=Q=Number.NEGATIVE_INFINITY,H=o=Number.POSITIVE_INFINITY;var F,I,m,r,q=G[0]instanceof Vr;for(r=q?new Vr:new Ld,I=0,m=G.length;m>I;I++)F=G[I],F.x>E&&(E=F.x),F.x<H&&(H=F.x),F.y>Q&&(Q=F.y),F.y<o&&(o=F.y),q&&(F.z>R&&(R=F.z),F.z<y&&(y=F.z)),r.add(F);var M={minX:H,minY:o,maxX:E,maxY:Q};return q&&(M.maxZ=R,M.minZ=y),M};var Fq=function(n){rh.call(this),this.actions=[],n&&this.fromPoints(n)},_c=Fq.prototype=Er(rh.prototype),ip="moveTo",Fb="lineTo",al="quadraticCurveTo",od="bezierCurveTo",Rh="arc",_f="ellipse";_c.fromPoints=function($){this.moveTo($[0].x,$[0].y);for(var g=1,E=$.length;E>g;g++)this.lineTo($[g].x,$[g].y)},_c.moveTo=function(){var U=Array.prototype.slice.call(arguments);this.actions.push({action:ip,args:U})},_c.lineTo=function(e,x){var o=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,_=n[n.length-2],b=n[n.length-1],Z=new ir(new Ld(_,b),new Ld(e,x));this.curves.push(Z),this.actions.push({action:Fb,args:o})},_c.quadraticCurveTo=function(a,r,M,v){var Y=Array.prototype.slice.call(arguments),X=this.actions[this.actions.length-1].args,E=X[X.length-2],S=X[X.length-1],o=new xk(new Ld(E,S),new Ld(a,r),new Ld(M,v));this.curves.push(o),this.actions.push({action:al,args:Y})},_c.bezierCurveTo=function(l,A,n,i,G,_){var R=Array.prototype.slice.call(arguments),J=this.actions[this.actions.length-1].args,W=J[J.length-2],V=J[J.length-1],h=new An(new Ld(W,V),new Ld(l,A),new Ld(n,i),new Ld(G,_));this.curves.push(h),this.actions.push({action:od,args:R})},_c.arc=function(C,I,j,J,z,w){var P=this.actions[this.actions.length-1].args,S=P[P.length-2],Z=P[P.length-1];this.absarc(C+S,I+Z,j,J,z,w)},_c.absarc=function(M,Y,G,I,x,g){this.absellipse(M,Y,G,G,I,x,g)},_c.ellipse=function(D,K,h,F,z,$,G){var T=this.actions[this.actions.length-1].args,W=T[T.length-2],Q=T[T.length-1];this.absellipse(D+W,K+Q,h,F,z,$,G)},_c.absellipse=function(A,w,W,M,B,x,h){var $=Array.prototype.slice.call(arguments),i=new Yq(A,w,W,M,B,x,h);this.curves.push(i);var R=i.getPoint(1);$.push(R.x),$.push(R.y),this.actions.push({action:_f,args:$})},_c.getSpacedPoints=function(N){N||(N=40);for(var t=[],w=0;N>w;w++)t.push(this.getPoint(w/N));return t},_c.getPoints=function(m,z){m=m||12;var g,C,r,T,o,N,R,y,d,w,_,F,W,K,t,Z,G,E,A=[];for(g=0,C=this.actions.length;C>g;g++)switch(r=this.actions[g],T=r.action,o=r.args,T){case ip:A.push(new Ld(o[0],o[1]));break;case Fb:A.push(new Ld(o[0],o[1]));break;case al:for(N=o[2],R=o[3],w=o[0],_=o[1],A.length>0?(K=A[A.length-1],F=K.x,W=K.y):(K=this.actions[g-1].args,F=K[K.length-2],W=K[K.length-1]),t=1;m>=t;t++)Z=t/m,G=lg.b2(Z,F,w,N),E=lg.b2(Z,W,_,R),A.push(new Ld(G,E));break;case od:for(N=o[4],R=o[5],w=o[0],_=o[1],y=o[2],d=o[3],A.length>0?(K=A[A.length-1],F=K.x,W=K.y):(K=this.actions[g-1].args,F=K[K.length-2],W=K[K.length-1]),t=1;m>=t;t++)Z=t/m,G=lg.b3(Z,F,w,y,N),E=lg.b3(Z,W,_,d,R),A.push(new Ld(G,E));break;case Rh:var c,p=o[0],I=o[1],u=o[2],n=o[3],Q=o[4],f=!!o[5],x=Q-n,O=2*m;for(t=1;O>=t;t++)Z=t/O,f||(Z=1-Z),c=n+Z*x,G=p+u*V(c),E=I+u*l(c),A.push(new Ld(G,E));break;case _f:var c,p=o[0],I=o[1],v=o[2],b=o[3],n=o[4],Q=o[5],f=!!o[6],x=Q-n,O=2*m;for(t=1;O>=t;t++)Z=t/O,f||(Z=1-Z),c=n+Z*x,G=p+v*V(c),E=I+b*l(c),A.push(new Ld(G,E))}var q=A[A.length-1],U=1e-10;return Y(q.x-A[0].x)<U&&Y(q.y-A[0].y)<U&&A.splice(A.length-1,1),z&&A.push(A[0]),A},_c.toShapes=function(V,d){function u(x){var G,o,r,Z,A,R=[],J=new Fq;for(G=0,o=x.length;o>G;G++)r=x[G],A=r.args,Z=r.action,Z==ip&&0!=J.actions.length&&(R.push(J),J=new Fq),J[Z].apply(J,A);return 0!=J.actions.length&&R.push(J),R}function n(P){for(var Q=[],X=0,E=P.length;E>X;X++){var s=P[X],i=new Ul;i.actions=s.actions,i.curves=s.curves,Q.push(i)}return Q}function m(G,t){for(var W=1e-10,r=t.length,E=!1,$=r-1,R=0;r>R;$=R++){var J=t[$],H=t[R],s=H.x-J.x,h=H.y-J.y;if(Y(h)>W){if(0>h&&(J=t[R],s=-s,H=t[$],h=-h),G.y<J.y||G.y>H.y)continue;if(G.y==J.y){if(G.x==J.x)return!0}else{var Z=h*(G.x-J.x)-s*(G.y-J.y);if(0==Z)return!0;if(0>Z)continue;E=!E}}else{if(G.y!=J.y)continue;if(H.x<=G.x&&G.x<=J.x||J.x<=G.x&&G.x<=H.x)return!0}}return E}var k=u(this.actions);if(0==k.length)return[];if(d===!0)return n(k);var $,C,U,A=[];if(1==k.length)return C=k[0],U=new Ul,U.actions=C.actions,U.curves=C.curves,A.push(U),A;var S=!Ul.Utils.isClockWise(k[0].getPoints());S=V?!S:S;var W,F=[],x=[],J=[],N=0;x[N]=E,J[N]=[];var H,L;for(H=0,L=k.length;L>H;H++)C=k[H],W=C.getPoints(),$=lg.isClockWise(W),$=V?!$:$,$?(!S&&x[N]&&N++,x[N]={s:new Ul,p:W},x[N].s.actions=C.actions,x[N].s.curves=C.curves,S&&N++,J[N]=[]):J[N].push({h:C,p:W[0]});if(!x[0])return n(k);if(x.length>1){for(var a=!1,O=[],K=0,X=x.length;X>K;K++)F[K]=[];for(var K=0,X=x.length;X>K;K++){x[K];for(var h=J[K],g=0;g<h.length;g++){for(var R=h[g],s=!0,P=0;P<x.length;P++)m(R.p,x[P].p)&&(K!=P&&O.push({froms:K,tos:P,hole:g}),s?(s=!1,F[P].push(R)):a=!0);s&&F[K].push(R)}}O.length>0&&(a||(J=F))}var o,w,l;for(H=0,L=x.length;L>H;H++)for(U=x[H].s,A.push(U),o=J[H],w=0,l=o.length;l>w;w++)U.holes.push(o[w].h);return A};var Ul=function(){Fq.apply(this,arguments),this.holes=[]},vh=Ul.prototype=Er(_c);vh.getPointsHoles=function(S){var Z,t=this.holes.length,W=[];for(Z=0;t>Z;Z++)W[Z]=this.holes[Z].getTransformedPoints(S);return W},vh.extractAllPoints=function(W){return{shape:this.getTransformedPoints(W),holes:this.getPointsHoles(W)}},vh.extractPoints=function(h){return this.extractAllPoints(h)};var lg={triangulateShape:function(u,B){function w(X,i,W){return X.x!=i.x?X.x<i.x?X.x<=W.x&&W.x<=i.x:i.x<=W.x&&W.x<=X.x:X.y<i.y?X.y<=W.y&&W.y<=i.y:i.y<=W.y&&W.y<=X.y}function R(D,k,y,B,e){var Z=1e-10,J=k.x-D.x,G=k.y-D.y,_=B.x-y.x,E=B.y-y.y,x=D.x-y.x,c=D.y-y.y,H=G*_-J*E,r=G*x-J*c;if(Y(H)>Z){var i;if(H>0){if(0>r||r>H)return[];if(i=E*x-_*c,0>i||i>H)return[]}else{if(r>0||H>r)return[];if(i=E*x-_*c,i>0||H>i)return[]}if(0==i)return!e||0!=r&&r!=H?[D]:[];if(i==H)return!e||0!=r&&r!=H?[k]:[];if(0==r)return[y];if(r==H)return[B];var O=i/H;return[{x:D.x+O*J,y:D.y+O*G}]}if(0!=r||E*x!=_*c)return[];var A=0==J&&0==G,V=0==_&&0==E;if(A&&V)return D.x!=y.x||D.y!=y.y?[]:[D];if(A)return w(y,B,D)?[D]:[];if(V)return w(D,k,y)?[y]:[];var U,S,n,N,P,g,s,t;return 0!=J?(D.x<k.x?(U=D,n=D.x,S=k,N=k.x):(U=k,n=k.x,S=D,N=D.x),y.x<B.x?(P=y,s=y.x,g=B,t=B.x):(P=B,s=B.x,g=y,t=y.x)):(D.y<k.y?(U=D,n=D.y,S=k,N=k.y):(U=k,n=k.y,S=D,N=D.y),y.y<B.y?(P=y,s=y.y,g=B,t=B.y):(P=B,s=B.y,g=y,t=y.y)),s>=n?s>N?[]:N==s?e?[]:[P]:t>=N?[P,S]:[P,g]:n>t?[]:n==t?e?[]:[U]:t>=N?[U,S]:[U,g]}function f(z,j,F,U){var e=1e-10,q=j.x-z.x,S=j.y-z.y,p=F.x-z.x,b=F.y-z.y,h=U.x-z.x,v=U.y-z.y,w=q*b-S*p,s=q*v-S*h;if(Y(w)>e){var P=h*b-v*p;return w>0?s>=0&&P>=0:s>=0||P>=0}return s>0}function V(L,m){function p(K,P){var O=y.length-1,F=K-1;0>F&&(F=O);var W=K+1;W>O&&(W=0);var E=f(y[K],y[F],y[W],o[P]);if(!E)return!1;var x=o.length-1,$=P-1;0>$&&($=x);var v=P+1;return v>x&&(v=0),E=f(o[P],o[$],o[v],y[K]),E?!0:!1}function v(f,_){var c,T,N;for(c=0;c<y.length;c++)if(T=c+1,T%=y.length,N=R(f,_,y[c],y[T],!0),N.length>0)return!0;return!1}function r(M,K){var X,e,f,j,i;for(X=0;X<I.length;X++)for(e=m[I[X]],f=0;f<e.length;f++)if(j=f+1,j%=e.length,i=R(M,K,e[f],e[j],!0),i.length>0)return!0;return!1}for(var o,Q,w,T,b,c,i,Z,$,a,h,y=L.concat(),I=[],B=[],z=0,t=m.length;t>z;z++)I.push(z);for(var C=0,W=2*I.length;I.length>0&&(W--,!(0>W));)for(w=C;w<y.length;w++){T=y[w],Q=-1;for(var z=0;z<I.length;z++)if(c=I[z],i=T.x+":"+T.y+":"+c,B[i]===E){o=m[c];for(var P=0;P<o.length;P++)if(b=o[P],p(w,P)&&!v(T,b)&&!r(T,b)){Q=P,I.splice(z,1),Z=y.slice(0,w+1),$=y.slice(w),a=o.slice(Q),h=o.slice(0,Q+1),y=Z.concat(a).concat(h).concat($),C=w;break}if(Q>=0)break;B[i]=!0}if(Q>=0)break}return y}for(var P,A,g,t,o,z,y={},Q=u.concat(),n=0,D=B.length;D>n;n++)Array.prototype.push.apply(Q,B[n]);for(P=0,A=Q.length;A>P;P++)o=Q[P].x+":"+Q[P].y,y[o]!==E,y[o]=P;var H=V(u,B),T=_o.Triangulate(H,!1);for(P=0,A=T.length;A>P;P++)for(t=T[P],g=0;3>g;g++)o=t[g].x+":"+t[g].y,z=y[o],z!==E&&(t[g]=z);return T.concat()},isClockWise:function(N){return _o.Triangulate.area(N)<0},b2p0:function(R,r){var Z=1-R;return Z*Z*r},b2p1:function(E,t){return 2*(1-E)*E*t},b2p2:function(e,u){return e*e*u},b2:function(Z,X,U,Y){return this.b2p0(Z,X)+this.b2p1(Z,U)+this.b2p2(Z,Y)},b3p0:function(a,T){var g=1-a;return g*g*g*T},b3p1:function(f,b){var E=1-f;return 3*E*E*f*b},b3p2:function(k,L){var T=1-k;return 3*T*k*k*L},b3p3:function($,A){return $*$*$*A},b3:function(M,A,w,F,c){return this.b3p0(M,A)+this.b3p1(M,w)+this.b3p2(M,F)+this.b3p3(M,c)}},_o={faces:{},face:"helvetiker",weight:"normal",style:"normal",size:150,divisions:10,getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(M){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(k){var o=k.familyName.toLowerCase(),X=this;return X.faces[o]=X.faces[o]||{},X.faces[o][k.cssFontWeight]=X.faces[o][k.cssFontWeight]||{},X.faces[o][k.cssFontWeight][k.cssFontStyle]=k,X.faces[o][k.cssFontWeight][k.cssFontStyle]=k,k},drawText:function(b){var j,Q=this.getFace(),Y=this.size/Q.resolution,s=0,w=String(b).split(""),r=w.length,t=[];for(j=0;r>j;j++){var N=new Fq,F=this.extractGlyphPoints(w[j],Q,Y,s,N);s+=F.offset,t.push(F.path)}var m=s/2;return{paths:t,offset:m}},extractGlyphPoints:function(s,Q,j,a,u){var t,q,X,V,d,y,L,A,M,Y,G,g,o,N,C,r,b,E,K,n=[],x=Q.glyphs[s]||Q.glyphs["?"];if(x){if(x.o)for(V=x._cachedOutline||(x._cachedOutline=x.o.split(" ")),y=V.length,L=j,A=j,t=0;y>t;)switch(d=V[t++]){case"m":M=V[t++]*L+a,Y=V[t++]*A,u.moveTo(M,Y);break;case"l":M=V[t++]*L+a,Y=V[t++]*A,u.lineTo(M,Y);break;case"q":if(G=V[t++]*L+a,g=V[t++]*A,C=V[t++]*L+a,r=V[t++]*A,u.quadraticCurveTo(C,r,G,g),K=n[n.length-1])for(o=K.x,N=K.y,q=1,X=this.divisions;X>=q;q++){var Z=q/X;lg.b2(Z,o,C,G),lg.b2(Z,N,r,g)}break;case"b":if(G=V[t++]*L+a,g=V[t++]*A,C=V[t++]*L+a,r=V[t++]*A,b=V[t++]*L+a,E=V[t++]*A,u.bezierCurveTo(C,r,b,E,G,g),K=n[n.length-1])for(o=K.x,N=K.y,q=1,X=this.divisions;X>=q;q++){var Z=q/X;lg.b3(Z,o,C,b,G),lg.b3(Z,N,r,E,g)}}return{offset:x.ha*j,path:u}}}};_o.generateShapes=function(u,c){c=c||{};var k=c.size!==E?c.size:100,L=c.curveSegments!==E?c.curveSegments:4,M=c.font!==E?c.font:"helvetiker",b=c.weight!==E?c.weight:"normal",K=c.style!==E?c.style:"normal";_o.size=k,_o.divisions=L,_o.face=M,_o.weight=b,_o.style=K;for(var s=_o.drawText(u),Q=s.paths,d=[],h=0,e=Q.length;e>h;h++)Array.prototype.push.apply(d,Q[h].toShapes());return d},function(F){var h=1e-10,v=function(S,s){var T=S.length;if(3>T)return null;var y,x,b,W=[],U=[],e=[];if(p(S)>0)for(x=0;T>x;x++)U[x]=x;else for(x=0;T>x;x++)U[x]=T-1-x;var o=T,Z=2*o;for(x=o-1;o>2;){if(Z--<=0)return s?e:W;if(y=x,y>=o&&(y=0),x=y+1,x>=o&&(x=0),b=x+1,b>=o&&(b=0),q(S,y,x,b,o,U)){var v,l,j,P,L;for(v=U[y],l=U[x],j=U[b],W.push([S[v],S[l],S[j]]),e.push([U[y],U[x],U[b]]),P=x,L=x+1;o>L;P++,L++)U[P]=U[L];o--,Z=2*o}}return s?e:W},p=function(i){for(var O=i.length,y=0,u=O-1,t=0;O>t;u=t++)y+=i[u].x*i[t].y-i[t].x*i[u].y;return.5*y},q=function(p,R,c,N,d,X){var s,I,k,F,y,j,S,f,H;if(I=p[X[R]].x,k=p[X[R]].y,F=p[X[c]].x,y=p[X[c]].y,j=p[X[N]].x,S=p[X[N]].y,h>(F-I)*(S-k)-(y-k)*(j-I))return!1;var z,Z,Q,r,_,i,e,m,K,P,n,a,J,L,U;for(z=j-F,Z=S-y,Q=I-j,r=k-S,_=F-I,i=y-k,s=0;d>s;s++)if(f=p[X[s]].x,H=p[X[s]].y,!(f===I&&H===k||f===F&&H===y||f===j&&H===S)&&(e=f-I,m=H-k,K=f-F,P=H-y,n=f-j,a=H-S,U=z*P-Z*K,J=_*m-i*e,L=Q*a-r*n,U>=-h&&L>=-h&&J>=-h))return!1;return!0};return F.Triangulate=v,F.Triangulate.area=p,F}(_o),F._typeface_js={faces:_o.faces,loadFace:_o.loadFace};var xe=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},ck=xe.prototype={constructor:xe,computeFaceNormals:function(){for(var y=new Vr,H=new Vr,o=0,g=this.faces.length;g>o;o++){var R=this.faces[o],P=this.vertices[R.a],v=this.vertices[R.b],r=this.vertices[R.c];y.subVectors(r,v),H.subVectors(P,v),y.cross(H),y.normalize(),R.normal.copy(y)}},computeVertexNormals:function(I){var m,a,F,c,w,P;for(P=new Array(this.vertices.length),m=0,a=this.vertices.length;a>m;m++)P[m]=new Vr;if(I){var M,z,e,d=new Vr,j=new Vr;for(F=0,c=this.faces.length;c>F;F++)w=this.faces[F],M=this.vertices[w.a],z=this.vertices[w.b],e=this.vertices[w.c],d.subVectors(e,z),j.subVectors(M,z),d.cross(j),P[w.a].add(d),P[w.b].add(d),P[w.c].add(d)}else for(F=0,c=this.faces.length;c>F;F++)w=this.faces[F],P[w.a].add(w.normal),P[w.b].add(w.normal),P[w.c].add(w.normal);for(m=0,a=this.vertices.length;a>m;m++)P[m].normalize();for(F=0,c=this.faces.length;c>F;F++)w=this.faces[F],w.vertexNormals[0]=P[w.a].clone(),w.vertexNormals[1]=P[w.b].clone(),w.vertexNormals[2]=P[w.c].clone()},mergeVertices:function(){var d,C,Z,D,m,g,W,a,B={},f=[],H=[],s=4,v=y(10,s);for(Z=0,D=this.vertices.length;D>Z;Z++)d=this.vertices[Z],C=G(d.x*v)+"_"+G(d.y*v)+"_"+G(d.z*v),B[C]===E?(B[C]=Z,f.push(this.vertices[Z]),H[Z]=f.length-1):H[Z]=H[B[C]];var L=[];for(Z=0,D=this.faces.length;D>Z;Z++){m=this.faces[Z],m.a=H[m.a],m.b=H[m.b],m.c=H[m.c],g=[m.a,m.b,m.c];for(var x=0;3>x;x++)if(g[x]==g[(x+1)%3]){L.push(Z);break}}for(Z=L.length-1;Z>=0;Z--){var p=L[Z];for(this.faces.splice(p,1),W=0,a=this.faceVertexUvs.length;a>W;W++)this.faceVertexUvs[W].splice(p,1)}var r=this.vertices.length-f.length;return this.vertices=f,r}},Yq=function(r,U,Y,S,e,W,s){this.aX=r,this.aY=U,this.xRadius=Y,this.yRadius=S,this.aStartAngle=e,this.aEndAngle=W,this.aClockwise=s};Yq.prototype=Er(ap),Yq.prototype.getPoint=function(K){var Z,O=this.aEndAngle-this.aStartAngle;0>O&&(O+=X),O>X&&(O-=X),Z=this.aClockwise===!0?this.aEndAngle+(1-K)*(X-O):this.aStartAngle+K*O;var t=this.aX+this.xRadius*V(Z),M=this.aY+this.yRadius*l(Z);return new Ld(t,M)};var ir=function(U,p){this.v1=U,this.v2=p},nh=ir.prototype=Er(ap);nh.getPoint=function(a){var R=this.v2.clone().sub(this.v1);return R.multiplyScalar(a).add(this.v1),R},nh.getPointAt=function(H){return this.getPoint(H)},nh.getTangent=function(){var o=this.v2.clone().sub(this.v1);return o.normalize()};var xk=function(M,Q,G){this.v0=M,this.v1=Q,this.v2=G};xk.prototype=Er(ap),xk.prototype.getPoint=function(B){var g,Z;return g=lg.b2(B,this.v0.x,this.v1.x,this.v2.x),Z=lg.b2(B,this.v0.y,this.v1.y,this.v2.y),new Ld(g,Z)};var An=function(L,u,y,m){this.v0=L,this.v1=u,this.v2=y,this.v3=m};An.prototype=Er(ap),An.prototype.getPoint=function(q){var u,c;return u=lg.b3(q,this.v0.x,this.v1.x,this.v2.x,this.v3.x),c=lg.b3(q,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new Ld(u,c)},uh.create(function(f,q){this.v1=f,this.v2=q},function(L){var d=new Vr;return d.subVectors(this.v2,this.v1),d.multiplyScalar(L),d.add(this.v1),d});var xc=uh.create(function(W,o,K){this.v0=W,this.v1=o,this.v2=K},function(D){var d,F,h;return d=lg.b2(D,this.v0.x,this.v1.x,this.v2.x),F=lg.b2(D,this.v0.y,this.v1.y,this.v2.y),h=lg.b2(D,this.v0.z,this.v1.z,this.v2.z),new Vr(d,F,h)}),qo=uh.create(function(m,F,r,e){this.v0=m,this.v1=F,this.v2=r,this.v3=e},function(K){var y,m,c;return y=lg.b3(K,this.v0.x,this.v1.x,this.v2.x,this.v3.x),m=lg.b3(K,this.v0.y,this.v1.y,this.v2.y,this.v3.y),c=lg.b3(K,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new Vr(y,m,c)}),ao=function(O,h,U,o,R,S,f,P){xe.call(this),o=o!==E?o:.5,R=R!==E?R:.5,P=P!==E?P:1,O=O||8,S=S||0,f=f||X;var C,b,k=1,g=P/2,A=[],T=[],Q=this.vertices,s=this.faces,M=this.faceVertexUvs;for(b=0;k>=b;b++){var d=[],x=[],r=b/k,H=r*(R-o)+o;for(C=0;O>=C;C++){var Z=C/O,D=new Vr,J=-(Z*f+S);D.z=H*l(J),D.y=-r*P+g,D.x=H*V(J),Q.push(D),d.push(Q.length-1),x.push(new Ld(Z,r))}A.push(d),T.push(x)}var W,y,j=(R-o)/P;for(C=0;O>C;C++)for(0!==o?(W=Q[A[0][C]].clone(),y=Q[A[0][C+1]].clone()):(W=Q[A[1][C]].clone(),y=Q[A[1][C+1]].clone()),W.setY(n(W.x*W.x+W.z*W.z)*j).normalize(),y.setY(n(y.x*y.x+y.z*y.z)*j).normalize(),b=0;k>b;b++){var B=A[b][C],$=A[b+1][C],v=A[b+1][C+1],_=A[b][C+1],K=W.clone(),c=W.clone(),z=y.clone(),w=y.clone(),q=T[b][C].clone(),L=T[b+1][C].clone(),G=T[b+1][C+1].clone(),N=T[b][C+1].clone();s.push(new Oi(B,$,_,[K,c,w])),M[0].push([q,L,N]),s.push(new Oi($,v,_,[c.clone(),z,w.clone()])),M[0].push([L.clone(),G,N.clone()])}if(h&&o>0)for(this.vertices.push(new Vr(0,g,0)),C=0;O>C;C++){var B=A[0][C],$=A[0][C+1],v=this.vertices.length-1,K=new Vr(0,1,0),c=new Vr(0,1,0),z=new Vr(0,1,0),q=T[0][C].clone(),L=T[0][C+1].clone(),G=new Ld(L.x,0);s.push(new Oi(B,$,v,[K,c,z],null,1));var i=C/O*X,m=V(i),e=l(i),Y=(C+1)/O*X,u=V(Y),t=l(Y);M[0].push([new Ld(.5+.5*m,.5+.5*e),new Ld(.5+.5*u,.5+.5*t),new Ld(.5,.5)])}if(U&&R>0)for(this.vertices.push(new Vr(0,-g,0)),C=0;O>C;C++){var B=A[b][C+1],$=A[b][C],v=Q.length-1,K=new Vr(0,-1,0),c=new Vr(0,-1,0),z=new Vr(0,-1,0),q=T[b][C+1].clone(),L=T[b][C].clone();s.push(new Oi(B,$,v,[K,c,z],null,2));var i=C/O*X,m=V(i),e=l(i),Y=(C+1)/O*X,u=V(Y),t=l(Y);M[0].push([new Ld(.5+.5*u,.5-.5*t),new Ld(.5+.5*m,.5-.5*e),new Ld(.5,.5)])}};ao.prototype=Er(ck);var Qg=function(d,G,J,o,h,K,C){xe.call(this),C=C||.5,d=d||16,G=G||16,J=(J!==E?J:0)-s,o=o!==E?o:X,h=h!==E?h:0,K=K!==E?K:s;var y,q,m=[],c=[],B=this.vertices,W=this.faces,I=this.faceVertexUvs;for(q=0;G>=q;q++){var j=[],T=[];for(y=0;d>=y;y++){var r=y/d,u=q/G,k=new Vr;k.x=-C*V(J+r*o)*l(h+u*K),k.y=C*V(h+u*K),k.z=C*l(J+r*o)*l(h+u*K),B.push(k),j.push(B.length-1),T.push(new Ld(r,u))}m.push(j),c.push(T)}for(q=0;G>q;q++)for(y=0;d>y;y++){var M=m[q][y+1],P=m[q][y],L=m[q+1][y],H=m[q+1][y+1],Q=B[M].clone().normalize(),p=B[P].clone().normalize(),w=B[L].clone().normalize(),z=B[H].clone().normalize(),a=c[q][y+1].clone(),A=c[q][y].clone(),Z=c[q+1][y].clone(),i=c[q+1][y+1].clone();Y(B[M].y)===C?(a.x=(a.x+A.x)/2,W.push(new Oi(M,L,H,[Q,w,z])),I[0].push([a,Z,i])):Y(B[L].y)===C?(Z.x=(Z.x+i.x)/2,W.push(new Oi(M,P,L,[Q,p,w])),I[0].push([a,A,Z])):(W.push(new Oi(M,P,H,[Q,p,z])),I[0].push([a,A,i]),W.push(new Oi(P,L,H,[p.clone(),w,z.clone()])),I[0].push([A.clone(),Z,i.clone()]))}};Qg.prototype=Er(ck);var Nl=function(F,B,d,A,v,t){xe.call(this),F=F||.33,B=B||.17,A=A||8,d=d||6,v=v||0,t=t||X;for(var C=new Vr,Y=[],i=[],Q=0;A>=Q;Q++)for(var j=Q/A*X+s,z=0;d>=z;z++){var p=z/d*t+v;C.x=F*V(p),C.z=-F*l(p);var D=new Vr,W=F+B*V(j);D.x=W*V(p),D.z=-W*l(p),D.y=B*l(j),this.vertices.push(D),Y.push(new Ld(z/d,1-Q/A)),i.push(D.clone().sub(C).normalize())}for(var Q=1;A>=Q;Q++)for(var z=1;d>=z;z++){var e=(d+1)*Q+z-1,q=(d+1)*(Q-1)+z-1,Z=(d+1)*(Q-1)+z,o=(d+1)*Q+z,H=new Oi(e,q,o,[i[e].clone(),i[q].clone(),i[o].clone()]);this.faces.push(H),this.faceVertexUvs[0].push([Y[e].clone(),Y[q].clone(),Y[o].clone()]),H=new Oi(q,Z,o,[i[q].clone(),i[Z].clone(),i[o].clone()]),this.faces.push(H),this.faceVertexUvs[0].push([Y[q].clone(),Y[Z].clone(),Y[o].clone()])}this.computeFaceNormals()};Nl.prototype=Er(ck);var yq=function(G,f,N){return G?(xe.call(this),G=G instanceof Array?G:[G],this.addShapeList(G,f),$e(this,N),this.computeFaceNormals(),void 0):(G=[],void 0)},fg=yq.prototype=Er(xe.prototype);fg.addShapeList=function(q,p){for(var E=q.length,Q=0;E>Q;Q++){var n=q[Q];this.addShape(n,p)}},fg.addShape=function(u,X){function o(){if(X.bottom)for(var b=0;W>b;b++)T=M[b],w(T[2],T[1],T[0],!0);if(X.top)for(b=0;W>b;b++)T=M[b],w(T[0]+B*N,T[1]+B*N,T[2]+B*N,!1)}function Y(){var A=0;for(n(U,A),A+=U.length,$=0,m=p.length;m>$;$++)j=p[$],n(j,A),A+=j.length}function n(h,w){for(var y,J,U=h.length;--U>=0;){y=U,J=U-1,0>J&&(J=h.length-1);var b=0,z=N;for(b=0;z>b;b++){var K=B*b,V=B*(b+1),x=w+y+K,s=w+J+K,c=w+J+V,v=w+y+V;C(x,s,c,v,h,b,z,y,J)}}}function L(u,L,O){k.vertices.push(new Vr(u,L,O))}function w(P,V,_,i){P+=F,V+=F,_+=F,k.faces.push(new Oi(P,V,_,null,null,i?2:1));var N=i?I.generateBottomUV(k,u,X,P,V,_):I.generateTopUV(k,u,X,P,V,_);k.faceVertexUvs[0].push(N)}function C(c,z,y,L,x,B,b,K,Z){c+=F,z+=F,y+=F,L+=F,k.faces.push(new Oi(c,z,L)),k.faces.push(new Oi(z,y,L));var h=I.generateSideWallUV(k,u,x,X,c,z,y,L,B,b,K,Z);k.faceVertexUvs[0].push([h[0],h[1],h[3]]),k.faceVertexUvs[0].push([h[1],h[2],h[3]])}var b,V,l,K,c,O=X.amount,H=X.curveSegments||Th,N=X.steps||1,D=X.extrudePath,h=!1,I=new Ve(X.repeatUVLength);D&&(b=D.getSpacedPoints(N),h=!0,V=X.frames!==E?X.frames:new ol.FrenetFrames(D,N,!1),l=new Vr,K=new Vr,c=new Vr);var j,$,m,k=this,F=this.vertices.length,z=u.extractPoints(H),S=z.shape,p=z.holes,g=!lg.isClockWise(S);if(g){for(S=S.reverse(),$=0,m=p.length;m>$;$++)j=p[$],lg.isClockWise(j)&&(p[$]=j.reverse());g=!1}var M=lg.triangulateShape(S,p),U=S;for($=0,m=p.length;m>$;$++)j=p[$],S=S.concat(j);for(var Z,T,B=S.length,W=M.length,i=0;B>i;i++)Z=S[i],h?(K.copy(V.normals[0]).multiplyScalar(Z.x),l.copy(V.binormals[0]).multiplyScalar(Z.y),c.copy(b[0]).add(K).add(l),L(c.x,c.y,c.z)):L(Z.x,Z.y,0);var s;for(s=1;N>=s;s++)for(i=0;B>i;i++)Z=S[i],h?(K.copy(V.normals[s]).multiplyScalar(Z.x),l.copy(V.binormals[s]).multiplyScalar(Z.y),c.copy(b[s]).add(K).add(l),L(c.x,c.y,c.z)):L(Z.x,Z.y,O/N*s);o(),Y()};var ol=function(L,h,y,j,W){function U(E,F,v){return K.vertices.push(new Vr(E,F,v))-1}xe.call(this),h=h||64,y=y||1,j=j||8,W=W||!1;var Q,E,f,A,q,n,t,d,I,N,x,k,m,o,p,$,O,w,v,S,g=[],K=this,M=h+1,F=new Vr,s=new ol.FrenetFrames(L,h,W),b=s.tangents,z=s.normals,C=s.binormals;for(this.tangents=b,this.normals=z,this.binormals=C,I=0;M>I;I++)for(g[I]=[],A=I/(M-1),d=L.getPointAt(A),Q=b[I],E=z[I],f=C[I],N=0;j>N;N++)q=N/j*X,n=-y*V(q),t=y*l(q),F.copy(d),F.x+=n*E.x+t*f.x,F.y+=n*E.y+t*f.y,F.z+=n*E.z+t*f.z,g[I][N]=U(F.x,F.y,F.z);for(I=0;h>I;I++)for(N=0;j>N;N++)x=W?(I+1)%h:I+1,k=(N+1)%j,m=g[I][N],o=g[x][N],p=g[x][k],$=g[I][k],O=new Ld(I/h,N/j),w=new Ld((I+1)/h,N/j),v=new Ld((I+1)/h,(N+1)/j),S=new Ld(I/h,(N+1)/j),this.faces.push(new Oi(m,o,$)),this.faceVertexUvs[0].push([O,w,S]),this.faces.push(new Oi(o,p,$)),this.faceVertexUvs[0].push([w.clone(),v,S.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};ol.prototype=Er(ck),ol.FrenetFrames=function(x,f,I){function O(){A[0]=new Vr,m[0]=new Vr,t=Number.MAX_VALUE,b=Y(C[0].x),U=Y(C[0].y),a=Y(C[0].z),t>=b&&(t=b,V.set(1,0,0)),t>=U&&(t=U,V.set(0,1,0)),t>=a&&V.set(0,0,1),Z.crossVectors(C[0],V).normalize(),A[0].crossVectors(C[0],Z),m[0].crossVectors(C[0],A[0])}var g,t,b,U,a,r,o,V=new Vr,C=[],A=[],m=[],Z=new Vr,M=new aj,s=f+1,N=1e-4;for(this.tangents=C,this.normals=A,this.binormals=m,r=0;s>r;r++)o=r/(s-1),C[r]=x.getTangentAt(o),C[r].normalize();for(O(),r=1;s>r;r++)A[r]=A[r-1].clone(),m[r]=m[r-1].clone(),Z.crossVectors(C[r-1],C[r]),Z.length()>N&&(Z.normalize(),g=u(gq(C[r-1].dot(C[r]),-1,1)),A[r].applyMatrix4(M.makeRotationAxis(Z,g))),m[r].crossVectors(C[r],A[r]);if(I)for(g=u(gq(A[0].dot(A[s-1]),-1,1)),g/=s-1,C[0].dot(Z.crossVectors(A[0],A[s-1]))>0&&(g=-g),r=1;s>r;r++)A[r].applyMatrix4(M.makeRotationAxis(C[r],g*r)),m[r].crossVectors(C[r],A[r])};var yh=function(u,_,e,Q){xe.call(this),_=_||18,e=e||0,Q=Q==m?X:Q;for(var f=1/(u.length-1),L=1/_,d=0,v=_;v>=d;d++)for(var q=e+d*L*Q,r=V(q),x=l(q),I=0,J=u.length;J>I;I++){var T=u[I],E=new Vr;E.x=r*T.x-x*T.y,E.y=x*T.x+r*T.y,E.z=T.z,this.vertices.push(E)}for(var W=u.length,d=0,v=_;v>d;d++)for(var I=0,J=u.length-1;J>I;I++){var i=I+W*d,s=i,F=i+W,r=i+1+W,O=i+1,c=d*L,p=I*f,P=c+L,G=p+f;this.faces.push(new Oi(s,O,F)),this.faceVertexUvs[0].push([new Ld(c,p),new Ld(c,G),new Ld(P,p)]),this.faces.push(new Oi(F,O,r)),this.faceVertexUvs[0].push([new Ld(P,p),new Ld(c,G),new Ld(P,G)])}this.mergeVertices(),$e(this),this.computeFaceNormals(),this.computeVertexNormals()};yh.prototype=Er(ck);var ji=function(a,H){H=H||{};var z=_o.generateShapes(a,H);H.amount=H.height!==E?H.height:50,yq.call(this,z,H)};ji.prototype=Er(fg);var fc=I.Node=function(){kd(fc,this)},Qe={X:ng,Y:nb,Z:am},Xm={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},ok="xzy",lp=function(C,V,m){if(V){var i=V[0],a=V[1],Z=V[2];"xzy"===m?(nb(C,a),am(C,Z),ng(C,i)):"xyz"===m?(am(C,Z),nb(C,a),ng(C,i)):"yxz"===m?(am(C,Z),ng(C,i),nb(C,a)):"yzx"===m?(ng(C,i),am(C,Z),nb(C,a)):"zxy"===m?(nb(C,a),ng(C,i),am(C,Z)):"zyx"===m?(ng(C,i),nb(C,a),am(C,Z)):(nb(C,a),am(C,Z),ng(C,i))}};ms("Node",sj,{ms_ac:["rotationMode","tall"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:ok,_64O:0,_rotationX:0,_53O:0,_host:m,_position:{x:0,y:0},_tall:20,_54O:0,getUIClass:function(){return pc},_22Q:function(){return Ok},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(s,N){Nf(s,wq(m,m,this.r3(),this.getRotationMode())),this.translate3d(s[0]*N,s[1]*N,s[2]*N)},translateFront:function(k){this.translate3dBy([0,0,1],k)},translateBack:function(R){this.translate3dBy([0,0,-1],R)},translateLeft:function(F){this.translate3dBy([-1,0,0],F)},translateRight:function(n){this.translate3dBy([1,0,0],n)},translateTop:function(W){this.translate3dBy([0,1,0],W)},translateBottom:function(T){this.translate3dBy([0,-1,0],T)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(l,L,C){1===arguments.length&&(L=l[1],C=l[2],l=l[0]),this.p(l,C),this.setElevation(L)},translate3d:function(G,I,g){1===arguments.length&&(I=G[1],g=G[2],G=G[0]),this.translate(G,g),this.setElevation(this._54O+I)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(h,L,R){1===arguments.length&&(L=h[1],R=h[2],h=h[0]),this.setSize(h,R),this.setTall(L)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(_,R,r){1===arguments.length&&(R=_[1],r=_[2],_=_[0]),this.setRotationX(_),this.setRotation(-R),this.setRotationZ(r)},setRotationY:function(E){this.setRotation(-E)},getRotationY:function(){return-this._64O},lookAt:function(z,p){p=p||a;var Z=this,m=qd(z,Z.p3()),w=Dj(m);p===a?(Z.r3([-Q(m[1]/w),-P(m[2],m[0])+v,0]),Z.setRotationMode("xzy")):p===O?(Z.r3(0,-P(m[2],m[0]),Q(m[1]/w)),Z.setRotationMode("zyx")):p===j?(Z.r3(0,-P(m[2],m[0])+s,-Q(m[1]/w)),Z.setRotationMode("zyx")):p===Jg?(Z.r3([-Q(m[1]/w)+v,-P(m[2],m[0])+v,0]),Z.setRotationMode("xzy")):p===He&&(Z.r3([-Q(m[1]/w)-v,-P(m[2],m[0])+v,0]),Z.setRotationMode("xzy")),p===B&&(Z.r3([-Q(m[1]/w)+s,-P(m[2],m[0])+v,s]),Z.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(D){var k=this;if(k!==D&&k._host!==D){var I=k._host;I&&I._removeAttach(k),k._host=D,k._host&&k._host._addAttach(k),k.fp("host",I,D),k.onHostChanged(I,D)}},getAttaches:function(){return this._69O},_addAttach:function(t){var B=this;
B._69O||(B._69O=new om),B._69O.add(t),B.fp("attaches",m,t)},_removeAttach:function(r){var y=this;y._69O.remove(r),y._69O.isEmpty()&&delete y._69O,y.fp("attaches",r,m)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(T){var W=this;W._44I||(W._44I=new om),W._42I||(W._42I=new om),W._44I.add(T),W._42I.add(T),W._20I()},_4I:function(J){var s=this;s._44I||(s._44I=new om),s._43I||(s._43I=new om),s._44I.add(J),s._43I.add(J),s._20I()},_16I:function(f){var U=this;U._44I.remove(f),U._42I.remove(f),U._44I.isEmpty()&&delete U._44I,U._42I.isEmpty()&&delete U._42I,U._20I()},_18I:function(Y){var s=this;s._44I.remove(Y),s._43I.remove(Y),s._44I.isEmpty()&&delete s._44I,s._43I.isEmpty()&&delete s._43I,s._20I()},_20I:function(){var O=this;if(delete O._45I,!O._44I||O._44I.isEmpty())return delete O._70O,void 0;var M;O._44I.each(function(F){F.isLooped()&&(M||(M={}),M[F._id]||(O._45I||(O._45I=new om),O._45I.add(F),M[F._id]=F))}),M?(O._70O=new om,O._44I.each(function(X){M[X._id]?"A"===M[X._id]||(M[X._id]="A",O._70O.add(X)):O._70O.add(X)})):O._70O=O._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(X){var x=this;x._46I||(x._46I=new om),x._48I||(x._48I=new om),x._46I.add(X),x._48I.add(X),x._19I()},_3I:function(n){var u=this;u._47I||(u._47I=new om),u._48I||(u._48I=new om),u._47I.add(n),u._48I.add(n),u._19I()},_15I:function(m){var f=this;f._46I.remove(m),f._48I.remove(m),f._46I.isEmpty()&&delete f._46I,f._48I.isEmpty()&&delete f._48I,f._19I()},_17I:function(G){var C=this;C._47I.remove(G),C._48I.remove(G),C._47I.isEmpty()&&delete C._47I,C._48I.isEmpty()&&delete C._48I,C._19I()},_19I:function(){var x=this;delete x._49I;var l=x._48I;if(l&&!l.isEmpty()){var r={};l.each(function(D){r[D._id]?x._49I||(x._49I=new om):r[D._id]=D}),x._49I?l.each(function(N){r[N._id]&&(x._49I.add(N),delete r[N._id])}):x._49I=l}},getImage:function(){return this._image},setImage:function(p){var s=this,M=s._image,N=s.getWidth(),u=s.getHeight();s._image=p,s.fp("image",M,p),s.fp(Lk,N,s.getWidth()),s.fp(Om,u,s.getHeight())},getElevation:function(){return this._54O},setElevation:function(b){var D=this;if(!D._50O){D._50O=1;var k=D._54O;D._54O=b,D.fp(Pr,k,b),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(c){var d=this;if(!d._49O){d._49O=1;var L=d._64O;d._64O=c,d.fp(Br,L,c),delete d._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(e){var N=this;if(!N._51O){N._51O=1;var D=N._rotationX;N._rotationX=e,N.fp("rotationX",D,e),delete N._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(S){var k=this;if(!k._52O){k._52O=1;var Q=k._53O;k._53O=S,k.fp("rotationZ",Q,S),delete k._52O}},getPosition:function(){return this._position},setPosition:function(j,W){var s=this;if(!s._50I){s._50I=1;var D;if(D=2===arguments.length?{x:j,y:W}:j,D.x!==s._position.x||D.y!==s._position.y){var f=s._position;s._position=D,s.fp(Nj,f,D)}delete s._50I}},translate:function(n,p){var y=this._position;this.p(y.x+n,y.y+p)},getWidth:function(){var I=this;if(I._width>=0)return I._width;var k=Em(I._image);return k?bp(k,I):20},setWidth:function(N){var G=this,h=G._width;G._width=N,G.fp(Lk,h,N)},getHeight:function(){var P=this;if(P._height>=0)return P._height;var h=Em(P._image);return h?Fd(h,P):20},setHeight:function(c){var W=this,e=W._height;W._height=c,W.fp(Om,e,c)},setSize:function(x,K){var y=this;2===arguments.length?(y.setWidth(x),y.setHeight(K)):(y.setWidth(x.width),y.setHeight(x.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(e,m,x,u){var b=this;1===arguments.length?(b.p(e.x+e.width/2,e.y+e.height/2),b.setWidth(e.width),b.setHeight(e.height)):(b.p(e+x/2,m+u/2),b.setWidth(x),b.setHeight(u))},getRect:function(){var R=this,D=R.getWidth(),d=R.getHeight();return jh({x:R._position.x-D/2,y:R._position.y-d/2,width:D,height:d},R._64O)},getCorners:function(D,g){D==m&&(D=0),g==m&&(g=D);var L=this,o=L._position,k=L.getWidth()/2+D,U=L.getHeight()/2+g,R=new tg(L._64O,o.x,o.y);return[R.tf(-k,-U),R.tf(k,-U),R.tf(k,U),R.tf(-k,U)]},rotateAt:function(p,E,S){var g=this,M=g._position,Y=g._64O,T=new tg(Y,M.x,M.y).tf(p,E),R=n(p*p+E*E),w=P(M.y-T.y,M.x-T.x)+S;g.setRotation(Y+S),g.p(T.x+R*V(w),T.y+R*l(w))},onParentChanged:function(){fc.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(E){E._7I()})},onPropertyChanged:function(h){var s=this;fc.superClass.onPropertyChanged.call(s,h),s._69O&&s._69O.each(function(d){d.handleHostPropertyChange(h)}),s._49I&&s._49I.each(function(Y){Y.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(p){this.updateAttach(p)},onStyleChanged:function(c){fc.superClass.onStyleChanged.apply(this,arguments),vl[c]&&this.updateAttach()},updateAttach:function(y){var U=this;U._51I||iq||(U._51I=1,U._71O(y),delete U._51I)},_71O:function(N){var t,J,a,q,W,s,G=this,C=G._host,L=N?N.property:m,M=N?N.oldValue:m,H=N?N.newValue:m;if(C instanceof Ur){if(L===Pr)G.setElevation(G._54O+H-M);else if(!N||Wo[L]){if(t=G.s("attach.row.index"),J=G.s("attach.column.index"),a=C.getCellRect(t,J),!a)return;q=G.s("attach.row.span"),W=G.s("attach.column.span"),(1!==q||1!==W)&&(a=ml(a,C.getCellRect(t+q-1,J+W-1))),Jm(a,G,"attach.padding",1),G.setRect(a)}}else if(C instanceof yr&&(s=G.s("attach.index"))>=0&&(!N||$l[L])){var w=G.s("attach.thickness");w!=m&&G.setHeight(C.getThickness()*w);var Z=G.s("attach.offset"),n=C.getPoints(),F=n.size();if(F>s){var R=n.get(s),S=F===s+1?n.get(0):n.get(s+1),v=[S.x-R.x,S.y-R.y],U=Dj(v);if(U){G.s("attach.offset.relative")&&(Z*=U),G.s("attach.offset.opposite")&&(Z=U-Z);var T={x:R.x+v[0]/U*Z,y:R.y+v[1]/U*Z},x=G.s("attach.gap");x&&(G.s("attach.gap.relative")&&(x*=C.getThickness()),T=ke(m,T,S,x)),G.p(T),G.setRotation(P(v[1],v[0]))}}}else N&&(L===Nj?G.translate(H.x-M.x,H.y-M.y):L===Pr?G.setElevation(G._54O+H-M):Bj[L]&&G._11Q(C,L,H-M))},_11Q:function(i,L,A){var B=this,X=i.p3(),k=qd(B.p3(),X),M=mf(),x=Xm[B.getRotationMode()],v=x[0],m=x[1],a=x[2],q=Qe[v],Q=Qe[m],S=Qe[a];L===Br&&(L="rotationY",A=-A),L===Br+v?(S(M,i[ue+a]()),Q(M,i[ue+m]()),q(M,A),Q(M,-i[ue+m]()),S(M,-i[ue+a]()),B[th+v](B[ue+v]()+A)):L===Br+m?(S(M,i[ue+a]()),Q(M,A),S(M,-i[ue+a]()),B[th+m](B[ue+m]()+A)):L===Br+a&&(S(M,A),B[th+a](B[ue+a]()+A)),Nf(k,M),B.p3(X[0]+k[0],X[1]+k[1],X[2]+k[2])},isHostOn:function(M){var j=this;if(j._host&&M&&M._69O)for(var G={},y=j._host;y&&y!==j&&!G[y._id];){if(y===M)return!0;G[y._id]=y,y=y._host}return!1},isLoopedHostOn:function(T){return this.isHostOn(T)&&T.isHostOn(this)},getSerializableProperties:function(){var i=fc.superClass.getSerializableProperties.call(this);return cg(i,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,width:1,height:1,tall:1,elevation:1}),i}});var Kk=I.Edge=function(X,u){var Y=this;kd(Kk,Y),Y.setSource(X),Y.setTarget(u)};ms("Edge",sj,{_icon:"edge_icon",getUIClass:function(){return Hp},_22Q:function(){return Jo},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(q){var w=this;if(w._source!==q){var $=w._source;w._source=q,$&&$._16I(w),q&&q._2I(w),w._7I(),w.fp("source",$,q)}},setTarget:function(J){var o=this;if(o._target!==J){var O=o._target;o._target=J,O&&O._18I(o),J&&J._4I(o),o._7I(),o.fp("target",O,J)}},isLooped:function(){var h=this;return h._source===h._target&&!!h._source&&!!h._target},_7I:function(){var M,t=this,k=lq(t);t._40I!==k&&(M=this._40I,M&&M._15I(t),t._40I=k,k&&k._1I(t),t.fp("sourceAgent",M,k),Fj(M,t._41I),Fj(k,t._41I));var u=Vo(t);t._41I!==u&&(M=t._41I,M&&M._17I(t),t._41I=u,u&&u._3I(t),t.fp("targetAgent",M,u),Fj(M,t._40I),Fj(u,t._40I))},_22I:function(U){this._52I=U,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var o=this;return o._52I&&o._52I.get(0)!==o&&!o.getStyle(be)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var P=this,$=P._52I;return $&&!P.getStyle(be)&&$.size()>1&&P===$.get(0)},toggle:function(){var G=this._52I,E=!this.s(be);G&&G.size()>1&&(G.each(function(M){M.s(be,E)}),G.getSiblings().each(function(w){w!==G&&w.each(function(I){I.fp("edgeGroup",m,w)})}))},setStyle:function(j,N){(j===Hf||"edge.segments"===j)&&(N=Oj(N)),Kk.superClass.setStyle.call(this,j,N)},onStyleChanged:function(f){Kk.superClass.onStyleChanged.apply(this,arguments),ud[f]&&Fj(this._41I,this._40I)},getSerializableProperties:function(){var k=Kk.superClass.getSerializableProperties.call(this);return cg(k,{source:1,target:1}),k}});var Jj=I.Group=function(){kd(Jj,this)};ms("Group",fc,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return dk},onChildAdded:function(){Jj.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){Jj.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var u=this;if(!u._54I&&!iq){var j=u.getChildrenRect();j&&(u._53I=1,u.p(Or(u.s("group.position"),j,u.getSize())),delete u._53I)}},getChildrenRect:function(){var P,v=this;return v.eachChild(function(O){P=ml(P,v.getChildRect(O))}),P},getChildRect:function(W){var V;return qh(W)&&W.s(kj)&&(Mh(W)&&W.isExpanded()&&W.eachChild(function(x){V=ml(V,W.getChildRect(x))}),!V&&W.getRect&&(V=W.getRect())),V},setPosition:function($,i){var D=this;if(!D._54I){var n;n=2===arguments.length?{x:$,y:i}:$,iq||D._53I||(D._54I=1,oe(D._children,n.x-D._position.x,n.y-D._position.y),delete D._54I),Jj.superClass.setPosition.call(this,n)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(n){var W=this;if(W._57O!==n){var h=W._57O;W._57O=n,W.fp("expanded",h,W._57O),W._8I()}},_8I:function(){Jj.superClass._8I.call(this),this.eachChild(function(F){qh(F)&&F._8I()})},onStyleChanged:function(w){Jj.superClass.onStyleChanged.apply(this,arguments),"group.position"===w&&this._81I()},getSerializableProperties:function(){var Z=Jj.superClass.getSerializableProperties.call(this);return Z.expanded=1,Z}});var Ur=I.Grid=function(){kd(Ur,this)};ms("Grid",fc,{IRotatable:!1,_icon:"grid_icon",_image:m,getUIClass:function(){return Sj},setRotation:function(){},getCellRect:function(r,H){var s=this,D=s.s("grid.row.count"),X=s.s("grid.column.count");if(0>=D||0>=X||0>r||r>=D||0>H||H>=X)return m;var W,C,q,w=s.getRect(),E=s.s("grid.row.percents"),Y=s.s("grid.column.percents");if(Jm(w,s,"grid.border",-1),E&&E._as&&(E=E._as),Y&&Y._as&&(Y=Y._as),E&&E.length===D){for(q=0,W=0;r>W;W++)q+=w.height*E[W];w.y+=q,w.height=w.height*E[r]}else w.height=w.height/D,w.y+=w.height*r;if(Y&&Y.length===X){for(C=0,W=0;H>W;W++)C+=w.width*Y[W];w.x+=C,w.width=w.width*Y[H]}else w.width=w.width/X,w.x+=w.width*H;return xq(w,-s.s("grid.gap")),w}});var yr=I.Shape=function(){kd(yr,this),this._59O=new om};yr.__de__=ag,ms("Shape",fc,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return ih},_22Q:function(){return fr},getLength:function(O){return Dl(wj(this._59O,this._58O,O,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var Q=this._58O;return Q?new om(Q._as.slice(0)):Q},setSegments:function(E){var N=this._58O;E=E?we(E)?new om(E.slice(0)):new om(E._as.slice(0)):new om,(N&&E&&N._as.join(",")!==E._as.join(",")||N!==E)&&(this._58O=E,this.fp("segments",N,E))},getPoints:function(){return this._59O},toPoints:function(){var F=this._59O;return new om(F._as.slice(0))},setPoints:function(x){var Y=this._59O;x=x?we(x)?new om(x.slice(0)):new om(x._as.slice(0)):new om,(Y&&x&&Y._as.join(",")!==x._as.join(",")||Y!==x)&&(this._59O=x,this.fs(),this.fp("points",Y,x))},addPoint:function(i,p){var g=this.toPoints();g.add(i,p),this.setPoints(g)},setPoint:function(m,P){var N=this.toPoints();N.set(m,P),this.setPoints(N)},removePointAt:function(n){var r=this.toPoints();r.removeAt(n),this.setPoints(r)},setWidth:function(X){var K=this;if(1>X&&(X=1),!K._55I&&!iq&&K.getWidth()){K._55I=1;var t=K._position.x,W=X/K.getWidth(),H=K.toPoints(),C=new om;H.each(function(f){C.add({x:(f.x-t)*W+t,y:f.y,e:f.e})}),K.setPoints(C),K.fs(),delete K._55I}yr.superClass.setWidth.call(K,X)},setHeight:function(x){var t=this;if(1>x&&(x=1),!t._55I&&!iq&&t.getHeight()){t._55I=1;var b=t._position.y,y=x/t.getHeight(),z=t.toPoints(),o=new om;z.each(function(C){o.add({x:C.x,y:(C.y-b)*y+b,e:C.e})}),t.setPoints(o),t.fs(),delete t._55I}yr.superClass.setHeight.call(t,x)},setPosition:function(C,P){var q,p=this;if(!p._28Q){if(p._28Q=1,!p._55I&&!iq){q=2===arguments.length?{x:C,y:P}:C;var h=q.x-p._position.x,X=q.y-p._position.y;if(0===h&&0===X)return delete p._28Q,void 0;p._55I=1;var w=p.toPoints(),J=new om;w.each(function(g){J.add({x:g.x+h,y:g.y+X,e:g.e})}),p.setPoints(J),p.fs(),delete p._55I}yr.superClass.setPosition.apply(p,arguments),delete p._28Q}},fs:function(){this.fireShapeChange()},fireShapeChange:function(){var S=this;if(!S._55I&&!iq){var i=wb(S._59O);i&&(S._55I=1,S.setRect(i),delete S._55I)}S.fp(Un,!1,!0)},getSerializableProperties:function(){var Q=yr.superClass.getSerializableProperties.call(this);return Q.segments=1,Q.points=1,Q.thickness=1,Q.closePath=1,Q}});var $h=I.Polyline=function(){kd($h,this),this.s({"shape.background":null,"shape.border.width":2})};ms("Polyline",yr,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return Ii},getUIClass:function(){return mb},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(g){var y=this;if(!y._24Q&&!iq&&y.getTall()){y._24Q=1;var E=y._54O,u=g/y.getTall();y._59O.each(function(F){F.e=F.e==m?E:(F.e-E)*u+E}),y.fs(),delete y._24Q}$h.superClass.setTall.call(y,g)},setElevation:function(n){var T=this;if(!T._24Q&&!iq){T._24Q=1;var D=n-T._54O;T._59O.each(function(j){j.e==m?j.e=n:j.e+=D}),T.fs(),delete T._24Q}$h.superClass.setElevation.apply(T,arguments)},fireShapeChange:function(){var q=this,a=q._59O;if(!q._24Q&&!iq){var y=a.size();if(y){var f=1,c=a.get(0),M=q._54O;c.e==m&&(c.e=M);for(var d=c.e,K=0;y>f;f++){c=a.get(f),c.e==m&&(c.e=M);var w=_(d,c.e),V=k(d+K,c.e);d=w,K=V-w}q._24Q=1,q.setTall(K),q.setElevation(d+K/2),delete q._24Q}}$h.superClass.fireShapeChange.apply(q,arguments)}});var Vh=I.SubGraph=function(){kd(Vh,this)};ms("SubGraph",fc,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Vh.superClass._8I.call(this),this.eachChild(function(c){qh(c)&&c._8I()})}}),I.EdgeGroup=function(t,U){this._70O=t,this._siblings=U;for(var d,c,x=0,i=t.size(),E=H[be];i>x;x++)if(d=t.get(x).getStyle(be,!1),d!=m){E=d;break}E==m&&(E=!0);var b=e.edgeGroupAgentFunc;for(b&&(c=b(t),c&&c!==t.get(0)&&(t.remove(c),t.add(c,0))),x=0;i>x;x++)t.get(x).s(be,E)},ms("EdgeGroup",$,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(c){return this._70O.get(c)},indexOf:function(E){return this._70O.indexOf(E)},each:function(Z,b){this._70O.each(Z,b)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(u,V){this._siblings.each(function(N){N._70O.each(u,V)})}});var us=I.JSONSerializer=function(m,P){this.dm=this._dataModel=m,this._hierarchical=!!P};ms("JSONSerializer",$,{ms_ac:["hierarchical"],serialize:function(t){return JSON.stringify(this.toJSON(),function(z,P){return Gg(P)?mm(P):P},t==m?2:t)},toJSON:function(){var o=this,a=o.dm,i=a.getRoots(),O=o.json={v:e.getVersion(),d:[],a:{}},y=a.getSerializableAttrs();for(var f in y){var _=a.a(f);_!==E&&o[Wk](f,_,O.a)}return Mk(O.a)&&delete O.a,o._hierarchical?i.each(o.serializeData,this):a.each(function(Q){o.serializeData(Q)}),O},isSerializable:function(){return!0},getProperties:function(W){return W.getSerializableProperties()},getStyles:function(X){return X.getSerializableStyles()},getAttrs:function(n){return n.getSerializableAttrs()},serializeData:function(P){var Q=this;if(Q.isSerializable(P)){var A,w,q,v,T=P.getClass(),J=new T,j={c:P.getClassName(),i:P.getId(),p:{},s:{},a:{}};Q.json.d.push(j),A=Q.getProperties(P);for(w in A)v=Jl(w),P[v]&&(q=P[v](),q!==J[v]()&&Q[Wk](w,q,j.p));A=Q.getStyles(P);for(w in A)q=P.s(w),q!==J.s(w)&&Q[Wk](w,q,j.s);A=Q.getAttrs(P);for(w in A)q=P.a(w),q!==J.a(w)&&Q[Wk](w,q,j.a);Mk(j.p)&&delete j.p,Mk(j.s)&&delete j.s,Mk(j.a)&&delete j.a}Q._hierarchical&&P.getChildren().each(Q.serializeData,Q)},serializeValue:function(s,p,i){cn(p)?p={__a:p._as}:p instanceof sj&&(p={__i:p.getId()}),i[s]=p},deserialize:function(t,C,L){iq=!0;var e=this;t=e.json=xs(t)?JSON.parse(t):t,e._82I={};for(var W=e.dm,F=new om,v=new om,J=0,Z=t.d.length;Z>J;J++){var u=t.d[J],K=Yo(u.c),N=new K,s=u.i;L&&s!=m&&(N._id=s),e._82I[s]=N,F.add(N),v.add(u)}for(J=0;Z>J;J++)e.deserializeData(F.get(J),v.get(J));F.each(function(F){C&&!F.getParent()&&F.setParent(C),W.add(F)});for(var D in t.a)W.a(D,e[Fn](t.a[D]));return iq=!1,F},deserializeData:function(q,t){for(var k in t.p)q[td(k)](this[Fn](t.p[k]));for(k in t.s)q.s(k,this[Fn](t.s[k]));for(k in t.a)q.a(k,this[Fn](t.a[k]))},deserializeValue:function(X){if(qm(X)){var s=X.__i;if(s!=m)return this._82I[s];if(s=X.__a,we(s))return new om(s)}return X}}),cg(Ze,{serialize:function(r,y){return new us(this,y).serialize(r)},toJSON:function(J){return new us(this,J).toJSON()},deserialize:function($,S,d){return new us(this).deserialize($,S,d)}}),gk.GraphView=function(Q){var D=this;D._24I={},D._34I=new om,D._25I={},D._56I={},D._view=fq(1),D._canvas=pm(D._view),D.dm(Q?Q:new Ze),D.setEditable(!1),D.setScrollBarVisible(e.graphViewScrollBarVisible)},Fm("GraphView",$,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:["layers",pd,wp,Pe,dq,"resettable","editInteractor",pb,"pannable","rectSelectable","autoScrollZone",ri,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:e.graphViewResettable,_pannable:e.graphViewPannable,_rectSelectable:e.graphViewRectSelectable,_autoScrollZone:e.graphViewAutoScrollZone,_rectSelectBackground:e.graphViewRectSelectBackground,_rectSelectBorderColor:e.graphViewRectSelectBorderColor,_editPointSize:e.graphViewEditPointSize,_editPointBorderColor:e.graphViewEditPointBorderColor,_editPointBackground:e.graphViewEditPointBackground,_scrollBarColor:cc,_scrollBarSize:hj,_autoHideScrollBar:Ol,_autoMakeVisible:Pq,setEditable:function(D){var b=this,M=gk.XEditInteractor;D?b.setInteractors([new ph(b),M?new M(b):new fb(b),new $c(b),new oo(b),new Rk(b,{editable:!M})]):b.setInteractors([new ph(b),new $c(b),new oo(b),new Rk(b,{editable:!1})])},getCanvas:function(){return this._canvas},_33I:function(w){var R=w.getUIClass();return R?new R(this,w):m},getDataUI:function(O){var m=this,b=m._25I[O._id];return b===E&&(b=m._33I(O),m._25I[O._id]=b),b},invalidateAll:function(E){var H=this;if(E){for(var b in H._25I){var G=H._25I[b];G&&G.dispose()}H._25I={},H._56I={},H._24I={},H._34I.clear(),H.redraw()}else H.dm().each(function(N){H.invalidateData(N)})},invalidateSelection:function(){var L=this;L.sm().each(function(b){L.invalidateData(b)})},invalidateData:function(m){var e=this;e._24I[m._id]=m,e._21Q(m),e.iv()},_21Q:function(A){var Y=this,m=Y._24I;if(hc(A)&&em[A.s(ac)]){var F=A.getSourceAgent();F&&F.getAgentEdges().each(function(E){m[E._id]=E}),F=A.getTargetAgent(),F&&F.getAgentEdges().each(function(V){m[V._id]=V}),Y.iv()}},redraw:function(K){var i=this;i._32I||(K?i._34I.add(K):(i._32I=1,i._34I.clear()),i.iv())},each:function(W,x){var r,Z,D,A=0,N=this._layers,g=this._dataModel._datas._as,R=g.length;if(N)for(var l=N.length;l>A;A++){D=N[A];for(var q=0;R>q;q++)if(r=g[q],r._layer===D&&(Z=x?W.call(x,r):W(r),Z===!1))return}else for(;R>A;A++)if(r=g[A],Z=x?W.call(x,r):W(r),Z===!1)return},reverseEach:function(z,C){var d,T,h,F,M=this._layers,j=this._dataModel._datas._as,Q=j.length;if(M)for(d=M.length-1;d>=0;d--){F=M[d];for(var r=Q-1;r>=0;r--)if(T=j[r],T._layer===F&&(h=C?z.call(C,T):z(T),h===!1))return}else for(d=Q-1;d>=0;d--)if(T=j[d],h=C?z.call(C,T):z(T),h===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var x=this,y=x._84I;return y||(x.each(function(s){x.isVisible(s)&&(y=ml(y,x.getDataUIBounds(s)))}),x._84I=y?y:po),x._84I},getScrollRect:function(){return ml(this.getContentRect(),this._29I)},fitData:function(g,i,X,s,Z){var N=this;if(!N.getWidth()||!N.getHeight())return Z||md(N.fitData,N,[g,i,X,s,!0],200),void 0;N.makeVisible(g),N.validate();var O=N.getDataUIBounds(g);O&&(O=qj(O),xq(O,X==m?20:X),N.fitRect(O,i,s))},fitContent:function(H,b,w,o){var W=this;if(!W.getWidth()||!W.getHeight())return o||md(W.fitContent,W,[H,b,w,!0],200),void 0;W.validate();var r=qj(W.getContentRect());xq(r,b==m?20:b),W.fitRect(r,H,w)},fitRect:function(B,S,E){var e=this,k=e.getWidth(),T=e.getHeight(),J=B.x+B.width/2,I=B.y+B.height/2,h=_(k/B.width,T/B.height),v=e._zoom,$=-J*v+k/2,R=-I*v+T/2;0===h||isNaN(h)||(E&&(h=_(1,h)),S?e.setTranslate($,R,{finishFunc:function(){e.setZoom(h,S)}}):(e.setTranslate($,R),e.setZoom(h)))},toCanvas:function(T){this.validateImpl();var q=this,I=q.getContentRect(),$=pm(),c=q._zoom,v=I.x*c,_=I.y*c,X=I.width*c,h=I.height*c;$q($,X,h,1);var j=Gk($);return T&&Vi(j,0,0,X,h,T),Hm(j,-v,-_),j.scale(c,c),q._42(j),j.restore(),$},toDataURL:function(z,g){return this.toCanvas(z).toDataURL(g||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(J,r){var L,u,e=this;e._93db(J,r),e.each(function(s){e._56I[s._id]&&(L=e.getDataUI(s),L&&(u=L._79o(),I.HtmlNode&&s instanceof I.HtmlNode?L._42(J):(!r||zr(r,u))&&L._42(J)))}),e._92db(J,r)},validateImpl:function(){var n,c,q,D,y,i=this,p=i.tx(),Z=i.ty(),d=i._zoom,v=i._canvas,x=this.getWidth(),m=this.getHeight(),U=i._29I,f={x:-p/d,y:-Z/d,width:x/d,height:m/d},S={},g=i._34I,P=i._24I,C=i._32I,z=i._23I;(x!==v.clientWidth||m!==v.clientHeight)&&($q(v,x,m),C=1),C||_j(f,U)||(C=1),i._29I=f,i.each(function(r){c=r._id;var V=S[c]=i.isVisible(r);V!==i._56I[c]&&(P[c]=r,q=i.getDataUI(P[c]),q&&q._84o(V),i._84o(r,V))},i);for(c in P)q=i.getDataUI(P[c]),q&&(!C&&i._56I[c]&&(y=q._79o(),y&&g.add(y)),q.invalidate()),i._83I=1;if(i._56I=S,!C)for(c in P)S[c]&&(q=i.getDataUI(P[c]),q&&(y=q._79o(),y&&g.add(y)));if(C?D=f:(g.each(function(K){zr(f,K)&&(D=ml(D,K))}),D&&(xq(D,k(1,1/d)),D.x=w(D.x*d)/d,D.y=w(D.y*d)/d,D.width=h(D.width*d)/d,D.height=h(D.height*d)/d,D=yi(f,D))),i._74O=D,D&&(n=Gk(v),gc(n,p,Z,d),n.beginPath(),n.rect(D.x,D.y,D.width,D.height),n.clip(),n.clearRect(D.x,D.y,D.width,D.height),i._42(n,D),n.restore(),delete i._74O),i._24I={},g.clear(),delete i._32I,z&&x>0&&m>0){var q=i.getDataUI(z);if(q){var y=q._79o(),V=i._29I,I=V.x,X=V.y,M=V.width,Q=V.height,d=i._zoom;y&&!zr(y,V)&&(y.x+y.width<I&&i.tx(-y.x*d),y.x>I+M&&i.tx(-(y.x+y.width-M)*d),y.y+y.height<X&&i.ty(-y.y*d),y.y>X+Q&&i.ty(-(y.y+y.height-Q)*d))}delete i._23I}i._83I&&(delete i._83I,delete i._84I),i._98O()},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(n){var I=this;n!==I.isScrollBarVisible()&&(n?(If(I._view,I._79O=fq()),If(I._79O,I._27I=fq()),If(I._79O,I._28I=fq())):(Cs(I._79O),delete I._79O,delete I._27I,delete I._28I),I.fp("scrollBarVisible",!n,n))},showScrollBar:function(){var g=this;g._79O&&(g._85I||(f(function(){g._86I()},gs),g.iv()),g._85I=new Date)},_86I:function(){var u=this;if(u._85I){var S=new Date,Z=S.getTime();Z-u._85I.getTime()>=gs?(delete u._85I,u.iv()):f(function(){u._86I()},gs)}},_98O:function(){var $=this,e=this._27I,m=this._28I;if($._79O){if($._autoHideScrollBar&&!$._85I)return e.style.visibility=Dk,m.style.visibility=Dk,void 0;var w=$.getScrollBarColor(),u=$._zoom,T=$.getScrollBarSize(),B=$.getViewRect(),q=$.getScrollRect(),h=B.height*u,W=q.height*u,P=B.width*u-T-2,j=h*((B.y-q.y)*u/W),k=h*(h/W),N=e.style;W-.5>h?(Yd>k&&(j=j+k/2-Yd/2,0>j&&(j=0),j+Yd>h&&(j=h-Yd),k=Yd),Sq(e,P,j,T,k),N.visibility=Pf,N.background=w,N.borderRadius=T/2+Hd):N.visibility=Dk;var G=B.width*u,V=q.width*u,j=B.height*u-T-2,P=G*((B.x-q.x)*u/V),X=G*(G/V),N=m.style;V-.5>G?(Yd>X&&(P=P+X/2-Yd/2,0>P&&(P=0),P+Yd>G&&(P=G-Yd),X=Yd),Sq(m,P,j,X,T),N.visibility=Pf,N.background=w,N.borderRadius=T/2+Hd):N.visibility=Dk}},setDataModel:function(K){var b=this,i=b._dataModel,D=b._3o;i!==K&&(i&&(i.umm(b.handleDataModelChange,b),i.umd(b.handleDataPropertyChange,b),i.removeIndexChangeListener(b._75O,b),D||i.sm().ums(b._16o,b)),b._dataModel=K,K.mm(b.handleDataModelChange,b),K.md(b.handleDataPropertyChange,b),K.addIndexChangeListener(b._75O,b),D?D._21I(K):K.sm().ms(b._16o,b),b.invalidateAll(!0),b.fp(Kq,i,K))},handleDataPropertyChange:function(w){this.invalidateData(w.data)},onPropertyChanged:function(w){var j=this,O=w.property;j.redraw(),Lr[O]?j.showScrollBar():O===pb&&j.onCurrentSubGraphChanged(w)},onCurrentSubGraphChanged:function(){this.reset()},handleDataModelChange:function(l){var H=this,E=l.kind,s=l.data;if(H._83I=1,"add"===E)H.invalidateData(s),hc(s)&&s.getEdgeGroup()&&s.getEdgeGroup().eachSiblingEdge(H.invalidateData,H);else if(E===Id){H._21Q(s);var e=s._id,d=H._25I[e];if(d){if(H._56I[e]){var Z=d._79o();Z&&H.redraw(Z)}d.dispose(),delete H._25I[e],delete H._24I[e],delete H._56I[e]}s===H._currentSubGraph&&H.setCurrentSubGraph(m)}else E===_d&&(H.invalidateAll(!0),H.setCurrentSubGraph(m))},_75O:function(N){this.invalidateData(N.data)},_76O:function(R){var X=this;if(X.isVisible(R)){for(var d=R;d._parent&&X.isVisible(d._parent);)d=d._parent;d&&d!==R&&X._dataModel._76O(d),X._dataModel._76O(R)}},isMovable:function(o){var n=this;return hc(o)&&o.getStyle(ac)!==_k?!1:o.s("2d.movable")?n._movableFunc?n._movableFunc(o):!0:!1},isSelectable:function(y){return y.s("2d.selectable")&&this.sm().isSelectable(y)},isEditable:function(P){var a=this;if(!a._editInteractor||!a.isSelected(P))return!1;if(Mh(P)){var W=a.getDataUI(P);if(!W||W._88I)return!1}return hc(P)&&P.getStyle(ac)!==_k?!1:P.s("2d.editable")?a._editableFunc?a._editableFunc(P):!0:!1},handleDelete:function(){this._editInteractor&&this.removeSelection()},isPointEditable:function(K){return qh(K)&&0!==K.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(K):!0},isRectEditable:function(H){return qh(H)&&0!==H.getRotation()?!1:this._rectEditableFunc?this._rectEditableFunc(H):!0},isRotationEditable:function(w){return w.setRotation&&w.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(w):!0:!1},getRotationPoint:function(m){var o=Lq(m.getRotation(),0,-m.getHeight()/2-(q?32:16)),J=m.p();return o.x+=J.x,o.y+=J.y,o},getLogicalPoint:function(A){var T=this;return Mm(A,T._canvas,T.tx(),T.ty(),T._zoom,T._zoom)},getSelectedDataAt:function(S){var s=this;return this.getDataAt(S,function(f){return s.isSelected(f)})},getDataAt:function(z,x,q){z.target&&(z=this.lp(z));var K;return this.reverseEach(function(r){return(x?x(r):this.isSelectable(r))&&this.rectIntersects(r,Vf(z.x,z.y,q))?(K=r,!1):void 0},this),K},getIconInfoAt:function(N,T){var M=this;if(N.target&&(N=M.lp(N)),T||(T=M.getDataAt(N)),T){var J=M.getDataUI(T);if(J&&J._38o){var s,L=J._38o,R=new om;for(s in L.icons)R.add(s);for(var H=R.size()-1;H>=0;H--){s=R.get(H);for(var C=L.rects[s],f=C.rotation,w=C.length-1;w>=0;w--){var y=C[w],$=y.width,g=y.height,b={x:N.x-y.x-$/2,y:N.y-y.y-g/2};f!=m&&(b=Lq(-f,b.x,b.y));var y={x:-$/2,y:-g/2,width:$,height:g};if(lf(y,b))return{key:s,index:w,name:L.icons[s].names[w],rect:C[w],point:N,rotation:f,relativeRect:y,relativePoint:b,data:T}}}}}return m},getDatasInRect:function(u,I,A){A===E&&(A=1);var j=this,g=new om;return j.reverseEach(function(c){A&&!j.isSelectable(c)||(I?j.rectIntersects(c,u):j.rectContains(c,u))&&g.add(c)}),g},moveSelection:function(T,$){var A,E=this,v=E.dm();v&&(A=v.getHistoryManager()),A&&A.beginInteraction(),oe(E.sm().toSelection(E.isMovable,E),T,$),A&&A.endInteraction()},getDataUIBounds:function(e){var Q=this.getDataUI(e);return Q?Q._79o():m},getBoundsForGroup:function(G){return G.s(kj)?this.getDataUIBounds(G):m},rectIntersects:function(F,L){this.validate();var B=m;if(this._56I[F._id]){var M=this._25I[F._id];if(M){var Q=M._79o();if(um(L,Q))B=!0;else if((L=yi(L,Q))&&(M.rectIntersects&&(B=M.rectIntersects(L)),B==m)){if(!F.s("pixelPerfect"))return!0;var f=L.x,c=L.y,A=L.width,R=L.height,v=1,r=e.hitMaxArea,T=A*R;T>r&&(v=r/T);var $=Aq(A*v,R*v);Hm($,-f*v,-c*v),$.scale(v,v),M._42($);try{for(var I=0,Z=$.getImageData(0,0,A*v,R*v).data;I<Z.length;I+=4)if(0!==Z[I+3]){B=!0;break}$.restore()}catch(U){Sf=m,B=!0}}}}return B?!0:!1},rectContains:function(H,F){if(this._56I[H._id]){var z=this._25I[H._id];if(z)return um(F,z._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(H){var v=this,f=v._focusData,q=f&&v._25I[f._id],F=0,J=v._dataModel._datas;f&&f._enabled&&f._editable&&q&&q.onKeyDown&&q.onKeyDown(H)===!0||(9===H.keyCode&&(f&&(F=J.indexOf(f),Do(H)?-1===--F&&(F=0):++F===J.size()&&(F=0)),v._focusData=f=J.get(F),v.sm().setSelection(f)),tq(H)?v.selectAll():eg(H)&&v.isResettable()&&v.reset(),v.sm().isEmpty()||(el(H)&&v.handleDelete(H),cb(H)&&(v.moveSelection(-1,0),v.fi({kind:"moveLeft"})),ek(H)&&(v.moveSelection(0,-1),v.fi({kind:"moveUp"})),Um(H)&&(v.moveSelection(1,0),v.fi({kind:"moveRight"})),vp(H)&&(v.moveSelection(0,1),v.fi({kind:"moveDown"}))))},handleScroll:function(Y,i){xf(Y);var p=this.lp(Y);i>0?this.scrollZoomIn(p):0>i&&this.scrollZoomOut(p)},handlePinch:function(m,P,F){P>F?this.pinchZoomIn(m):this.pinchZoomOut(m)},checkDoubleClickOnNote:function(r,m){var N=this,E=N.lp(r),W=N.getDataUI(m),C=W.note2Info;return C&&m.s("note2.toggleable")&&lf(C.clickRect,E)?(m.s(Bn,!m.s(Bn)),N.fi({kind:"toggleNote2",event:r,data:m}),!0):(C=W.noteInfo,C&&m.s("note.toggleable")&&lf(C.clickRect,E)?(m.s(As,!m.s(As)),N.fi({kind:"toggleNote",event:r,data:m}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isSelectVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(q,J){var t=this,f=t.getAutoScrollZone(),O=f/t.getZoom(),v=f/4,H=t._29I,h=t.lp(q),R={x:t.tx(),y:t.ty()};return h&&f>0&&H&&(h.x-H.x<O?t.translate(v,0):H.x+H.width-h.x<O&&t.translate(-v,0),h.y-H.y<O?t.translate(0,v):H.y+H.height-h.y<O&&t.translate(0,-v)),R.x=t.tx()-R.x,R.y=t.ty()-R.y,J&&(J.x+=R.x,J.y+=R.y),R},getMoveMode:function(x,M){var Y=M.s("2d.move.mode");return Y?Y:sp["88"]?"x":sp["89"]?"y":"xy"}});var Jq=function(U,f){var h=this;h.gv=U,h.s=function(Y){return f.getStyle(Y)},h._data=f,h._87I=new om};qn(Jq,$,{_6I:m,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},_2o:function(){var H=this,y=H.gv.isSelected(H._data);return!y||H.isShadowed()?0:this.s("select.width")},getBodyColor:function(M){var q=this._data,j=this.gv.getBodyColor(q);return j?j:M?q.getStyle(M):m},_2Q:function(A){return this.s(A)},_1Q:function(N,x,G,O){var L=this.s,R=L(x+".dash.color");N.strokeStyle=R,N.lineWidth=G,N.stroke(),L(x+".dash.3d")&&kn(N,R,L(x+".dash.3d.color"),G,this.gv._zoom,L(x+".dash.3d.accuracy")),vg(N,O)},invalidate:function(){this._6I=m},_79o:function(){var M=this;if(!M._6I){M.labelInfo=M.label2Info=M.noteInfo=M.note2Info=M._38o=m,M._87I.clear(),M._3O();var Z=M._data,w=M.gv;M._55O=w.isEditable(Z)?{_42O:w.isRectEditable(Z),_43O:w.isPointEditable(Z),_56O:w.isRotationEditable(Z)}:m,M._6I=M._81o()}return M._6I},_3O:function(){},getPosition:function(){return po},_68o:function(P,H){P&&this._87I.add(jh(P,H))},_81o:function(){var q=this,Z=q.s;q._24O(bq,"getLabel"),q._24O(Nm,"getLabel2"),q._26O(qi,"getNote"),q._26O(bm,"getNote2"),q._15O(),q._55O&&q._48O();var a;if(q._87I.each(function(u){a=ml(a,u)}),a&&q.isShadowed()){var z=qj(a);z.x+=Z("shadow.offset.x"),z.y+=Z("shadow.offset.y"),xq(z,Z("shadow.blur")),a=ml(a,z)}return q._87I.clear(),a},_42:function(G){var M=this,D=M._data,r=M.gv,Z=M.s,x=Z("opacity"),j=this.isShadowed();if(j){var n=G.shadowOffsetX,$=G.shadowOffsetY,s=G.shadowBlur,A=G.shadowColor;
G.shadowOffsetX=Z("shadow.offset.x"),G.shadowOffsetY=Z("shadow.offset.y"),G.shadowBlur=Z("shadow.blur"),G.shadowColor=Z("shadow.color")}if(x!=m){var N=G.globalAlpha;G.globalAlpha=x}M._80o(G),r.isLabelVisible(D)&&(Pl(G,M.labelInfo),Pl(G,M.label2Info)),r.isNoteVisible(D)&&(Oo(G,M.noteInfo),Oo(G,M.note2Info)),M._99O(G),x!=m&&(G.globalAlpha=N),j&&(G.shadowOffsetX=n,G.shadowOffsetY=$,G.shadowBlur=s,G.shadowColor=A),M._55O&&r.isEditVisible(D)&&M._47O(G)},_80o:function(){},_47O:function(){},_24O:function(o,k){var X=this,v=X._data,D=X.gv,C=X.s,G=D[k](v);if(G!=m){var F=C(o+".scale"),f=C(o+".max"),r=C(o+".position"),i=X[o+"Info"]={label:G,scale:F,color:D[k+"Color"](v),font:C(o+".font"),opacity:C(o+".opacity"),align:C(o+".align"),rotation:X.getRotation(C(o+".rotation"),!1,r),background:D[k+"Background"](v)},t=ij(i,G);f>0&&f<t.width&&(i.labelWidth=t.width,t.width=f),1!==F&&(t.width*=F,t.height*=F);var z=X.getPosition(r,C(o+".offset.x"),C(o+".offset.y"),t,C(o+".position.fixed"));if(t.x=z.x-t.width/2,t.y=z.y-t.height/2,X._68o(i.rect=t,i.rotation),1!==F){var c=t.width/F,d=t.height/F;i.rect={x:z.x-c/2,y:z.y-d/2,width:c,height:d}}}},_26O:function(t,k){var A=this,V=A.gv,J=A._data,f=A.s,D=V[k](J);if(D!=m){var N,L,Z=f(t+".scale"),Q=A[t+"Info"]={note:D,scale:Z,expanded:f(t+".expanded"),font:f(t+".font"),color:f(t+".color"),opacity:f(t+".opacity"),align:f(t+".align"),borderWidth:f(t+".border.width"),borderColor:f(t+".border.color"),background:V[k+"Background"](J)},g=A.getPosition(f(t+".position"),f(t+".offset.x"),f(t+".offset.y")),C=g.x,u=g.y;if(Q.expanded){var n=f(t+".max"),p=ij(Q,D);p.width+=6,p.height+=2,n>0&&n<p.width&&(Q.labelWidth=p.width,p.width=n),N=p.width,L=p.height+8,Q.clickRect={x:C-N*Z/2,y:u-L*Z,width:N*Z,height:L*Z*p.height/L}}else N=12,L=18,Q.clickRect={x:C-N*Z/2,y:u-L*Z,width:N*Z,height:L*Z};Q.rect={x:C-N/2,y:u-L*Z/2-L/2,width:N,height:L};var q=h(Q.borderWidth/2)*Z;A._68o({x:C-N*Z/2-q,y:u-L*Z-q,width:N*Z+2*q,height:L*Z+2*q})}},_48O:function(){},_99O:function(H){var J=this,r=J._38o;if(r){var y=J.gv,a=J._data,N=r.icons;for(var A in N){var i=N[A],L=r.rects[A];if(L){var h=Ge(i.opacity,a,y),W=Ge(i.names,a,y),G=W?W.length:0,O=L.rotation;if(h!=m){var Y=H.globalAlpha;H.globalAlpha*=h}for(var Q=0;G>Q;Q++){var c=W[Q],q=Em(c),I=L[Q];if(O){var j=I.x+I.width/2,P=I.y+I.height/2;H.save(),Hm(H,j,P),Ji(H,O),Hm(H,-j,-P)}bj(H,q,Ge(i.stretch,a,y),I.x,I.y,I.width,I.height,J._data,J.gv),O&&H.restore()}h!=m&&(H.globalAlpha=Y)}}}}});var pc=function(M,V){kd(pc,this,[M,V])};qn(pc,Jq,{_40O:function(o,Y){var r=this,E=r.s,S=o.rect;(o.borderColor=r.gv.getBorderColor(r._data))&&(o.borderType=E("border.type"),o.borderWidth=E("border.width"),o.borderPadding=E("border.padding"),Y=k(Y,o.borderPadding+o.borderWidth/2)),(o.selectWidth=r._2o())&&(o.selectType=E("select.type"),o._97o=E("select.color"),o.selectPadding=E("select.padding"),Y=k(Y,o.selectPadding+o.selectWidth/2)),Y>0&&(S=qj(S),xq(S,Y)),r._68o(S)},_39O:function(m,V){var j=V.rect;if(V.borderWidth>0){var G=V.borderPadding;m.strokeStyle=V.borderColor,m.lineWidth=V.borderWidth,Yl(m,V.borderType,{x:j.x-G,y:j.y-G,width:j.width+2*G,height:j.height+2*G}),m.stroke()}V.selectWidth>0&&(G=V.selectPadding,m.strokeStyle=V._97o,m.lineWidth=V.selectWidth,Yl(m,V.selectType,{x:j.x-G,y:j.y-G,width:j.width+2*G,height:j.height+2*G}),m.stroke())},_3O:function(){var z=this,q=z.s,C=z._data,R=C.getStyle(Un),f=z.getBodyColor(),y=z._83o=R?{shape:R,_53o:z.getBodyColor("shape.background"),_27Q:Em(q("shape.repeat.image"),f),_54o:q("shape.border.width"),_55o:q("shape.border.color"),_56o:q("shape.border.3d"),_57o:q("shape.border.3d.color"),_58o:q("shape.border.3d.accuracy"),shapeGradient:q("shape.gradient"),_59o:q("shape.gradient.color"),_60o:q("shape.border.pattern"),_61o:q("shape.border.cap"),_62o:q("shape.border.join")}:{img:Em(C.getImage(),f),bodyColor:f,stretch:q("image.stretch")};y.rect=C.getRect(),y.position=C.p(),y.rotation=C.getRotation(),R===Kf&&(y._63o=q("shape.depth")),z._40O(y,R?Pm(m,y._54o/2,y._62o):0)},getPosition:function(y,O,C,i){var v=Or(y,this._83o.rect,i);return v.x+=O,v.y+=C,v},_80o:function(w){var $=this,q=$.s,d=$.gv,H=$._data,c=$._83o,G=c.rect,M=G,_=c.position,i=c.rotation,N=c.shape;if(G.width>0&&G.height>0){if(i&&(w.save(),Hm(w,_.x,_.y),Ji(w,i),Hm(w,-_.x,-_.y),M=H.getSize(),M.x=_.x-M.width/2,M.y=_.y-M.height/2),$.freeDraw)$.freeDraw(w,M,c);else if(N){var k,I,L,K,r=c._60o,D=rq(w,r),j=c._53o,O=c._27Q,p=c._54o,R=c._55o,Z=w.lineJoin,Q=w.lineCap;if("roundRect"===N?k=q("shape.corner.radius"):"polygon"===N?k=q("shape.polygon.side"):"arc"===N&&(k=q("shape.arc.from"),I=q("shape.arc.to"),L=q("shape.arc.close"),K=q("shape.arc.oval")),w.lineJoin=c._62o,w.lineCap=c._61o,j||O?(O?Yi(w,O):Rr(w,j,c.shapeGradient,c._59o,M),Yl(w,N,M,k,I,L,K),w.fill(),w!==D&&Yl(D,N,M,k,I,L,K)):Yl(D,N,M,k,I,L,K),p>0&&(w.lineWidth=p,w.strokeStyle=R,w.stroke(),c._56o&&kn(w,R,c._57o,p,d._zoom,c._58o)),vg(w,r),q("shape.dash")){var n=q("shape.dash.width")||p;if(n>0){r=q("shape.dash.pattern");var D=rq(w,r,$._2Q("shape.dash.offset"));D!==w&&Yl(D,N,M,k,I,L,K),$._1Q(w,"shape",n,r)}}Kd(w,j,c._63o,M),w.lineJoin=Z,w.lineCap=Q}else bj(w,c.img,c.stretch,M.x,M.y,M.width,M.height,H,d,c.bodyColor);i&&w.restore()}$._39O(w,c)},_48O:function(){var K,m=this,O=m._data,q=m.gv,V=m._55O,L=q.getEditPointSize()/2+2;if(V._42O&&(K=O.getRect(),xq(K,L)),V._56O){var z=V._98o=q.getRotationPoint(O);K=ml(K,{x:z.x-L,y:z.y-L,width:2*L,height:2*L})}m._68o(K)},_47O:function(G){var N=this,F=N.gv,J=N._55O,i=N._data.getRect(),m=F.getEditPointSize(),U=J._98o;J._42O&&(G.fillStyle=F.getEditPointBackground(),G.strokeStyle=F.getEditPointBorderColor(),G.lineWidth=1,[{x:i.x,y:i.y},{x:i.x+i.width/2,y:i.y},{x:i.x+i.width,y:i.y},{x:i.x,y:i.y+i.height/2},{x:i.x+i.width,y:i.y+i.height/2},{x:i.x,y:i.y+i.height},{x:i.x+i.width/2,y:i.y+i.height},{x:i.x+i.width,y:i.y+i.height}].forEach(function(Y){Vi(G,Y.x-m/2,Y.y-m/2,m,m),G.stroke()})),J._56O&&(G.fillStyle=F.getEditPointBorderColor(),G.strokeStyle=F.getEditPointBackground(),G.lineWidth=1,G.beginPath(),G.arc(U.x,U.y,m/2,0,X,!0),G.fill(),G.stroke())}});var Hp=function(n,U){kd(Hp,this,[n,U])},yk=function(H,G,U,Z){var F=Dj(H,G);return U=Z?_(U,F):gi(U,F),F?U/=F:U=0,{x:H.x+(G.x-H.x)*U,y:H.y+(G.y-H.y)*U}};qn(Hp,Jq,{_3O:function(){var R,d=this,g=d._data,K=d.gv,v=d.s,W=v(ac),y=g.isLooped(),l=v("edge.width"),T=v("edge.center"),x=v("edge.offset"),$=K.getBorderColor(g),U=$?v("border.width"):0,b=d._2o(),S=g._40I,B=g._41I,V=d._78o=S&&B?{looped:y,type:W,width:l,center:T,color:d.getBodyColor("edge.color"),borderColor:$,borderWidth:U,_97o:b?v("select.color"):m,selectWidth:b,pattern:v("edge.pattern"),cap:v("edge.cap"),join:v("edge.join"),is3d:v("edge.3d"),_67o:v("edge.3d.color"),_66o:v("edge.3d.accuracy")}:m;if(V){var f=e.getEdgeType(W);if(f){var C=f(g,Ap(d,K,g,y,W),K,d._19Q);C.points&&C.points.size()>1&&(V._4O=C,R=wb(V._4O.points))}else{var w=Zp(K,S,v("edge.source.position"),v("edge.source.offset.x"),v("edge.source.offset.y")),p=Zp(K,B,v("edge.target.position"),v("edge.target.offset.x"),v("edge.target.offset.y"));if(W===_k){var u=V.points=v(Hf)||Up,E=u.size();if(V.segments=v("edge.segments"),!T)if(x){var H=yk(w,E?u.get(0):p,x,E),k=yk(p,E?u.get(E-1):w,x,E);w=H,p=k}else{var Y=Yp(K,S),N=Yp(K,B),X=Fr(w,E?u.get(0):p,Y);X&&(w={x:X[0],y:X[1]}),X=Fr(E?u.get(E-1):w,p,N),X&&(p={x:X[0],y:X[1]})}R=ml(wb(V.points),wb(w,p))}else{var M=Ap(d,K,g,y,W);if(d._19Q||(M=-M),y)w=qj(w),w.x-=S.getWidth()/2,V.radius=M,R={x:w.x-M,y:w.y-M,width:2*M,height:2*M};else{var c=Dj(w,p),h=gi(x,c),H={x:h,y:M},k={x:c-h,y:M},J=P(p.y-w.y,p.x-w.x),F=V.mat=new tg(J);if(V.orienAngle=J,V.angle=p.x<w.x?J+s:J,V.rect={x:H.x,y:H.y,width:k.x-H.x,height:0},V.origin=w,H=F.tf(H),H.x+=w.x,H.y+=w.y,k=F.tf(k),k.x+=w.x,k.y+=w.y,T){var G={x:c,y:0};G=F.tf(G),G.x+=w.x,G.y+=w.y,R=wb([w,H,k,G]),V.c1=w,V.c2=G}else R=wb(H,k);w=H,p=k}}V._69o=w,V._70o=p}Pm(R,l/2+U+b,V.join),d._68o(R)}},getRotation:function(v,d,o){v=v||0;var L=this._78o;if(L){var g,H=L.angle,j=L.points,C=L._4O;if(H!=m)return d?L.orienAngle+v:H+v;if(C){var D=C.points;return g=D.size(),Se[o]?g&&0===g%2?pn(D.get(g/2-1),D.get(g/2),d,v):v:lh[o]?pn(D.get(0),D.get(1),d,v):pn(D.get(g-2),D.get(g-1),d,v)}if(j)return g=j.size(),Se[o]?g&&0===g%2?pn(j.get(g/2-1),j.get(g/2),d,v):v:lh[o]?pn(L._69o,g?j.get(0):L._70o,d,v):pn(g?j.get(g-1):L._69o,L._70o,d,v)}return v},getPosition:function(o,v,y,k,K){var C=this._78o;if(C){var Y,W=C.type,a=C.points,t=C._4O,T=C._69o,r=C._70o;if(!W)return C.looped?{x:T.x-C.radius+v,y:T.y+y}:(K&&T&&r&&(T.x>r.x||T.x===r.x&&T.y>r.y)&&(o=qf[o],y=-y),Y=Or(o,C.rect,k),Y.x+=v,Y.y+=y,Y=C.mat.tf(Y),Y.x+=C.origin.x,Y.y+=C.origin.y,Y);if(a){var Y,H=a.size();if(Se[o]){if(H){var D=H%2;if(0===D)return Qp(a.get(H/2-1),a.get(H/2),o,v,y,k,K);Y=a.get((H-D)/2)}else Y={x:(T.x+r.x)/2,y:(T.y+r.y)/2};return Y=Or(o,{x:Y.x,y:Y.y,width:0,height:0},k),Y.x+=v,Y.y+=y,Y}return lh[o]?Qp(T,H?a.get(0):r,o,v,y,k,K):Qp(H?a.get(H-1):T,r,o,v,y,k,K)}if(t){var g=t.points,H=g.size();if(Se[o]){var D=H%2;return 0===D?Qp(g.get(H/2-1),g.get(H/2),o,v,y,k,K):(Y=g.get((H-D)/2),Y=Or(o,{x:Y.x,y:Y.y,width:0,height:0},k),Y.x+=v,Y.y+=y,Y)}return lh[o]?Qp(g.get(0),g.get(1),o,v,y,k,K):Qp(g.get(H-2),g.get(H-1),o,v,y,k,K)}}return po},_42:function(c){this._78o&&Hp.superClass._42.call(this,c)},drawPath:function(v,x){v.beginPath();var R=x.type,Z=x.points,Q=x.segments,$=x._4O;if(!R||Z){var Y=x._69o,V=Y.x,C=Y.y,r=x._70o,D=r.x,T=r.y;if(R)if(Q){var b=new om({x:V,y:C});b.addAll(Z),b.add({x:D,y:T}),tn(v,b,Q)}else v.moveTo(V,C),Z.each(function(J){v.lineTo(J.x,J.y)}),v.lineTo(D,T);else x.looped?v.arc(V,C,x.radius,0,X,!0):x.center?(v.moveTo(x.c1.x,x.c1.y),v.lineTo(V,C),v.lineTo(D,T),v.lineTo(x.c2.x,x.c2.y)):(v.moveTo(V,C),v.lineTo(D,T))}else $&&tn(v,$.points,$.segments)},_80o:function(H){var $=this,r=$.s,w=$._78o,F=w.width,d=w.selectWidth,n=w.borderWidth,O=w.color,U=H.lineJoin,M=H.lineCap,Y=w.pattern;if(H.lineJoin=w.join,H.lineCap=w.cap,$.drawPath(rq(H,Y),w),d&&(H.strokeStyle=w._97o,H.lineWidth=F+2*(n+d),H.stroke()),n&&(H.strokeStyle=w.borderColor,H.lineWidth=F+2*n,H.stroke()),H.strokeStyle=O,H.lineWidth=F,H.stroke(),w.is3d&&kn(H,O,w._67o,F,$.gv._zoom,w._66o),vg(H,Y),r("edge.dash")){Y=r("edge.dash.pattern");var j=rq(H,Y,$._2Q("edge.dash.offset"));j!==H&&$.drawPath(j,w),$._1Q(H,"edge",r("edge.dash.width")||F,Y)}H.lineJoin=U,H.lineCap=M},_48O:function(){var u=this,O=u._78o;if(u._55O._43O&&O&&O.points){var T=wb(O.points);T&&(xq(T,u.gv.getEditPointSize()/2+2),u._68o(T))}},_47O:function(V){var G=this,Q=G.gv,b=G._78o;if(G._55O._43O&&b&&b.points){var w=Q.getEditPointSize()/2;V.fillStyle=Q.getEditPointBackground(),V.strokeStyle=Q.getEditPointBorderColor(),V.lineWidth=1,b.points.each(function(a){V.beginPath(),V.arc(a.x,a.y,w,0,X,!0),V.fill(),V.stroke()})}},_71o:function(J,t){var q=this,E=q._data;if(q._19Q=!0,!E.getEdgeGroup())return J?E.s("edge.gap"):0;var B,F=0,h=0,K=0;if(E.getEdgeGroup().getSiblings().each(function(x){x.each(function(y){if(q.gv.isVisible(y)&&y.s(ac)==t){var T=y.s("edge.gap");B?(h+=K/2+T/2,K=T):(B=y,K=T),y===E&&(F=h)}})}),J)return h-F+K;var u=F-h/2;return B&&E._40I!==B._40I&&(q._19Q=!1),u}});var dk=function(P,M){kd(dk,this,[P,M])};qn(dk,pc,{_3O:function(){var X,R,W=this,C=W.s,Y=W._data,e=W.gv;if(W._88I=m,Y.isExpanded()&&Y.eachChild(function(W){var G=e.getBoundsForGroup(W);G&&(R||(R=[]),R.push(G),X=ml(X,G))}),X){var L=e.getLabel(Y),N=C("group.type");X=Fo(N,R,X),Jm(X,Y,"group.padding",1);var P=W._88I={type:N,rect:X,_64o:X};if(!N&&L!=m){var S,y=W.labelInfo={label:L,color:C("group.title.color"),font:C("group.title.font")},Z=ij(y,L),I=Z.width,T=Z.height,u=C("group.title.align");I>X.width&&(X.width=I),y.rect={y:X.y-T,width:Z.width,height:T},S=u===j?X.x:u===O?X.x+X.width-I:X.x+X.width/2-I/2,y.rect.x=S,P.titleRect={x:X.x,y:X.y-T,width:X.width,height:T+1},P.rect={x:X.x,y:X.y-T,width:X.width,height:X.height+T}}W._40O(P,C("group.border.width")/2)}else dk.superClass._3O.call(W)},getPosition:function(T,B,z,J){var X=this._88I;if(X){var c=Or(T,X.rect,J);return c.x+=B,c.y+=z,c}return dk.superClass.getPosition.apply(this,arguments)},_24O:function(o,d){var C=this._88I;(!C||C.type||"label2"===o)&&dk.superClass._24O.call(this,o,d)},_80o:function(Z){var P=this,V=P._88I;if(V){var q=P._data,s=P.s,Q=P.gv,c=V.type,_=V.rect,T=V._64o,C=V.titleRect,u=P.getBodyColor(),f=Em(s("group.image"),u),Y=s("group.image.stretch"),z=P.getBodyColor("group.background"),S=Em(s("group.repeat.image"),u),n=s("group.gradient"),F=s("group.gradient.color"),d=s("group.depth");if(c){var D=s("group.border.pattern"),a=s("group.border.width"),h=Z.lineJoin,O=Z.lineCap;if(Z.lineJoin=s("group.border.join"),Z.lineCap=s("group.border.cap"),f){if(Z.save(),Yl(Z,c,_),Z.clip(),bj(Z,f,Y,_.x,_.y,_.width,_.height,q,Q,u),Z.restore(),a>0){var L=rq(Z,D);Yl(L,c,_),Z.lineWidth=a,Z.strokeStyle=s("group.border.color"),Z.stroke(),vg(Z,D)}}else{var L=rq(Z,D);z||S?(S?Yi(Z,S):Rr(Z,z,n,F,_),Yl(Z,c,_),Z.fill(),Z!==L&&Yl(L,c,_)):Yl(L,c,_),a>0&&(Z.lineWidth=a,Z.strokeStyle=s("group.border.color"),Z.stroke()),vg(Z,D),c===Kf&&Kd(Z,z,d,_)}Z.lineJoin=h,Z.lineCap=O}else if(f?bj(Z,f,Y,T.x,T.y,T.width,T.height,q,Q,P.getBodyColor()):(z||S)&&(S?Yi(Z,S):Rr(Z,z,n,F,T),Yl(Z,Kf,T),Z.fill(),Kd(Z,z,d,T)),C){var N=s("group.title.background");Vi(Z,C.x,C.y,C.width,C.height,N),Kd(Z,N,d,C)}P._39O(Z,V)}else dk.superClass._80o.call(P,Z)}});var ih=function(H,j){kd(ih,this,[H,j])};qn(ih,pc,{_3O:function(){var D=this,o=D._data,Y=D.s,q=D.gv,L=o.getPoints(),i=q.getBorderColor(o),f=i?Y("border.width"):0,A=D._2o(),k=Y("shape.border.width"),t=o.getRect(),p=q.getBodyColor(o),O=D._99o=L.isEmpty()?m:{rect:t,rotation:o.getRotation(),position:o.p(),points:L,segments:o.getSegments(),bodyColor:p,borderColor:i,borderWidth:f,_94o:Y("shape.border.3d"),_95o:Y("shape.border.3d.color"),_96o:Y("shape.border.3d.accuracy"),_97o:A?Y("select.color"):m,selectWidth:A,_53o:Y("shape.background"),_27Q:Em(Y("shape.repeat.image"),p),_54o:k,_55o:Y("shape.border.color"),shapeGradient:Y("shape.gradient"),_59o:Y("shape.gradient.color"),_60o:Y("shape.border.pattern"),_61o:Y("shape.border.cap"),_62o:Y("shape.border.join")};if(O){var N=k/2+f+A;N&&(t=qj(t),Pm(t,N,O._62o)),D._68o(t)}},getPosition:function(k,S,v,r){var I=this._99o;if(I){var y=Or(k,I.rect,r);return y.x+=S,y.y+=v,y}return po},_42:function(S){this._99o&&ih.superClass._42.call(this,S)},_80o:function(c){var u,$=this,r=$.s,y=$._99o,D=y.position,l=y.rotation,x=y.bodyColor,m=y.borderWidth,F=y.selectWidth,V=y._53o,b=y._27Q,P=y._54o,T=y.points,e=y.segments,d=$._data.isClosePath();l&&(c.save(),Hm(c,D.x,D.y),Ji(c,l),Hm(c,-D.x,-D.y));var t=y._60o,H=rq(c,t),J=c.lineJoin,j=c.lineCap;if(c.lineJoin=y._62o,c.lineCap=y._61o,V||b?(b?Yi(c,b):(u=x?x:V,Rr(c,u,y.shapeGradient,y._59o,y.rect)),tn(c,T,e,d),c.fill(),H!==c&&tn(H,T,e,d)):tn(H,T,e,d),F&&(c.strokeStyle=y._97o,c.lineWidth=P+2*(m+F),c.stroke()),m&&(c.strokeStyle=y.borderColor,c.lineWidth=P+2*m,c.stroke()),P&&(u=y._55o,!V&&x&&(u=x),c.strokeStyle=u,c.lineWidth=P,c.stroke(),y._94o&&kn(c,u,y._95o,P,$.gv._zoom,y._96o)),vg(c,t),r("shape.dash")){var a=r("shape.dash.width")||P;if(a>0){t=r("shape.dash.pattern");var H=rq(c,t,$._2Q("shape.dash.offset"));H!==c&&tn(H,T,e,d),$._1Q(c,"shape",a,t)}}c.lineJoin=J,c.lineCap=j,l&&c.restore()},_48O:function(){var N=this;if(ih.superClass._48O.call(N),N._55O._43O){var V=N._data.getRect();xq(V,N.gv.getEditPointSize()/2+2),N._68o(V)}},_47O:function(U){var T=this;if(ih.superClass._47O.call(T,U),T._55O._43O){var V=T.gv,H=V.getEditPointSize()/2;U.fillStyle=V.getEditPointBackground(),U.strokeStyle=V.getEditPointBorderColor(),U.lineWidth=1,T._data.getPoints().each(function(G){U.beginPath(),U.arc(G.x,G.y,H,0,X,!0),U.fill(),U.stroke()})}}});var mb=function(J,t){kd(mb,this,[J,t])};qn(mb,ih,{getRotation:function(X,V,H){X=X||0;var h=this._data.getPoints(),x=h.size();return x>1?Se[H]?x&&0===x%2?pn(h.get(x/2-1),h.get(x/2),V,X):X:lh[H]?pn(h.get(0),h.get(1),V,X):pn(h.get(x-2),h.get(x-1),V,X):X},getPosition:function(p,K,E,W,O){var r=this._data.getPoints(),M=r.size();if(M>1){if(Se[p]){var g=M%2;if(0===g)return Qp(r.get(M/2-1),r.get(M/2),p,K,E,W,O);var e=r.get((M-g)/2),w={x:e.x,y:e.y,width:0,height:0};return e=Or(p,w,W),e.x+=K,e.y+=E,e}return lh[p]?Qp(r.get(0),r.get(1),p,K,E,W,O):Qp(r.get(M-2),r.get(M-1),p,K,E,W,O)}return po}});var Sj=function(l,q){kd(Sj,this,[l,q])};qn(Sj,pc,{_3O:function(){var p=this;Sj.superClass._3O.call(p);var K=p.s,Q=p._83o;p._82o=Q.img||Q.shape?m:{background:p.getBodyColor("grid.background"),depth:K("grid.depth"),rect:Q.rect,_88o:K("grid.cell.depth"),cellBorderColor:K("grid.cell.border.color"),_89o:K("grid.row.count"),_90o:K("grid.column.count"),block:K("grid.block"),_91o:K("grid.block.color"),_92o:K("grid.block.padding"),_93o:K("grid.block.width")}},_80o:function(Y){var x=this,G=x._82o;if(!G)return Sj.superClass._80o.call(x,Y),void 0;var B,J,v=x._data,Q=G.background,N=G.rect,A=G.block,X=G._91o,U=G._92o,n=G._93o,S=G._88o,j=G.cellBorderColor,P=G._89o,y=G._90o;if(Q)if(Vi(Y,N.x,N.y,N.width,N.height,Q),Kd(Y,Q,G.depth,N),S)for(B=0;P>B;B++)for(J=0;y>J;J++)N=v.getCellRect(B,J),N&&Kd(Y,Q,S,N);else if(j){for(Y.beginPath(),B=0;P>B;B++)for(J=0;y>J;J++)N=v.getCellRect(B,J),N&&Y.rect(N.x,N.y,N.width,N.height);Y.strokeStyle=j,Y.lineWidth=1,Y.stroke()}if("h"===A)for(B=0;P>B;B++)N=ml(v.getCellRect(B,0),v.getCellRect(B,y-1)),xq(N,U),Mr(Y,X,N.x,N.y,N.width,N.height,n);else if("v"===A)for(J=0;y>J;J++)N=ml(v.getCellRect(0,J),v.getCellRect(P-1,J)),xq(N,U),Mr(Y,X,N.x,N.y,N.width,N.height,n);x._39O(Y,x._83o)}});var tk=gk.Interactor=function(Z){this.gv=this._graphView=Z};Fm("Interactor",$,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(R){this.gv.fi(R)},setCursor:function(D){q||(this.getView().style.cursor=D)},startDragging:function(h){var l=this;l._lastClientPoint=Pk(h),l._lastLogicalPoint=l.gv.lp(h),yo(l,h)},clearDragging:function(){var b=this;b._lastClientPoint=b._lastLogicalPoint=b._logicalPoint=m},autoScroll:function(S){return this.gv.autoScroll(S,this._lastClientPoint)}});var oo=gk.DefaultInteractor=function(y){kd(oo,this,[y])};Fm("DefaultInteractor",tk,{handle_mousedown:function(M){xf(M);var S=this,o=S.gv,V=o.getDataAt(M);o.setFocus(M)&&!o._editing&&(Ql(M)?o.handleDoubleClick(M,V):o.handleClick(M,V),o.isPannable()&&!V&&Kh(M)&&!Bd(M)&&(S._tx=o.tx(),S._ty=o.ty(),S.startDragging(M)))},handleWindowMouseUp:function(_){var b=this,T=b.gv;T._panning&&(delete T._panning,T.onPanEnded(),b.fi({kind:"endPan",event:_})),delete b._tx,delete b._ty,b.clearDragging()},handle_mousemove:function(H){var $=this,V=$.gv;$._hoverTimer&&(U($._hoverTimer),delete $._hoverTimer),$._hoverTimer=f(function(){$.fi({kind:"hover",event:H}),U($._hoverTimer),delete $._hoverTimer},V.getHoverDelay()||800)},handle_touchmove:function(S){this.handle_mousemove(S)},handleWindowMouseMove:function(t){var U=this,d=U.gv,W=U._lastClientPoint;U.fi({kind:d._panning?"betweenPan":"beginPan",event:t}),d._panning=1,d.setTranslate(U._tx+t.clientX-W.x,U._ty+t.clientY-W.y)},handle_mousewheel:function(J){this.gv.handleScroll(J,J.wheelDelta)},handle_DOMMouseScroll:function(s){2===s.axis&&this.gv.handleScroll(s,-s.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)}});var ph=gk.SelectInteractor=function(I){kd(ph,this,[I])};Fm("SelectInteractor",tk,{_42:function(){var S=this,R=S.gv,z=R.getZoom(),u=S.mark,T=S.div;T||(T=S.div=fq(),If(S.getView(),T));var P={};P.x=u.x*z+R.tx(),P.y=u.y*z+R.ty(),P.width=u.width*z,P.height=u.height*z,Sq(T,P),this.intersects()?(T.style.border="",T.style.background=R.getRectSelectBackground()):(T.style.background="",T.style.border="1px solid "+R.getRectSelectBorderColor())},handle_mousedown:function(L){var S=this,v=S.gv;if(S._57I=m,!v._editing){var $=v.getDataAt(L),x=v.sm();$?Bd(L)?x.co($)?x.rs($):x.as($):x.co($)||x.ss($):Bd(L)||!v.isPannable()?Kh(L)&&(Bd(L)||x.cs(),v.isRectSelectable()&&(S.startDragging(L),v._77O=1)):S._57I=Pk(L)}},handle_mouseup:function(w){var Y=this,t=Y._57I;t&&(Dj(t,Pk(w))<=1&&Y.gv.sm().cs(),Y._57I=m)},handleWindowMouseUp:function(X){this.clear(X)},handleWindowMouseMove:function(e){var E=this,U=E.gv;E._logicalPoint=U.lp(e),E.mark?(E.fi({kind:"betweenRectSelect",event:e}),E.autoScroll(e),E.redraw()):E.fi({kind:"beginRectSelect",event:e}),E.mark=wb(E._lastLogicalPoint,E._logicalPoint),E.redraw()},intersects:function(){var D=this,y=D._lastLogicalPoint,N=D._logicalPoint;return y.x>N.x||y.y>N.y},clear:function(D){var W=this,l=W.gv,N=W.mark;if(W._57I=m,W._lastLogicalPoint){if(N){if(0!==N.width&&0!==N.height){var h=l.getDatasInRect(N,W.intersects());if(!h.isEmpty()){var w=l.sm(),T=w.toSelection();h.each(function(C){w.co(C)?T.remove(C):T.add(C)}),w.ss(T)}}Cs(W.div),delete W.div,delete W.mark,W.redraw(),W.fi({kind:"endRectSelect",event:D}),l.onRectSelectEnded()}W.clearDragging(),delete l._77O}},redraw:function(){var Q=this;Q._draw||(Q._draw=1,f(function(){Q.mark&&Q._42(),delete Q._draw},16))}});var $c=gk.MoveInteractor=function(N){kd($c,this,[N])};Fm("MoveInteractor",tk,{handle_mousedown:function(Q){var C=this,V=C.gv;if(Kh(Q)&&!V._editing){var d=V.getSelectedDataAt(Q);d?(C._data=d,V.handleMouseDown&&V.handleMouseDown(Q,d),C.startDragging(Q),V.isMovable(d)&&(V._moving=1)):V._focusData=m}},handleWindowMouseUp:function(H){var G=this,p=G.gv;p.handleMouseUp&&p.handleMouseUp(H,G._data),G.clear(H)},handleWindowMouseMove:function(T){var a=this,u=a.gv,t=a._data,M=u.getDataModel(),Z=M.getHistoryManager();if((!u._93O||!u._93O(T,t))&&u._moving){var J=a._logicalPoint?"betweenMove":"beginMove",s={kind:J,event:T},F=a._logicalPoint=u.lp(T);Z&&"beginMove"===J&&Z.beginInteraction();var b=F.x-a._lastLogicalPoint.x,A=F.y-a._lastLogicalPoint.y,G=u.getMoveMode(T,t);G&&("x"===G?A=0:"y"===G?b=0:"xy"!==G&&(b=A=0)),u.moveSelection(b,A),a._lastLogicalPoint=F,a.autoScroll(T),a.fi(s)}},clear:function(T){var D=this,$=D.gv,v=$.getDataModel(),t=v.getHistoryManager();D._lastLogicalPoint&&(D._lastLogicalPoint=D._data=$._moving=m,D._logicalPoint&&(D.fi({kind:"endMove",event:T}),$.onMoveEnded(),t&&t.endInteraction()),D.clearDragging())}});var fb=gk.EditInteractor=function(y){kd(fb,this,[y])};Fm("EditInteractor",tk,{ms_edit:1,setUp:function(){var K=this;fb.superClass.setUp.call(K),q||K.gv.setEditInteractor(K)},tearDown:function(){fb.superClass.tearDown.call(this),q||this.gv.setEditInteractor(m)},clear:function(){var p=this,N=p.gv;N._editing&&(N._editing=p._77I=p._node=p._edge=p._shape=p._rect=p._89I=p._index=m,p.clearDragging(),p.setCursor(x))},handle_mousedown:function(N){var o=this,y=o.gv.dm(),K=y.getHistoryManager(),q=o._index,s=o._node,g=o._shape,f=o._edge,H=o._77I,d=o._89I;Kh(N)&&o.gv._editing&&(s&&d?(o._rect=s.getRect(),o.startDragging(N),K&&K.beginInteraction(),o.fi({kind:"beginEditRect",event:N,data:s,direction:d})):g&&q>=0?(o.startDragging(N),K&&K.beginInteraction(),o.fi({kind:"beginEditPoint",event:N,data:g,index:q})):f&&q>=0?(o.startDragging(N),K&&K.beginInteraction(),o.fi({kind:"beginEditPoint",event:N,data:f,index:q})):H&&(o.startDragging(N),K&&K.beginInteraction(),o.fi({kind:"beginEditRotation",event:N,data:H})))},handleWindowMouseUp:function(R){this._46O(R),this.clear()},handleWindowMouseMove:function(V){this._78I(V)},handle_mousemove:function(s){if(!Aj){var e=this,C=e.gv;e._79I(s,C.getSelectedDataAt(s))?C._editing=1:e.clear()}}});var Rk=gk.TouchInteractor=function(Z,O){O=O||{},O.selectable===E&&(O.selectable=!0),O.movable===E&&(O.movable=!0),O.pannable===E&&(O.pannable=!0),O.pinchable===E&&(O.pinchable=!0),O.editable===E&&(O.editable=!0),this.params=O,kd(Rk,this,[Z])};Fm("TouchInteractor",tk,{ms_edit:1,setUp:function(){var A=this;Rk.superClass.setUp.call(A),q&&A.params.editable&&A.gv.setEditInteractor(A)},tearDown:function(){var t=this;Rk.superClass.tearDown.call(t),q&&t.params.editable&&t.gv.setEditInteractor(m)},clear:function(g){var H=this,$=H.gv,R=$.dm().getHistoryManager();$._moving&&(H.fi({kind:"endMove",event:g}),delete $._moving,$.onMoveEnded(),R&&R.endInteraction()),$._panning&&(H.fi({kind:"endPan",event:g}),delete $._panning,$.onPanEnded()),$._pinching&&(H.fi({kind:"endPinch",event:g}),delete $._pinching,$.onPinchEnded()),$._editing&&(H._46O(g),H._77I=H._node=H._edge=H._shape=H._rect=H._89I=H._index=$._editing=m),H._moving=H._panning=H._pinching=H._editing=H._57I=H._data=H._beginHistory=m,H.clearDragging()},handle_touchstart:function(e){var _=this;if(!_.gv._editing){xf(e),_._57I=m;var W=_.params,Q=_.gv,X=Q.sm(),K=Q.getDataAt(e),l=hb(e);if(1===l)Ql(e)?Q.handleDoubleClick(e,K):(Q.handleClick(e,K),K&&(Q.handleMouseDown&&Q.handleMouseDown(e,K),_._data=K)),W.selectable||(K=m),K?(X.co(K)||X.ss(K),W.editable&&Q.isEditable(K)&&_._79I(e,K,!0)?(_._editing=1,_.startDragging(e)):W.movable&&Q.isMovable(K)&&(_._moving=1,_.startDragging(e))):(_._57I=Pk(e),W.pannable&&Q.isPannable()&&(_._panning=1,_.startDragging(e),_._translate={x:Q.tx(),y:Q.ty()}));else if(W.pinchable&&2===l){_._pinching=1,_.startDragging(e);var M=Q.getView(),i=Q.getZoom(),D=M.getBoundingClientRect(),V=e.touches[0],d=e.touches[1],U={x:(V.clientX+d.clientX)/2-D.left,y:(V.clientY+d.clientY)/2-D.top};U.x-=Q.tx(),U.y-=Q.ty(),U.x/=i,U.y/=i,_._p=U,_._d=sg(e)}}},handle_touchend:function(i){var g=this,Y=g.gv,y=g._57I,A=g._data;y&&(Dj(y,Pk(i))<=1&&Y.sm().cs(),g._57I=m),A&&Y.handleMouseUp&&Y.handleMouseUp(i,A)},handleWindowTouchEnd:function(A){this.clear(A)},handleWindowTouchMove:function(c){var m=this,F=m.gv,v=F.dm().getHistoryManager(),$=hb(c);if(1===$){if(m._editing&&(v&&!m._beginHistory&&(m._beginHistory=1,v.beginInteraction()),F._editing=1,m._78I(c)),m._moving)v&&!m._beginHistory&&(m._beginHistory=1,v.beginInteraction()),m.handleMove(c);else if(m._panning){var U=Pk(c);F.setTranslate(m._translate.x+U.x-m._lastClientPoint.x,m._translate.y+U.y-m._lastClientPoint.y),m.fi({kind:F._panning?"betweenPan":"beginPan",event:c}),F._panning=1}}else if(2===$&&m._pinching){var P=sg(c);F.handlePinch(m._p,P,m._d),m._d=P,m.fi({kind:F._pinching?"betweenPinch":"beginPinch",event:c}),F._pinching=1}},handleMove:function(p){var N=this,i=N.gv,$=i.lp(p);i._93O&&i._93O(p,N._data)||(i.moveSelection($.x-N._lastLogicalPoint.x,$.y-N._lastLogicalPoint.y),N._lastLogicalPoint=$,N.autoScroll(p),N.fi({kind:i._moving?"betweenMove":"beginMove",event:p}),i._moving=1)}});var Mf="directional",Eq="point",Ic="spot",lr="light.color";cg(e,{graph3dViewAttributes:m,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:s/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Xo,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:s/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:function(n,$){hn[n]=$},getShape3dModel:function(H){return hn[H]},createMatrix:function(e,y){we(e)||(e=[e]);for(var A=e.length-1;A>=0;A--){var o=e[A];y=wq(o.mat,o.s3,o.r3,o.rotationMode,o.t3,y)}return y},transformVec:function(e,D){return Nf(e,D)},createBoxModel:function(){return{vs:zo,ns:ce,uv:yl,is:Ij}},createRoundRectModel:function(E,x){return fi.roundRect(E,x)},createStarModel:function(A,F){return fi.star(A,F)},createRectModel:function(h,O){return fi.rect(h,O)},createTriangleModel:function(p,G){return fi.triangle(p,G)},createRightTriangleModel:function(N,Z){return fi.rightTriangle(N,Z)},createParallelogramModel:function(v,Y){return fi.parallelogram(v,Y)},createTrapezoidModel:function(m,p){return fi.trapezoid(m,p)},createSmoothSphereModel:function(H,R,d,g,j,n,P){return Ab(new Qg(H,R,d,g,j,n,P))},createSphereModel:function(Q,h,g,B,C,N){return Q?Ag(Q,h,g,B,C,N):e.createSmoothSphereModel()},createSmoothConeModel:function(e,q,A,p,x){return aq(e,q,A,p,x)},createConeModel:function(D,Y,w,o,z,T){return D?uo(D,Y,w,o,z,T):aq(T)},createSmoothCylinderModel:function(R,m,G,A,C,o,q,L){return Ab(new ao(R,m,G,A,C,o,q,L))},createCylinderModel:function(V,S,e,W,P,c,k){return V?id(V,S,e,W,P,c,k):Vj(c,k)},createSmoothTorusModel:function(p,Q,O,U,b,x){return Ab(new Nl(p,Q,O,U,b,x))},createTorusModel:function(G,i,s,L,t,H,f){return G?Gb(G,i,s,L,t,H,f):Md(H,f)},createExtrusionModel:function($,B,y,X,n,F,a,v){return rm($,B,y,X,n,F,a,v)},createSmoothRingModel:function($,R,w,l,B,c){for(var H=[],j=0;j<$.length-1;j+=2)H.push({x:$[j],y:$[j+1]});for($=wj(H,R,w)[0],H=[],j=0;j<$.length;j++){var v=$[j];H.push(new Vr(v.x,0,v.y))}return Ab(new yh(H,c,l,B))},createRingModel:function(I,F,P,T,d,S,t,G,Z,p){for(var w=[],B=0;B<I.length-1;B+=2)w.push({x:I[B],y:I[B+1]});S=S||e.shapeSide,t=t||0,G=G||S;var L,n,i,M,Y,u,Q,N,C,R,B,g,z,O,x,K,o,h,b=[],a=[],_=Z?[]:m,r=Z?[]:m,E=p?[]:m,j=p?[]:m,W=T?[]:m,y=T?[]:m,s=d?[]:m,f=d?[]:m,I=wj(w,F,P),v=Dl(I),A=0,D=2*Math.PI/S;return I.forEach(function(H){if(i=H.length,i>1){if(M=H[0],T)for(u=M.x,N=M.y,B=t;G>B;B++)g=B+1,z=B*D,O=g*D,x=V(z),K=l(z),o=V(O),h=l(O),W.push(x*u,N,-K*u,o*u,N,-h*u,0,N,0),y.push(.5-.5*x,.5-.5*K,.5-.5*o,.5-.5*h,.5,.5);for(R=0;i>R;R++){for(Y=H[R],u=M.x,Q=Y.x,N=M.y,C=Y.y,L=A/v,A+=Dj(M,Y),n=A/v,B=t;G>B;B++)g=B+1,z=B*D,O=g*D,x=V(z),K=l(z),o=V(O),h=l(O),b.push(x*Q,C,-K*Q,o*Q,C,-h*Q,x*u,N,-K*u,o*Q,C,-h*Q,o*u,N,-h*u,x*u,N,-K*u),a.push(B/S,n,g/S,n,B/S,L,g/S,n,g/S,L,B/S,L),Z&&B===t&&(_.push(0,N,0,0,C,0,x*Q,C,-K*Q,x*Q,C,-K*Q,x*u,N,-K*u,0,N,0),r.push(0,.5-N,0,.5-C,2*Q,.5-C,2*Q,.5-C,2*u,.5-N,0,.5-N)),p&&g===G&&(E.push(0,N,0,o*Q,C,-h*Q,0,C,0,o*Q,C,-h*Q,0,N,0,o*u,N,-h*u),j.push(1,.5-N,1-2*Q,.5-C,1,.5-C,1-2*Q,.5-C,1,.5-N,1-2*u,.5-N));M=Y}if(d)for(u=M.x,N=M.y,B=t;G>B;B++)g=B+1,z=B*D,O=g*D,x=V(z),K=l(z),o=V(O),h=l(O),s.push(o*u,N,-h*u,x*u,N,-K*u,0,N,0),f.push(.5-.5*o,.5+.5*h,.5-.5*x,.5+.5*K,.5,.5)}}),{vs:b,uv:a,bottom_vs:s,bottom_uv:f,top_vs:W,top_uv:y,from_vs:_,from_uv:r,to_vs:E,to_uv:j}}},!0),cg(H,{"3d.move.mode":E,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":E,"edge.gradient.color":E,"edge.source.t3":E,"edge.target.t3":E,"light.type":Eq,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":s/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":yj,"wf.short":!1,"wf.mat":E,batch:E,"transparent.mask":!1,brightness:E,"select.brightness":.7,"repeat.uv.length":E,"label.face":a,"label.t3":E,"label.r3":E,"label.texture.scale":2,"label.rotationMode":ok,"label.light":!1,"label.blend":E,"label.reverse.flip":!1,"label.reverse.color":Qk,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":a,"label2.t3":E,"label2.r3":E,"label2.texture.scale":2,"label2.rotationMode":ok,"label2.light":!1,"label2.blend":E,"label2.reverse.flip":!1,"label2.reverse.color":Qk,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":a,"note.t3":E,"note.r3":E,"note.texture.scale":2,"note.rotationMode":ok,"note.light":!1,"note.blend":E,"note.reverse.flip":!1,"note.reverse.color":Qk,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":a,"note2.t3":E,"note2.r3":E,"note2.texture.scale":2,"note2.rotationMode":ok,"note2.light":!1,"note2.blend":E,"note2.reverse.flip":!1,"note2.reverse.color":Qk,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:E,"shape3d.color":Vc,"shape3d.top.color":E,"shape3d.bottom.color":E,"shape3d.from.color":E,"shape3d.to.color":E,"shape3d.image":E,"shape3d.top.image":E,"shape3d.bottom.image":E,"shape3d.from.image":E,"shape3d.to.image":E,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":E,"shape3d.side.to":E,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":E,"shape3d.opacity":E,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Qk,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":E,"shape3d.uv.scale":E,"shape3d.top.uv.offset":E,"shape3d.top.uv.scale":E,"shape3d.bottom.uv.offset":E,"shape3d.bottom.uv.scale":E,"shape3d.from.uv.offset":E,"shape3d.from.uv.scale":E,"shape3d.to.uv.offset":E,"shape3d.to.uv.scale":E,"shape3d.top.cap":E,"shape3d.bottom.cap":E,"shape3d.start.angle":0,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":Vc,"all.image":E,"all.blend":E,"all.opacity":E,"all.reverse.flip":!1,"all.reverse.color":Qk,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":E,"all.uv.offset":E,"all.uv.scale":E,"all.discard.selectable":!0,mat:E,"left.mat":E,"right.mat":E,"top.mat":E,"bottom.mat":E,"front.mat":E,"back.mat":E},!0);
var Il,yb=!1,Ej=[0,0,0,1/255],Jf={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:j,2:O,3:Jg,4:He,5:a,6:B}},Jr=function(w,n,t,M){if(n.getFaceVisible(w,t)){ko(n,Fh(w,n.getFaceMat(w,t)||n.getMat(w)));var i=n._26I;n.getFaceReverseCull(w,t)?i.enable(i.CULL_FACE):i.disable(i.CULL_FACE),Yk(i,n._prg.uFixPickReverseColor,Jf[t]),ei(i,M,6),Al(n)}},Gh=function(H){return H instanceof mn},Vg=function(N){return[N.x,N.e||0,N.y]},Qi=function(i,h,e){for(var h=ds(h),O=h[0],H=h[1],x=h[2];e--;)i.push(O,H,x)},Jn=function(z,n,u){for(var n=ds(n),f=n[0],x=n[1],c=n[2],N=n[3];u--;)z.push(f,x,c,N)},Ni=function(D,v,I){if(v)for(var P,g,Z,W=v[0],c=v[1],y=v[2],K=v[4],T=v[5],t=v[6],n=v[8],o=v[9],$=v[10],R=v[12],L=v[13],B=v[14],a=I.length,r=0,r=0;a>r;r+=3)P=I[r],g=I[r+1],Z=I[r+2],D.push(W*P+K*g+n*Z+R,c*P+T*g+o*Z+L,y*P+t*g+$*Z+B);else jp(D,I)},Np=function(e,i){var D=i.s("light.intensity"),W=ds(i.s(lr)),r=W[0],n=W[1],S=W[2];1!==D&&(r*=D,n*=D,S*=D),e.push(r,n,S,i.s("light.disabled")?1:0)},qs=function(G,S,t){Yk(S,t.uHeadlightRange,G._headlightRange);var X=G._headlightIntensity,i=ds(G._headlightColor);1!==X&&(i=[i[0]*X,i[1]*X,i[2]*X]),Yk(S,t.uHeadlightColor,[i[0],i[1],i[2],G._headlightDisabled?1:0]);var m=G._59O,s=G._spots,H=G._dirs;if(m.length){var K=[],v=[],W=[];m.forEach(function(S){Np(K,S),jp(v,S.p3()),W.push(S.s("light.range"))}),S.uniform4fv(t.uPointColor,K),S.uniform1fv(t.uPointRange,W),S.uniform3fv(t.uPointPosition,v)}if(s.length){var J=[],R=[],Q=[],b=[],L=[],k=[];s.forEach(function(p){Np(J,p),jp(R,p.p3()),jp(Q,p.s("light.center")),b.push(p.s("light.range")),L.push(V(p.s("light.angle")/2)),k.push(p.s("light.exponent"))}),S.uniform4fv(t.uSpotColor,J),S.uniform1fv(t.uSpotRange,b),S.uniform1fv(t.uSpotAngle,L),S.uniform1fv(t.uSpotExponent,k),S.uniform3fv(t.uSpotPosition,R),S.uniform3fv(t.uSpotCenter,Q)}if(H.length){var n=[],z=[];H.forEach(function(f){Np(n,f),jp(z,f.p3())}),S.uniform4fv(t.uDirColor,n),S.uniform3fv(t.uDirPosition,z)}},dc=function(G){return G>0&&0===(G-1&G)},Yb=function(n){return n=k(0,_(s,n)),n=k(Rp,_(s-Rp,n))},Uk=function(){return.05+C()/2},jf=function(l,e,W,f){var r,q=l.getEye();return l.isOrtho()?(r=qd(l.getCenter(),q),r[0]+=f[0],r[1]+=f[1],r[2]+=f[2]):r=q,Wq(e,W,f,r)},Wq=function(k,h,C,E){var I=En(k,h),z=qd(E,C,!0),O=En(z,h);if(Y(O)<Rp)return m;var Z=(I-En(C,h))/O;return[C[0]+z[0]*Z,C[1]+z[1]*Z,C[2]+z[2]*Z]},co=function(A,u){return{x:2*A.x-u.x,y:2*A.y-u.y}},ke=function(f,i,o,Q){var h,M;if(!f)return h=P(i.y-o.y,o.x-i.x),{x:i.x+Q*l(h),y:i.y+Q*V(h)};if(!o)return h=P(f.y-i.y,i.x-f.x),{x:i.x+Q*l(h),y:i.y+Q*V(h)};var R=qd([f.x,f.y,0],[i.x,i.y,0],!0),X=qd([o.x,o.y,0],[i.x,i.y,0],!0),N=-(R[0]+X[0])/2,W=-(R[1]+X[1])/2,A=n(N*N+W*W);return Rp>A?(h=P(f.y-i.y,i.x-f.x),{x:i.x+Q*l(h),y:i.y+Q*V(h)}):(h=u(En(R,X))/2,M=R[1]*X[0]-R[0]*X[1]>0?-1:1,N/=A,W/=A,A=Q/l(h),{x:i.x+M*A*N,y:i.y+M*A*W})},$j=function(W){var n=W[1],v=W[2],B=W[3],j=W[6],A=W[7],J=W[11];W[1]=W[4],W[2]=W[8],W[3]=W[12],W[4]=n,W[6]=W[9],W[7]=W[13],W[8]=v,W[9]=j,W[11]=W[14],W[12]=B,W[13]=A,W[14]=J},ki=function(c){var d=c[0],f=c[1],b=c[2],C=c[3],V=c[4],K=c[5],z=c[6],$=c[7],x=c[8],r=c[9],k=c[10],G=c[11],g=c[12],L=c[13],h=c[14],D=c[15],M=d*K-f*V,U=d*z-b*V,T=d*$-C*V,o=f*z-b*K,E=f*$-C*K,F=b*$-C*z,Z=x*L-r*g,w=x*h-k*g,W=x*D-G*g,q=r*h-k*L,R=r*D-G*L,v=k*D-G*h,I=M*v-U*R+T*q+o*W-E*w+F*Z;return I?(I=1/I,c[0]=(K*v-z*R+$*q)*I,c[1]=(b*R-f*v-C*q)*I,c[2]=(L*F-h*E+D*o)*I,c[3]=(k*E-r*F-G*o)*I,c[4]=(z*W-V*v-$*w)*I,c[5]=(d*v-b*W+C*w)*I,c[6]=(h*T-g*F-D*U)*I,c[7]=(x*F-k*T+G*U)*I,c[8]=(V*R-K*W+$*Z)*I,c[9]=(f*W-d*R-C*Z)*I,c[10]=(g*E-L*T+D*M)*I,c[11]=(r*T-x*E-G*M)*I,c[12]=(K*w-V*q-z*Z)*I,c[13]=(d*q-f*w+b*Z)*I,c[14]=(L*U-g*o-h*M)*I,c[15]=(x*o-r*U+k*M)*I,void 0):m},Gf=function(N,L){if(L){var r=L[0],E=L[1],V=L[2];N[12]=N[0]*r+N[4]*E+N[8]*V+N[12],N[13]=N[1]*r+N[5]*E+N[9]*V+N[13],N[14]=N[2]*r+N[6]*E+N[10]*V+N[14],N[15]=N[3]*r+N[7]*E+N[11]*V+N[15]}},kl=function(e,_){if(_){var t=_[0],b=_[1],F=_[2];e[0]=e[0]*t,e[1]=e[1]*t,e[2]=e[2]*t,e[3]=e[3]*t,e[4]=e[4]*b,e[5]=e[5]*b,e[6]=e[6]*b,e[7]=e[7]*b,e[8]=e[8]*F,e[9]=e[9]*F,e[10]=e[10]*F,e[11]=e[11]*F}},dh=function(k,i,M){var o=i[0],f=i[1],T=i[2],b=i[3],O=i[4],W=i[5],s=i[6],N=i[7],d=i[8],K=i[9],F=i[10],z=i[11],J=i[12],t=i[13],y=i[14],R=i[15],H=M[0],w=M[1],$=M[2],m=M[3];return k[0]=H*o+w*O+$*d+m*J,k[1]=H*f+w*W+$*K+m*t,k[2]=H*T+w*s+$*F+m*y,k[3]=H*b+w*N+$*z+m*R,H=M[4],w=M[5],$=M[6],m=M[7],k[4]=H*o+w*O+$*d+m*J,k[5]=H*f+w*W+$*K+m*t,k[6]=H*T+w*s+$*F+m*y,k[7]=H*b+w*N+$*z+m*R,H=M[8],w=M[9],$=M[10],m=M[11],k[8]=H*o+w*O+$*d+m*J,k[9]=H*f+w*W+$*K+m*t,k[10]=H*T+w*s+$*F+m*y,k[11]=H*b+w*N+$*z+m*R,H=M[12],w=M[13],$=M[14],m=M[15],k[12]=H*o+w*O+$*d+m*J,k[13]=H*f+w*W+$*K+m*t,k[14]=H*T+w*s+$*F+m*y,k[15]=H*b+w*N+$*z+m*R,k},rj=function(g,K,u,V){var O,S,Q,N,C,y,p,G,B,k,M=K[0],U=K[1],A=K[2],P=V[0],r=V[1],s=V[2],d=u[0],t=u[1],e=u[2];return Y(M-d)<Rp&&Y(U-t)<Rp&&Y(A-e)<Rp?$p(g):(p=M-d,G=U-t,B=A-e,k=1/n(p*p+G*G+B*B),p*=k,G*=k,B*=k,O=r*B-s*G,S=s*p-P*B,Q=P*G-r*p,k=n(O*O+S*S+Q*Q),k?(k=1/k,O*=k,S*=k,Q*=k):(O=0,S=0,Q=0),N=G*Q-B*S,C=B*O-p*Q,y=p*S-G*O,k=n(N*N+C*C+y*y),k?(k=1/k,N*=k,C*=k,y*=k):(N=0,C=0,y=0),g[0]=O,g[1]=N,g[2]=p,g[3]=0,g[4]=S,g[5]=C,g[6]=G,g[7]=0,g[8]=Q,g[9]=y,g[10]=B,g[11]=0,g[12]=-(O*M+S*U+Q*A),g[13]=-(N*M+C*U+y*A),g[14]=-(p*M+G*U+B*A),g[15]=1,g)},Kb=function(e,V,l,r,s){var U=1/A(V/2),j=1/(r-s);return e[0]=U/l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=U,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+r)*j,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*r*j,e[15]=0,e},nl=function(v,H,A,f,T,R,i){var p=1/(H-A),q=1/(f-T),s=1/(R-i);return v[0]=-2*p,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*q,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*s,v[11]=0,v[12]=(H+A)*p,v[13]=(T+f)*q,v[14]=(i+R)*s,v[15]=1,v},Gi=function(m,Y){return rj(Y?Y:mf(),m._eye,m._center,m._up)},br=function(d){var y=d.getAspect(),V=d._near,Q=d._far,j=mf();if(d._ortho){var s=d._orthoWidth/2,m=s/y;nl(j,-s,s,-m,m,V,Q)}else Kb(j,d._fovy,y,V,Q);return j},Eo=function(I,$){if(!I)return m;var s=0,H=1,v=2,S=[],Q=0,O=I.length,L=O/3;if($){for(;O>Q;Q++)S[Q]=0;for(Q=0;Q<$.length;Q+=3){var J=[],B=[],k=[];J[s]=I[3*$[Q+1]+s]-I[3*$[Q]+s],J[H]=I[3*$[Q+1]+H]-I[3*$[Q]+H],J[v]=I[3*$[Q+1]+v]-I[3*$[Q]+v],B[s]=I[3*$[Q+2]+s]-I[3*$[Q+1]+s],B[H]=I[3*$[Q+2]+H]-I[3*$[Q+1]+H],B[v]=I[3*$[Q+2]+v]-I[3*$[Q+1]+v],k[s]=J[H]*B[v]-J[v]*B[H],k[H]=J[v]*B[s]-J[s]*B[v],k[v]=J[s]*B[H]-J[H]*B[s];for(var w=0;3>w;w++)S[3*$[Q+w]+s]+=k[s],S[3*$[Q+w]+H]+=k[H],S[3*$[Q+w]+v]+=k[v]}}else for(Q=0;L>Q;Q+=3){var J=[],B=[],k=[];J[s]=I[3*(Q+1)+s]-I[3*Q+s],J[H]=I[3*(Q+1)+H]-I[3*Q+H],J[v]=I[3*(Q+1)+v]-I[3*Q+v],B[s]=I[3*(Q+2)+s]-I[3*(Q+1)+s],B[H]=I[3*(Q+2)+H]-I[3*(Q+1)+H],B[v]=I[3*(Q+2)+v]-I[3*(Q+1)+v],k[s]=J[H]*B[v]-J[v]*B[H],k[H]=J[v]*B[s]-J[s]*B[v],k[v]=J[s]*B[H]-J[H]*B[s];for(var w=0;3>w;w++)S[3*(Q+w)+s]=k[s],S[3*(Q+w)+H]=k[H],S[3*(Q+w)+v]=k[v]}for(Q=0;O>Q;Q+=3){var d=[];d[s]=S[Q+s],d[H]=S[Q+H],d[v]=S[Q+v];var Y=n(d[s]*d[s]+d[H]*d[H]+d[v]*d[v]);0===Y&&(Y=Rp),d[s]=d[s]/Y,d[H]=d[H]/Y,d[v]=d[v]/Y,S[Q+s]=d[s],S[Q+H]=d[H],S[Q+v]=d[v]}return new uf(S)},ss=function(t,h,b){if(b||(b=t.createTexture()),h){var E=t.TEXTURE_2D,R=t.LINEAR,H=t.REPEAT,w=t.CLAMP_TO_EDGE,F=t.TEXTURE_MIN_FILTER;ui(t,b),t.texImage2D(E,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,h),oq(t,t.TEXTURE_MAG_FILTER,R),dc(h.width)&&dc(h.height)?(oq(t,t.TEXTURE_WRAP_S,H),oq(t,t.TEXTURE_WRAP_T,H),oq(t,F,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(E)):(oq(t,t.TEXTURE_WRAP_S,w),oq(t,t.TEXTURE_WRAP_T,w),oq(t,F,R)),ui(t,m)}return b},Rq=function(G){G._26I&&G._prg&&(G._26I.deleteProgram(G._prg),G._prg=m)},mg=function(i,q,s,C){var p=i.createShader(s);return i.shaderSource(p,C),i.compileShader(p),i.attachShader(q,p),p},Cj=function(D){return D.createBuffer()},ui=function(H,d){H.bindTexture(H.TEXTURE_2D,d)},mj=function(C,I){C.bindFramebuffer(C.FRAMEBUFFER,I)},oq=function(F,U,G){F.texParameteri(F.TEXTURE_2D,U,G)},hi=function(I,B){if(B){var B=ds(B);I.clearColor(B[0],B[1],B[2],B[3])}},Mq=function(L,s){Yk(L,s.uFix,!0),gn(L,s.aNormal)},ik=function(I,A){Yk(I,A.uFix,!1),rd(I,A.aNormal)},Sm=function(y,Z,t,T,O,E,d,V){y._picking||(t?(Yk(y,Z.uBlend,!0),Yk(y,Z.uBlendColor,t)):Yk(y,Z.uBlend,!1),Yk(y,Z.uLight,T==m?!0:T),Gg(O)&&1!==O&&Yk(y,Z.uPartOpacity,O),Yk(y,Z.uReverseFlip,E==m?!1:E),Yk(y,Z.uFixPickReverseColor,d||Qk)),V?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE)},ps=function(m,h){m._picking||Yk(m,h.uPartOpacity,1)},kk=function(d,U,w,k,N,X,P,B){if(w){Yk(d,U.uTexture,!0),Yk(d,U.uDiscardSelectable,Ud(k)?k:!0),rd(d,U.aUv),sd(d,N,X,U.aUv,2),d.activeTexture(d.TEXTURE0),ui(d,w),d.uniform1i(U.uSampler,0);var $=[0,0,1,1];P&&($[0]=P[0],$[1]=P[1]),B&&($[2]=B[0],$[3]=B[1]),Yk(d,U.uOffsetScale,$)}},Lj=function(V,d,B){B&&(ui(V,m),gn(V,d.aUv),Yk(V,d.uTexture,!1))},ch=function(X,a,i,B,O,F){i&&!g&&X.lineWidth(i),B&&!X._picking&&Yk(X,a.uFixPickReverseColor,B),O&&sd(X,O,F,a.aPosition)},zq=function(c,T,y,P){Il&&(P=c[Il]),c.drawArrays(P==m?c.TRIANGLES:P,T,y)},ei=function(o,S,H,W){Il&&(W=o[Il]),o.drawElements(W==m?o.TRIANGLES:W,H,o.UNSIGNED_SHORT,S==m?0:2*S)},sd=function(e,j,d,Z,c){var $=e.ARRAY_BUFFER;e.bindBuffer($,j),d&&e.bufferData($,d,e.STATIC_DRAW),Z!=m&&e.vertexAttribPointer(Z,c?c:3,e.FLOAT,!1,0,0)},Zo=function(p,a,e){var W=p.ELEMENT_ARRAY_BUFFER;p.bindBuffer(W,a),e&&p.bufferData(W,e,p.STATIC_DRAW)},Yk=function(W,P,Q){if(Q!=m&&P!=m){Q=ds(Q);var T=Q.length;3===T?W.uniform3fv(P,Q):4===T?W.uniform4fv(P,Q):16===T?W.uniformMatrix4fv(P,!1,Q):Ud(Q)?W.uniform1i(P,Q?1:0):2===T?W.uniform2fv(P,Q):W.uniform1f(P,Q)}},rd=function(Y,R){R!=m&&R>=0&&Y.enableVertexAttribArray(R)},gn=function(x,Z){Z!=m&&Z>=0&&x.disableVertexAttribArray(Z)},Al=function(c,l){var x=c.getGL(),a=c._prg;c._7O=c._8O.pop(),l&&(Yk(x,a.uMVMatrix,c._7O),c._6O=l,Yk(x,a.uNMatrix,l))},mc=function(_,N){return N||(N=mf()),Cn(N,_),ki(N),$j(N),N},ko=function(O,C){var D=O.getGL(),y=O._prg,A=O._7O;C&&(O._8O.push(Cr(A)),dh(A,A,C)),Yk(D,y.uMVMatrix,A),Yk(D,y.uNMatrix,mc(A,O._6O))},Cc=function(o,B,t,V,g,k){if(t){if(V){var R=t.value++,Y=[(255&R>>24)/255,(255&R>>16)/255,(255&R>>8)/255,(255&R)/255];t[R]={data:g,part:k}}else Y=Ej;return Yk(o,B.uFixPickReverseColor,Y),Y}},fn=function(){var J={center:function(W,$,_,d,D){var O=$[1]/2,K={x:-$[0]/2,y:O,width:$[0],height:$[1]},C=Or(W,K,_);return[C.x+d,2*O-C.y-D,Uk()]},front:function(E,J,M,o,s){var B=J[1]/2,k={x:-J[0]/2,y:B,width:J[0],height:J[1]},l=Or(E,k,M);return[l.x+o,2*B-l.y-s,J[2]/2+Uk()]},back:function(r,Q,o,O,v){var F=Q[0]/2,c=Q[1]/2,E={x:F,y:c,width:Q[0],height:Q[1]},B=Or(r,E,o);return[2*F-B.x-O,2*c-B.y-v,-Q[2]/2-Uk()]},left:function(h,i,C,G,P){var B=i[1]/2,O={x:-i[2]/2,y:B,width:i[2],height:i[1]},M=Or(h,O,C);return[-i[0]/2-Uk(),2*B-M.y-P,M.x+G]},right:function(i,j,t,Z,n){var x=j[2]/2,f=j[1]/2,$={x:x,y:f,width:j[2],height:j[1]},z=Or(i,$,t);return[j[0]/2+Uk(),2*f-z.y-n,2*x-z.x-Z]},top:function(H,u,Y,I,l){var h={x:-u[0]/2,y:-u[2]/2,width:u[0],height:u[2]},W=Or(H,h,Y);return[W.x+I,u[1]/2+Uk(),W.y+l]},bottom:function(b,y,P,j,W){var L=y[2]/2,X={x:-y[0]/2,y:L,width:y[0],height:y[2]},U=Or(b,X,P);return[U.x+j,-y[1]/2-Uk(),2*L-U.y-W]}};return function(q,I,C,R,w,h){return J[R](q,I,C,w||0,h||0)}}(),ns=function(G,f,Y,d,m,R,o,g,Q,x){if(m&&(f[0]+=m[0],f[1]+=m[1],f[2]+=m[2]),Gf(G,Y),g){var F=mf();if(lp(F,Q,x),Nf(f,F),Gf(G,f),G.auto=g,G.pos=Nf([0,0,0],G),R){var n=G.mat2=mf();lp(n,R,o)}}else lp(G,Q,x),Gf(G,f),d===j?nb(G,-v):d===O?nb(G,v):d===Jg?ng(G,-v):d===He?ng(G,v):d===B&&nb(G,s),lp(G,R,o);return G},vc=function(j,c){var H=c.auto,A=c.mat2,X=j.gv;if(H){var B=qd(j.gv.getEye(),c.pos),b=mf();nb(b,s/2+P(-B[2],B[0])),"y"!==H&&ng(b,-P(B[1],n(B[2]*B[2]+B[0]*B[0]))),A&&dh(b,b,A),b=dh(mf(),c,b),ko(X,b)}else ko(X,c)},Pd=function(f,B,W,G,X){var p=f.s,E=f.gv,m=E.getGL(),w=E._prg,C=E._buffer,d=E._1O;ss(m,Sf,d),vc(f,W),Sm(m,w,p(B+".blend"),p(B+".light"),p(B+".opacity"),p(B+".reverse.flip"),p(B+".reverse.color"),p(B+".reverse.cull")),kk(m,w,d,X,C.uv,zp),sd(m,C.vs,G,w.aPosition),sd(m,C.ns,ti,w.aNormal),Zo(m,C.is,Xg),ei(m,0,Xg.length),Lj(m,w,d),ps(m,w),Al(E)},Zq=function(W,i,h){var V=W.gv,f=W.data,K=W[i]={blend:V.getBodyColor(f)||V.getFaceBlend(f,i),light:V.getFaceLight(f,i),color:V.getFaceColor(f,i),opacity:V.getFaceOpacity(f,i),transparent:V.getFaceTransparent(f,i),reverseFlip:V.getFaceReverseFlip(f,i),reverseColor:V.getFaceReverseColor(f,i),reverseCull:V.getFaceReverseCull(f,i),texture:V.getFaceImage(f,i),discardSelectable:V.getFaceDiscardSelectable(f,i)};if("csg"!==i){K.uv=V.getFaceUv(f,i)||h&&h[i+"Uv"],K.uvScale=V.getFaceUvScale(f,i)||h&&h[i+"UvScale"],K.uvOffset=V.getFaceUvOffset(f,i)||h&&h[i+"UvOffset"];var a=V.getFaceMat(f,i);a&&(K.mat=Fh(f,a))}return K},Mb=function(F,E,b,g,o){if(g){if(!o(g.transparent))return;var _=F.data,Y=F.gv,t=Y._buffer,O=Y.getTexture(g.texture,_);kk(E,b,O,g.discardSelectable,t.uv,g.tuv,g.uvOffset,g.uvScale),Sm(E,b,g.blend,g.light,g.opacity,g.reverseFlip,g.reverseColor,g.reverseCull),Yk(E,b.uDiffuse,g.color),sd(E,t.vs,g.vs,b.aPosition),sd(E,t.ns,g.ns,b.aNormal),zq(E,0,g.vs.length/3),ps(E,b),Lj(E,b,O)}},rc=function(z,d,U,n,E,s){var Y,K,x,g,S,Q,h,H,w,I,c,l=[n-d,E-U],e=z?z.length:0;for(x=0;e>x;x++){for(g=2,Y=z[x],S=Y[0],Q=Y[1];g+1<Y.length;){if(h=Y[g],H=Y[g+1],K=hs(d,U,n,E,S,Q,h,H,!0)){w=[h-S,H-Q],I=Dj(w),w[0]/=I,w[1]/=I,I=En(l,w),I=I>0?s:-s,c=[w[0]*I,w[1]*I];break}S=h,Q=H,g+=2}if(c)break}if(c)for(n=d+c[0],E=U+c[1],x=0;e>x;x++)for(g=2,Y=z[x],S=Y[0],Q=Y[1];g+1<Y.length;){if(h=Y[g],H=Y[g+1],K=hs(d,U,n,E,S,Q,h,H,!0))return[0,0];S=h,Q=H,g+=2}return c?c:[n-d,E-U]},Tq=I.graph3d={},qg=function(Z,N,S){qn(D+".graph3d."+Z,N,S)},bb="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~!gjeof$!~~<*^j]opjujtpQupqTw!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEupqTw<**1/2!-^j]sfuofDupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQupqTv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQupqTw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~<**1/2!-^j]opjujtpQuojpQv)5dfw!+!yjsubNxfjWv)4dfw!>!^j]opjujtpQuojpQw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<*opjujtpQsje!.!sfuofd)f{jmbnspo!>!^j]opjudfsjEsjEw<**1/2!-1/1!-1/1!-1/1)5dfw!+!yjsubNxfjWv)4dfw!>!sfuofd!4dfw<**1/2!-^j]opjujtpQsjEv)5dfw!+!yjsubNxfjWv)4dfw!>!opjujtpQsje!4dfw|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]sfuofDupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]opjujtpQsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",Sr="~~<eJ!>!spmpDhbsG`mh!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTw)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQw!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEw)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~<1/2!>!b/spmpDwv|ftmf~<esbdtje|*5/1!=!b/spmpDwv)gj|ftmf~~<esbdtje|*1/1!>>!b/spmpDwv)gj|*uofsbqtobsUv)gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTw!4dfw!hojzsbw<^UPQT`YBN]opjujtpQupqTw!4dfw!hojzsbw<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQw!4dfw!hojzsbw<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEw!4dfw!hojzsbw<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUv!mppc!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";cg(e,{setBatchInfo:function(G,d){me[G]=d},getBatchInfo:function(O){return me[O]}},!0);var rp=[1,1,1],go=[1,0,0,0,0,1,0,1,1,1,1,0],zj=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],ff=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Kr=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Ar=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],og=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Qm=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],vd=function(Z,V){Ec(Z,V),To(Z,V,"_wireframeModelMap","_wireframeIndexMap"),To(Z,V,"_polylineModelMap","_polylineIndexMap")},Ec=function(v,H){if(H){var k,m,e=H._id,G=v._33O,i=v._34O,S=i[e];if(S){m=S.batch,k=G[m];var n=S.begin,C=S.size,P=3*n,j=3*C,O=4*n,T=4*C,Z=k.vs,Q=k.uv,d=k.cs,W=k.bs,q=k.rs,z=k.ds,U=S.index;if(k.invalidate=!0,delete i[e],z.splice(U,1),eb(z))delete G[m];else{for(;U<z.length;U++)S=i[z[U]._id],S.index--,S.begin-=C;Z.splice(P,j),k.ns.splice(P,j),k.ps.splice(O,T),Q&&Q.splice(2*n,2*C),d&&d.splice(O,T),W&&W.splice(P,j),q&&q.splice(n,C)}}}else v._34O={},v._33O={}},To=function(T,f,h,e){if(f){var K,P,b=f._id,l=T[h],X=T[e],c=X[b];if(c){P=c.batch,K=l[P];var i=c.begin,U=c.size,t=3*i,n=3*U,x=4*i,o=4*U,Q=K.ds,R=c.index;if(K.invalidate=!0,delete X[b],Q.splice(R,1),eb(Q))delete l[P];else{for(;R<Q.length;R++)c=X[Q[R]._id],c.index--,c.begin-=U;K.vs.splice(t,n),K.cs.splice(x,o),K.ps.splice(x,o),K.ls&&K.ls.splice(i,U)}}}else T[h]={},T[e]={}},Iq=function(t,h,M,s){if(!s)return m;var c=h[s];if(!c){var V=me[s]||tl,D=V.image?[]:m;c=h[s]={vs:[],ns:[],uv:D,cs:D?m:V.color?m:[],bs:V.blend?[]:m,ps:[],rs:V.brightness?[]:m,ds:[]}}return c.invalidate=!0,t[M._id]={index:c.ds.length,begin:c.vs.length/3,batch:s},c.ds.push(M),c},Ed=function(N,G){return G!=m&&1!==G?[N[0]*G,N[1]*G,N[2]*G,N[3]]:N},Dg=function(h,V,s){var E=h.getBrightness(V),p=ds(s.color||"white"),Q=p[3]<1,X=Math.ceil(s.width)||1,y=(Q?"T":"O")+X,w=h._wireframeIndexMap,j=h._wireframeModelMap,A=j[y];A||(A=j[y]={vs:[],cs:[],ps:[],ds:[],T:Q,W:X}),A.invalidate=!0;var S=A.vs,k=A.cs,m=A.ds,f=w[V._id]={index:m.length,begin:S.length/3,batch:y};m.push(V),Ni(S,Fh(V,s.mat),s.short?nd:zd);var z=f.size=S.length/3-f.begin;Jn(k,Ed(p,E),z)},Rg=function(q,h,Z,n,y,j,v,o,V){var b=q.getBrightness(h);b==m&&(b=1);var E=Ed(ds(n),b),r=E[3]<1;j=Math.ceil(j)||1;var _=(r?"T":"O")+j;if(v){var t=v[0],G=(v[1]||t)+t;_+="-"+t+"-"+G,V&&(_+="-"+di(V)+"-"+b,V=Ed(ds(V),b))}var p=q._polylineIndexMap,P=q._polylineModelMap,k=P[_];k||(k=P[_]={vs:[],cs:[],ps:[],ds:[],ls:v?[]:m,T:r,W:j},v&&(k.D=t,k.G=G,k.A=V)),k.invalidate=!0;var T,K=k.vs,w=k.cs,S=k.ds,c=k.ls,C=p[h._id]={index:S.length,begin:K.length/3,batch:_};S.push(h),jp(K,Z);var e,D=C.size=K.length/3-C.begin,J=Z.length,Q=0,f=[];if(v||y)for(T=0;J>T;T+=6)e=Dj([Z[T],Z[T+1],Z[T+2]],[Z[T+3],Z[T+4],Z[T+5]]),f.push(e),Q+=e;if(Q&&y){var u,l=Ed(ds(y),b),g=[l[0]-E[0],l[1]-E[1],l[2]-E[2],l[3]-E[3]],W=0;for(T=0;J>T;T+=6)u=W/Q,Jn(w,[E[0]+g[0]*u,E[1]+g[1]*u,E[2]+g[2]*u,E[3]+g[3]*u],1),W+=f[T/6],u=W/Q,Jn(w,[E[0]+g[0]*u,E[1]+g[1]*u,E[2]+g[2]*u,E[3]+g[3]*u],1)}else Jn(w,E,D);if(v)for(W=o||0,T=0;J>T;T+=6)c.push(W),W+=f[T/6],c.push(W)},bi=function(M,J,C){if(J)for(var b=4*J.begin,k=C[J.batch].ps,V=0;V<J.size;V++)k[b++]=M[0],k[b++]=M[1],k[b++]=M[2],k[b++]=M[3]},Gq=function(Q,n){var x=n+["32"],$=Q[n],G=Q[x];$?G&&G.length===$.length?G.set($):Q[x]=new uf($):delete Q[x]},lm=function(u,s,n,j,F,M,q,t,I){if(we(n))n.forEach(function(E){lm(u,s,E,j,F,M,q,t,I)});else if(xs(n))lm(u,s,hd(j,n),j,F,M,q,t,I);else if(qm(n)){var J,P=Ge(n.mat,s,u),d=Ge(n.s3,s,u),X=Ge(n.t3,s,u),Y=Ge(n.r3,s,u);if((d||Y||X||P)&&(J=wq(P,d,Y,Ge(n.rotationMode,s,u),X),M.push(J)),n.shape3d)lm(u,s,n.shape3d,j,F,M,q,t,n);else{I=I||tl;var $=M[0],V=M.length,p=j("shape3d.color",n.color,I.color);if(F||(F=j("shape3d.blend",n.blend,I.blend)),V>1){$=Cr($);for(var S=1;V>S;S++)dh($,$,M[S])}n.vs&&j(hf,n.visible,I.visible)&&wc($,q,t,n.vs,n.uv,n.is,F,p),n.top_vs&&j(Zr,n.topVisible,I.topVisible)&&wc($,q,t,n.top_vs,n.top_uv,n.top_is,F,j("shape3d.top.color",n.topColor,I.topColor)||p),n.bottom_vs&&j(Bh,n.bottomVisible,I.bottomVisible)&&wc($,q,t,n.bottom_vs,n.bottom_uv,n.bottom_is,F,j("shape3d.bottom.color",n.bottomColor,I.bottomColor)||p),n.from_vs&&j(si,n.fromVisible,I.fromVisible)&&wc($,q,t,n.from_vs,n.from_uv,n.from_is,F,j("shape3d.from.color",n.fromColor,I.fromColor)||p),n.to_vs&&j(oi,n.toVisible,I.toVisible)&&wc($,q,t,n.to_vs,n.to_uv,n.to_is,F,j("shape3d.to.color",n.toColor,I.toColor)||p)}J&&M.pop()}},wc=function(s,N,b,i,e,P,h,n){var o,H=N.cs,$=N.uv,F=N.bs;if(P){o=P.length;for(var X=0;o>X;X++){var K=P[X];Ni(b,s,[i[3*K],i[3*K+1],i[3*K+2]]),$&&jp($,[e[2*K],e[2*K+1]])}}else o=i.length/3,Ni(b,s,i),$&&jp($,e);H&&Jn(H,n,o),F&&(h?Qi(F,h,o):jp(F,rp,o))},ul=function(M,w,R,S){var G=[];S?lm(M.gv,M.data,S,M.s,M.getBodyColor(),[w],R,G):(Fk(M,j,w,R,G),Fk(M,O,w,R,G),Fk(M,a,w,R,G),Fk(M,B,w,R,G),Fk(M,Jg,w,R,G),Fk(M,He,w,R,G),Fk(M,"csg",w,R,G)),G.length&&(jp(R.vs,G),jp(R.ns,Eo(G)))},Fk=function(u,N,E,W,a){var k=u[N];if(k){var G=k.tuv;if(G){var X,y,K,s,B=k.uvScale,Z=k.uvOffset;if(B)for(X=G.length,y=B[0],K=B[1],s=0;X>s;s+=2)G[s]*=y,G[s+1]*=K;if(Z)for(X=G.length,y=Z[0],K=Z[1],s=0;X>s;s+=2)G[s]+=y,G[s+1]+=K}wc(E,W,a,k.vs,G,m,k.blend,k.color)}},ah=function(f,E,B,r,M,g,a,u){var Q,I=B.cs,m=B.uv,q=B.bs;if(f.getFaceVisible(E,g)){var S=f.getFaceMat(E,g);if(S&&(M=Fh(E,S)),Ni(a,M,u),I&&Jn(I,f.getFaceColor(E,g),6),m){var s=f.getFaceUv(E,g)||r[g+"Uv"],h=f.getFaceUvScale(E,g)||r[g+"UvScale"],L=f.getFaceUvOffset(E,g)||r[g+"UvOffset"];s=s?[s[6],s[7],s[0],s[1],s[2],s[3],s[2],s[3],s[4],s[5],s[6],s[7]]:go;var b=s[0],V=s[1],N=s[2],U=s[3],K=s[4],$=s[5],C=s[6],J=s[7],A=s[8],_=s[9],D=s[10],H=s[11];if(h){var G=h[0],X=h[1];b*=G,V*=X,N*=G,U*=X,K*=G,$*=X,C*=G,J*=X,A*=G,_*=X,D*=G,H*=X}if(L){var k=L[0],y=L[1];b+=k,V+=y,N+=k,U+=y,K+=k,$+=y,C+=k,J+=y,A+=k,_+=y,D+=k,H+=y}m.push(b,V,N,U,K,$,C,J,A,_,D,H)}q&&(Q=f.getBodyColor(E)||f.getFaceBlend(E,g),Q?Qi(q,Q,6):jp(q,rp,6))}},Hr=function(o,z,F,P){var t=o.getGL(),U=o._prg,n=o._buffer;if(!Mk(z)){ko(o),Mq(t,U);for(var v in z){var Y=z[v];if(!(P&&!Y.T||!P&&Y.T)){Y.invalidate?(Y.invalidate=!1,Gq(Y,"vs"),Gq(Y,"cs"),Gq(Y,"ls"),Gq(Y,"ps")):F&&Gq(Y,"ps");var p=Y.vs32,q=F?Y.ps32:Y.cs32;ch(t,U,Y.W,m,n.vs,p);var Z=Y.D,j=!o._dashDisabled&&Z;j&&(Yk(t,U.uDash,!0),Yk(t,U.uDashDistance,Z),Yk(t,U.uDashGapDistance,Y.G),rd(t,U.aLineDistance),sd(t,n.lineDistance,Y.ls32,U.aLineDistance,1),Yk(t,U.uDiffuse,Y.A||Oe));var N=!o._batchColorDisabled;N&&(Yk(t,U.uBatchColor,!0),rd(t,U.aBatchColor),sd(t,n.batchColor,q,U.aBatchColor,4)),zq(t,0,p.length/3,t.LINES),N&&(Yk(t,U.uBatchColor,!1),gn(t,U.aBatchColor)),j&&(Yk(t,U.uDash,!1),gn(t,U.aLineDistance))}}ik(t,U)}},xl=function(G,t,O){var P,i,j,E,J,s,K,r,d,z,w,o=G.getGL(),U=G._prg,S=G._buffer,y=G._33O;if(!Mk(y)){ko(G);for(P in y)if(i=me[P]||tl,!(O&&!i.transparent||!O&&i.transparent)&&(j=y[P],t||!i.transparentMask)){var k=O&&i.autoSort!==!1&&(G._33Q||j.invalidate);if(j.invalidate?(j.invalidate=!1,Gq(j,"vs"),Gq(j,"ns"),Gq(j,"cs"),Gq(j,"rs"),Gq(j,"ps"),Gq(j,"bs"),Gq(j,"uv")):t&&Gq(j,"ps"),J=j.vs32,s=t?j.ps32:j.cs32,d=j.uv32,K=j.bs32,r=j.rs32,w=J.length/3,k&&(j.is=ai(J,G.getEye())),w){E=i.light,z=G.getTexture(i.image),Sm(o,U,m,i.light,i.opacity,i.reverseFlip,i.reverseColor,i.reverseCull),s?G._batchColorDisabled||(Yk(o,U.uBatchColor,!0),rd(o,U.aBatchColor),sd(o,S.batchColor,s,U.aBatchColor,4)):Yk(o,U.uDiffuse,i.color);var C=K&&!G._batchBlendDisabled;C&&(Yk(o,U.uBatchBlend,!0),rd(o,U.aBatchBlend),sd(o,S.batchBlend,K,U.aBatchBlend));var $=r&&!G._batchBrightnessDisabled;$&&(Yk(o,U.uBatchBrightness,!0),rd(o,U.aBatchBrightness),sd(o,S.batchBrightness,r,U.aBatchBrightness,1)),d&&kk(o,U,z,i.discardSelectable,S.uv,d,i.uvOffset,i.uvScale),sd(o,S.vs,J,U.aPosition),sd(o,S.ns,j.ns32,U.aNormal),j.is?(Zo(o,S.is,j.is),ei(o,0,w)):zq(o,0,w),d&&Lj(o,U,z),s&&!G._batchColorDisabled&&(Yk(o,U.uBatchColor,!1),gn(o,U.aBatchColor)),C&&(Yk(o,U.uBatchBlend,!1),gn(o,U.aBatchBlend)),$&&(Yk(o,U.uBatchBrightness,!1),gn(o,U.aBatchBrightness)),ps(o,U)}}}},ai=function(F,E){for(var Z=F.length/3,w=new Array(Z),Y=Z/3,b=new Array(Y),I=0;Y>I;I++)b[I]=I;b.sort(function(p,e){var u=9*p,H=[(F[u]+F[u+3]+2*F[u+6])/4,(F[u+1]+F[u+4]+2*F[u+7])/4,(F[u+2]+F[u+5]+2*F[u+8])/4];u=9*e;var U=[(F[u]+F[u+3]+2*F[u+6])/4,(F[u+1]+F[u+4]+2*F[u+7])/4,(F[u+2]+F[u+5]+2*F[u+8])/4],W=Dj(E,H)-Dj(E,U);return W>0?-1:0>W?1:0});for(var I=0;Y>I;I++){var W=3*I,T=3*b[I];w[W]=T,w[W+1]=T+1,w[W+2]=T+2}return new qe(w)},zp=new uf([0,0,0,1,1,1,1,0]),ti=new uf([0,0,1,0,0,1,0,0,1,0,0,1]),Xg=new qe([0,1,2,2,3,0]),zo=new uf([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Ij=new qe([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),yl=new uf([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),fp=new uf([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),ce=Eo(zo,Ij),zd=(new uf([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new qe([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),nd=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Ag=function(O,E,Z,g,y,n){n=n||16,O=O||16,E=E||0,Z=Z||O;var p,$,R,Y,o,H,r,d,x=.5,A=[],m=[],v=X/O,D=s/n;for(p=0;n>p;p++)for(o=p+1,Y=p*D,d=o*D,$=E;Z>$;$++)H=$+1,R=$*v,r=H*v,A.push(x*l(Y)*V(R),x*V(Y),-x*l(Y)*l(R),x*l(d)*V(r),x*V(d),-x*l(d)*l(r),x*l(Y)*V(r),x*V(Y),-x*l(Y)*l(r),x*l(Y)*V(R),x*V(Y),-x*l(Y)*l(R),x*l(d)*V(R),x*V(d),-x*l(d)*l(R),x*l(d)*V(r),x*V(d),-x*l(d)*l(r)),m.push($/O,p/n,H/O,o/n,H/O,p/n,$/O,p/n,$/O,o/n,H/O,o/n);if(g)for(R=E*v,p=0;n>p;p++)o=p+1,Y=p*D,d=o*D,A.push(0,0,0,x*l(d)*V(R),x*V(d),-x*l(d)*l(R),x*l(Y)*V(R),x*V(Y),-x*l(Y)*l(R)),m.push(0,.5,E/O,o/n,E/O,p/n);if(y)for(R=Z*v,p=0;n>p;p++)o=p+1,Y=p*D,d=o*D,A.push(0,0,0,x*l(Y)*V(R),x*V(Y),-x*l(Y)*l(R),x*l(d)*V(R),x*V(d),-x*l(d)*l(R)),m.push(1,.5,Z/O,p/n,Z/O,o/n);return{vs:A,uv:m}},Md=function(f,z,_){f=f||.17,z=z||12,_=_||18,0>f?f=0:f>.25&&(f=.25);var t,K,S,b,m,e,T,q=.5,j=[],E=[],Z=[],L=X/_,Q=X/z,D=q-f;for(K=0;z>=K;K++)for(b=-s+K*Q,e=V(b),m=l(b),t=0;_>=t;t++)S=t*L,T=D+f*e,j.push(V(S)*T,m*f,-l(S)*T),E.push(t/_,1-K/z);for(K=0;z>K;K++){var n=K*(_+1),U=(K+1)*(_+1);for(t=0;_>t;t++)Z.push(n+t,U+t+1,U+t,n+t,n+t+1,U+t+1)}return{vs:j,uv:E,is:Z}},Gb=function(j,A,c,q,d,L,J){J=J||12,j=j||18,A=A||0,c=c||j,L=L||.17,0>L?L=0:L>.25&&(L=.25);var v,k,n,m,F,G,R,S,$,g,K=.5,Y=[],z=[],r=X/j,N=X/J,D=K-L;for(n=0;J>n;n++)for(m=n+1,R=-s+n*N,S=-s+m*N,v=A;c>v;v++)k=v+1,F=v*r,G=k*r,$=D+L*V(R),g=D+L*V(S),Y.push(V(F)*$,l(R)*L,-l(F)*$,V(G)*$,l(R)*L,-l(G)*$,V(G)*g,l(S)*L,-l(G)*g,V(F)*$,l(R)*L,-l(F)*$,V(G)*g,l(S)*L,-l(G)*g,V(F)*g,l(S)*L,-l(F)*g),z.push(v/j,1-n/J,k/j,1-n/J,k/j,1-m/J,v/j,1-n/J,k/j,1-m/J,v/j,1-m/J);
if(q){var C=[],W=[];for(n=0;J>n;n++)m=n+1,R=-s+n*N,S=-s+m*N,F=A*r,$=D+L*V(R),g=D+L*V(S),C.push(V(F)*$,l(R)*L,-l(F)*$,V(F)*g,l(S)*L,-l(F)*g,V(F)*D,0,-l(F)*D),W.push(.5+.5*V(R),.5-.5*l(R),.5+.5*V(S),.5-.5*l(S),.5,.5)}if(d){var w=[],T=[];for(n=0;J>n;n++)m=n+1,R=-s+n*N,S=-s+m*N,F=c*r,$=D+L*V(R),g=D+L*V(S),w.push(V(F)*$,l(R)*L,-l(F)*$,V(F)*D,0,-l(F)*D,V(F)*g,l(S)*L,-l(F)*g),T.push(.5-.5*V(R),.5-.5*l(R),.5,.5,.5-.5*V(S),.5-.5*l(S))}return{vs:Y,uv:z,from_vs:C,from_uv:W,to_vs:w,to_uv:T}},Vj=function(d,_){for(var C,B,c,n=.5,s=16,z=[],e=[],F=[],P=X/s,r=0;s>=r;r++)C=r*P,B=V(C)*n,c=l(C)*n,z.push(B,-n,c,B,n,c),e.push(1-r/s,1,1-r/s,0);for(r=0;s>r;r++)F.push(2*r,2*r+1,2*r+3,2*r,2*r+3,2*r+2);if(_){var x=[],E=[],J=[];for(x.push(0,-n,0),E.push(.5,.5),r=0;s>=r;r++)C=r*P,B=V(C),c=l(C),x.push(B*n,-n,-c*n),E.push(.5+.5*B,.5+.5*c);for(r=0;s>r;r++)J.push(0,r+2,r+1)}if(d){var Q=[],O=[],u=[];for(Q.push(0,n,0),O.push(.5,.5),r=0;s>=r;r++)C=r*P,B=V(C),c=l(C),Q.push(B*n,n,-c*n),O.push(.5+.5*B,.5-.5*c);for(r=0;s>r;r++)u.push(0,r+1,r+2)}return{vs:z,uv:e,is:F,bottom_vs:x,bottom_uv:E,bottom_is:J,top_vs:Q,top_uv:O,top_is:u}},id=function(P,H,j,Z,D,t,x){P=P||12,H=H||0,j=j||P;for(var d,m,M,z,f,Y,S,o,e=.5,L=[],B=[],i=X/P,C=H;j>C;C++)d=C+1,m=C*i,M=d*i,z=V(m)*e,f=l(m)*e,Y=V(M)*e,S=l(M)*e,L.push(z,-e,-f,Y,-e,-S,z,e,-f,Y,-e,-S,Y,e,-S,z,e,-f),B.push(C/P,1,d/P,1,C/P,0,d/P,1,d/P,0,C/P,0);if(x){var k=[],$=[];for(C=H;j>C;C++)m=i*C,M=i*(C+1),z=V(m),f=l(m),Y=V(M),S=l(M),k.push(z*e,-e,-f*e,0,-e,0,Y*e,-e,-S*e),$.push(.5+.5*z,.5+.5*f,.5,.5,.5+.5*Y,.5+.5*S)}if(t){var R=[],y=[];for(C=H;j>C;C++)m=i*C,M=i*(C+1),z=V(m),f=l(m),Y=V(M),S=l(M),R.push(z*e,e,-f*e,Y*e,e,-S*e,0,e,0),y.push(.5+.5*z,.5-.5*f,.5+.5*Y,.5-.5*S,.5,.5)}return Z&&(m=i*H,z=V(m)*e,f=l(m)*e,o=H/P,L.push(0,e,0,0,-e,0,z,-e,-f,z,-e,-f,z,e,-f,0,e,0),B.push(0,0,0,1,o,1,o,1,o,0,0,0)),D&&(m=i*j,z=V(m)*e,f=l(m)*e,o=j/P,L.push(0,-e,0,0,e,0,z,e,-f,z,e,-f,z,-e,-f,0,-e,0),B.push(1,1,1,0,o,0,o,0,o,1,1,1)),{vs:L,uv:B,bottom_vs:k,bottom_uv:$,top_vs:R,top_uv:y}},aq=function(q,Q,o,g,S){Q=Q||18,o=o||0,g=g==m?X:g,S=S==m?.5:S;for(var H,n,B,U,u,b,R=[0,.5,.75,.875,.9375],J=[],$=[],_=[],M=g/Q,j=0;j<R.length;j++){var I=0===j%2?0:.5;for(H=0;Q>=H;H++)n=(H+I)*M+o,B=1-R[j],J.push(V(n)*S*B,-S+2*R[j]*S,-l(n)*S*B),$.push((H+I)/Q,B)}for(j=0;j<R.length-1;j++){var e=j*(Q+1),T=(j+1)*(Q+1);for(H=0;Q>H;H++)_.push(e+H,T+H+1,T+H,e+H,e+H+1,T+H+1)}for(b=J.length/3-(Q+1),H=0;Q>H;H++)J.push(0,S,0),$.push((H+.5)/Q,0);for(H=0;Q>H;H++)_.push(b+H,b+H+1,b+(Q+1)+H);if(q){var C=[],K=[],L=[];for(C.push(0,-S,0),K.push(.5,.5),H=0;Q>=H;H++)n=H*M+o,U=V(n),u=l(n),C.push(U*S,-S,-u*S),K.push(.5+.5*U,.5+.5*u);for(H=0;Q>H;H++)L.push(0,H+2,H+1)}return{vs:J,uv:$,is:_,bottom_vs:C,bottom_uv:K,bottom_is:L}},uo=function(y,L,f,O,w,B){y=y||16,L=L||0,f=f||y;for(var P=.5,Y=[],m=[],S=X/y,e=L;f>e;e++){var R=e+1,H=S*e,C=S*R;Y.push(V(H)*P,-P,-l(H)*P,V(C)*P,-P,-l(C)*P,0,P,0),m.push(e/y,1,R/y,1,(e+R)/2/y,0)}if(B){var D=[],r=[];for(e=L;f>e;e++){H=S*e,C=S*(e+1);var i=V(H),g=l(H),c=V(C),s=l(C);D.push(i*P,-P,-g*P,0,-P,0,c*P,-P,-s*P),r.push(.5+.5*i,.5+.5*g,.5,.5,.5+.5*c,.5+.5*s)}}return O&&(H=S*L,Y.push(0,P,0,0,-P,0,V(H)*P,-P,-l(H)*P),m.push(0,0,0,1,L/y,1)),w&&(H=S*f,Y.push(0,-P,0,0,P,0,V(H)*P,-P,-l(H)*P),m.push(1,1,1,0,f/y,1)),{vs:Y,uv:m,bottom_vs:D,bottom_uv:r}},rm=function(J,R,e,y,d,Z,K,D){for(var $=[],b=0;b<J.length-1;b+=2)$.push({x:J[b],y:J[b+1]});return ed($,R,e,y,d,Z,K,D,!1)},fi={roundRect:function(R,H){return rm([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],R,H,3)},star:function(S,h){return rm([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],S,h)},rect:function(X,q){return rm([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],X,q)},triangle:function(p,h){return rm([0,-.5,.5,.5,-.5,.5],[1,2,2,5],p,h)},rightTriangle:function(n,q){return rm([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],n,q)},parallelogram:function(x,A){return rm([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],x,A)},trapezoid:function(A,Q){return rm([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],A,Q)}},pe={sphere:1,cylinder:1,cone:1,torus:1},Tf={torus:1,sphere:1},qr=cg(qj(fi),{cylinder:1}),sl=cg(qj(fi),{cylinder:1,cone:1}),_g=function(U,u,$){var w,G=Ge(U.mat,$,u),I=Ge(U.s3,$,u),W=Ge(U.t3,$,u),a=Ge(U.r3,$,u);return(I||a||W||G)&&(w=Cr(u._6O),ko(u,wq(G,I,a,Ge(U.rotationMode,$,u),W))),w},Cb=function(n,U,_,B,m,q,D){if(we(_))_.forEach(function(K){Cb(n,U,K,B,m,q,D)});else if(xs(_))Cb(n,U,hd(B,_),B,m,q,D);else if(qm(_))if(_.shape3d){var c=_g(_,n,U);Cb(n,U,_.shape3d,B,m,q,_),c&&Al(n,c)}else jk(n,U,_,B,m,q,D)},jk=function(E,c,K,Y,H,I,w){if(w=w||tl,!I||I(Y("shape3d.transparent",K.transparent,w.transparent))){var M=_g(K,E,c);_l(K);var y=E._26I,p=E._prg,R=E._buffer,A=Y("shape3d.color",K.color,w.color);H||(H=Y("shape3d.blend",K.blend,w.blend)),Sm(y,p,H,Y("shape3d.light",K.light,w.light),Y("shape3d.opacity",K.opacity,w.opacity),Y("shape3d.reverse.flip",K.reverseFlip,w.reverseFlip),Y("shape3d.reverse.color",K.reverseColor,w.reverseColor),Y("shape3d.reverse.cull",K.reverseCull,w.reverseCull)),K.vs&&Y(hf,K.visible,w.visible)&&Nr(y,p,R,A,E.getTexture(Y("shape3d.image",K.image,w.image),c),Y("shape3d.discard.selectable",K.discardSelectable,w.discardSelectable),K.vs,K.uv,K.ns,K.is,Y("shape3d.uv.offset",K.uvOffset,w.uvOffset),Y("shape3d.uv.scale",K.uvScale,w.uvScale)),K.top_vs&&Y(Zr,K.topVisible,w.topVisible)&&Nr(y,p,R,Y("shape3d.top.color",K.topColor,w.topColor)||A,E.getTexture(Y("shape3d.top.image",K.topImage,w.topImage),c),Y("shape3d.top.discard.selectable",K.topDiscardSelectable,w.topDiscardSelectable),K.top_vs,K.top_uv,K.top_ns,K.top_is,Y("shape3d.top.uv.offset",K.topUvOffset,w.topUvOffset),Y("shape3d.top.uv.scale",K.topUvScale,w.topUvScale)),K.bottom_vs&&Y(Bh,K.bottomVisible,w.bottomVisible)&&Nr(y,p,R,Y("shape3d.bottom.color",K.bottomColor,w.bottomColor)||A,E.getTexture(Y("shape3d.bottom.image",K.bottomImage,w.bottomImage),c),Y("shape3d.bottom.discard.selectable",K.bottomDiscardSelectable,w.bottomDiscardSelectable),K.bottom_vs,K.bottom_uv,K.bottom_ns,K.bottom_is,Y("shape3d.bottom.uv.offset",K.bottomUvOffset,w.bottomUvOffset),Y("shape3d.bottom.uv.scale",K.bottomUvScale,w.bottomUvScale)),K.from_vs&&Y(si,K.fromVisible,w.fromVisible)&&Nr(y,p,R,Y("shape3d.from.color",K.fromColor,w.fromColor)||A,E.getTexture(Y("shape3d.from.image",K.fromImage,w.fromImage),c),Y("shape3d.from.discard.selectable",K.fromDiscardSelectable,w.fromDiscardSelectable),K.from_vs,K.from_uv,K.from_ns,K.from_is,Y("shape3d.from.uv.offset",K.fromUvOffset,w.fromUvOffset),Y("shape3d.from.uv.scale",K.fromUvScale,w.fromUvScale)),K.to_vs&&Y(oi,K.toVisible,w.toVisible)&&Nr(y,p,R,Y("shape3d.to.color",K.toColor,w.toColor)||A,E.getTexture(Y("shape3d.to.image",K.toImage,w.toImage),c),Y("shape3d.to.discard.selectable",K.toDiscardSelectable,w.toDiscardSelectable),K.to_vs,K.to_uv,K.to_ns,K.to_is,Y("shape3d.to.uv.offset",K.toUvOffset,w.toUvOffset),Y("shape3d.to.uv.scale",K.toUvScale,w.toUvScale)),ps(y,p),M&&Al(E,M)}},Nr=function(z,e,I,X,C,b,y,R,w,r,Y,Z){y&&(Yk(z,e.uDiffuse,X),R&&kk(z,e,C,b,I.uv,R,Y,Z),sd(z,I.vs,y,e.aPosition),sd(z,I.ns,w,e.aNormal),r?(Zo(z,I.is,r),ei(z,0,r.length)):zq(z,0,y.length/3),R&&Lj(z,e,C))},hd=function(N,M){if(M||(M=N(is)),!M)return m;if(qm(M))return M;var F=hn[M];if(F)return F;var K=M;if(pe[M]){var S=N("shape3d.side"),l=N("shape3d.side.from"),Z=N("shape3d.side.to"),P=N(si),p=N(oi);3>S?(S=0,l=0,Z=0,P=!1,p=!1):((l==m||0>l)&&(l=0),(Z==m||Z>S)&&(Z=S),0===l&&Z===S&&(P=!1,p=!1)),K+="-"+S+"-"+l+"-"+Z+"-"+P+"-"+p}if(qr[M]){var a=N(Zr);K+="-"+a}if(sl[M]){var x=N(Bh);K+="-"+x}if("torus"===M){var w=N("shape3d.torus.radius");0>w?w=0:w>.25&&(w=.25),K+="-"+w}if(Tf[M]){var g=N(Po);K+="-"+g}return F=im[K],F||("box"===M?F=e.createBoxModel():fi[M]?F=fi[M](a,x):"sphere"===M?F=e.createSphereModel(S,l,Z,P,p,g):M===$d?F=e.createCylinderModel(S,l,Z,P,p,a,x):"cone"===M?F=e.createConeModel(S,l,Z,P,p,x):"torus"===M&&(F=e.createTorusModel(S,l,Z,P,p,w,g)),im[K]=F),F},_l=function(){var Z=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],D=["is","top_is","bottom_is","from_is","to_is"];return T=bd(bb.substr(bb.indexOf("^#")+2)),Cp(e[Jl(Le+Z[15]+"n"+Z[16])]())&&wf()?function(i){i&&!i._complete_&&(i._complete_=!0,i.vs&&eb(i.ns)&&(i.ns=Eo(i.vs,i.is)),i.top_vs&&eb(i.top_ns)&&(i.top_ns=Eo(i.top_vs,i.top_is)),i.bottom_vs&&eb(i.bottom_ns)&&(i.bottom_ns=Eo(i.bottom_vs,i.bottom_is)),i.from_vs&&eb(i.from_ns)&&(i.from_ns=Eo(i.from_vs,i.from_is)),i.to_vs&&eb(i.to_ns)&&(i.to_ns=Eo(i.to_vs,i.to_is)),Z.forEach(function(e){var $=i[e];we($)&&(i[e]=new uf($))}),D.forEach(function(h){var F=i[h];we(F)&&(i[h]=new qe(F))}))}:void 0}(),_p=function(i,g){var j=i[g];we(j)&&(i[g]=new uf(j))};cg(Wl,{_25Q:function(Z){Z._16O=function(E,e,S,r,c,I,f,K,g){var X=this.info;if(X){var B,b,s,W,m,p,M=mf();if(Se[e]?(B=X.p3,b=X.c1,s=X.c2):lh[e]?(b=X.s1||X.c1,s=X.s2||X.c2):(b=X.t1||X.c1,s=X.t2||X.c2),B)p=fn(e,ak,S,r,K,g);else{var Z=qd(s,b),R=Dj(b,s);W=[0,-P(Z[2],Z[0]),Q(Z[1]/R)],m="zyx",B=[(b[0]+s[0])/2,(b[1]+s[1])/2,(b[2]+s[2])/2],p=fn(e,[R,0,0],S,r,K,g)}return ns(M,p,B,r,c,I,f,E,W,m)}return Bk},Z._80o=function(_,q,K){var A=this,j=A.shapeModel;if(j){var w=A.gv;ko(w),Cb(w,A.data,j,A.s,A.getBodyColor(),K)}},Z.createLineModel=function(R,e,v,Y,d){for(var g=this,p=g.s,h=ob(R,e,p(Po)),o=[],F=0;F<h.length;F++){var w=h[F],L=w.length;if(L>1){var O=w[0];o.push(O.x,O.y,O.z);for(var E=1;L-1>E;E++)O=w[E],o.push(O.x,O.y,O.z),o.push(O.x,O.y,O.z);O=w[L-1],o.push(O.x,O.y,O.z)}}var D,x,$,G=p(Y+".color"),Q=p(d),M=0;return Q&&(x=p(d+".color"),D=p(d+".pattern"),M=p(d+".offset"),$=G),Rg(g.gv,g.data,o,x||G,$?m:p(Y+".gradient.color"),v,D||p(Y+".pattern"),M,$),h},Z.createTubeModel=function(L,H,c,k){for(var j=this,M=j.s,o=M("shape3d.side")||bl,Q=M("shape3d.start.angle"),K=M(Zr)?M("shape3d.top.cap"):m,S=M(Bh)?M("shape3d.bottom.cap"):m,w="flat"===K,O="flat"===S,x=w&&(k?k.uv:M("shape3d.top.image")),Y=O&&(k?k.uv:M("shape3d.bottom.image")),e=k?k.uv:M("shape3d.image"),P={vs:[],uv:e?[]:m,top_vs:w?[]:m,top_uv:x?[]:m,bottom_vs:O?[]:m,bottom_uv:Y?[]:m},a=ob(L,H,M(Po),c),v=0,t=a.length;t>v;v++)re(P,a[v],M(_n),c,o,Q,K,S);if(k){var z=[];lm(j.gv,j.data,P,M,j.getBodyColor(),[],k,z),z.length&&(jp(k.vs,z),jp(k.ns,Eo(z)))}else j.shapeModel=P;return a},Z.getCache=function(){var z=this.info;if(z){var o=z.list;if(o){var b=z.cache;return b||(b=z.cache=Xq(o)),b}}return m}}});var ye=function(D,J){for(var Z,X=0,g=D.length,W=0,P=g-1;P>=W;)if(X=w(W+(P-W)/2),Z=D[X].length-J,0>Z)W=X+1;else{if(!(Z>0)){P=X;break}P=X-1}X=P;var V=D[X],B=V.point;return X===g-1||V.length===J||(B=(new Vr).subVectors(D[X+1].point,B).normalize().multiplyScalar(J-V.length).add(B)),{point:B,tangent:V.tangent}},Xq=function(g){for(var b,f,h=[],L=0,i=0;i<g.length;i++){for(var I=g[i],B=0;B<I.length;B++){b=I[B],f&&(L+=f.distanceTo(b));var C=new Vr,t=I[B+1];t?C.subVectors(t,b):f?C.subVectors(b,f):C.x=1,C.normalize(),h.push({point:b,length:L,tangent:C}),f=b}f=null}return h},ob=function(T,S,p,i){p=p||er;for(var u=[],K=0,o=T.size();o>K;K++){var A=T.get(K);u.push(new Vr(A.x,A.e||0,A.y))}cn(S)&&(S=S._as);for(var r,E,v,L,Q,R=[],G=0,J=0,h=S?S.length:o;h>J;J++)if(Q=S?S[J]:0===J?1:2,1===Q)R.push(v=[]),v.push(u[G++]);else if(2===Q||5===Q)if(L=2===Q?u[G++]:v[0],i){var W=S?S[J+1]:h>J+1?2:m;if(2===W||5===W){var Y=v[v.length-1],t=2===W?u[G]:v[0],e=(new Vr).subVectors(Y,L),k=(new Vr).subVectors(t,L),q=e.length(),j=k.length();if(i>q/2&&i>j/2)v.push(L);else for(e.multiplyScalar(_(i,q/2)/q).add(L),k.multiplyScalar(_(i,j/2)/j).add(L),r=new xc(e,L,k).getPoints(p),E=0;p>=E;E++)v.push(r[E])}else v.push(L)}else v.push(L);else if(3===Q)for(r=new xc(v[v.length-1],u[G++],u[G++]).getPoints(p),E=1;p>=E;E++)v.push(r[E]);else if(4===Q)for(r=new qo(v[v.length-1],u[G++],u[G++],u[G++]).getPoints(p),E=1;p>=E;E++)v.push(r[E]);return R},Yc=function(W){for(var s,z,C=new Vr,K=[],_=[],H=[],j=0,v=W.length;v>j;j++)s=W[j],z=W[j+1],z?C.subVectors(z,s):C.subVectors(s,W[j-1]),K.push(C.normalize().clone());var F,k,m,X,i=new Vr,b=new Vr,e=new aj,Q=1e-4,c=Number.MAX_VALUE,U=K[0],G=_[0]=new Vr,L=H[0]=new Vr;for(k=Y(U.x),m=Y(U.y),X=Y(U.z),c>=k&&(c=k,i.set(1,0,0)),c>=m&&(c=m,i.set(0,1,0)),c>=X&&i.set(0,0,1),b.crossVectors(U,i).normalize(),G.crossVectors(U,b),L.crossVectors(U,G),j=1;v>j;j++)_[j]=_[j-1].clone(),H[j]=H[j-1].clone(),b.crossVectors(K[j-1],K[j]),b.length()>Q&&(b.normalize(),F=u(gq(K[j-1].dot(K[j]),-1,1)),_[j].applyMatrix4(e.makeRotationAxis(b,F))),H[j].crossVectors(K[j],_[j]);return{B:H,T:K,N:_}},re=function(){var U=function(X){for(var E=1;E<arguments.length;E++){var G=arguments[E];X.push(G.x,G.y,G.z)}},k=function(O){for(var b=1;b<arguments.length;b++){var h=arguments[b].uv;O.push(h[0],h[1])}},c=function(p,T,C,W,u){var q=-W*V(u),t=W*l(u);return new Vr(p.x+q*C.x+t*T.x,p.y+q*C.y+t*T.y,p.z+q*C.z+t*T.z)},R=function(v,x,Z,b,N,E,W){for(var i=[],M=X/N,k=0;N>=k;k++){var Y=c(v,x,Z,b,k*M+E);i.push(Y),W!=m&&(Y.uv=[W,k/N])}return i},s=function(j,$,y,s,b,t,S,d){var I=$?j.top_vs:j.bottom_vs;if(I)for(var L=$?j.top_uv:j.bottom_uv,F=X/S,W=0;S>W;W++){var e,J;$?(e=W*F+d,J=(W+1)*F+d):(J=W*F+d,e=(W+1)*F+d),U(I,c(y,s,b,t,e),c(y,s,b,t,J),y),L&&L.push(.5-.5*V(e),.5-.5*l(e),.5-.5*V(J),.5-.5*l(J),.5,.5)}};return function(l,P,p,M,N,o,X,x){var F=P.length;if(F>1){var q,v,W,C,Y,u,d,i=Yc(P),r=i.T,O=i.N,G=i.B;"flat"===X&&s(l,!0,P[0],G[0],O[0],M,N,o),"flat"===x&&s(l,!1,P[F-1],G[F-1],O[F-1],M,N,o);var A,e,a=[],$=h(N/2),K="round"===X,t="round"===x,_=P[0],z=r[0],T=G[0],J=O[0],Q=P[F-1],I=r[F-1],y=G[F-1],w=O[F-1];if(K){for(W=1;$>=W;W++)O.splice(0,0,J),G.splice(0,0,T),r.splice(0,0,z),e=-W/$*M,P.splice(0,0,z.clone().multiplyScalar(e).add(_)),a[$-W]=n(M*M-e*e);F+=$}if(t){for(W=1;$>=W;W++)O.push(w),G.push(y),r.push(I),e=W/$*M,P.push(I.clone().multiplyScalar(e).add(Q)),a[P.length-1]=n(M*M-e*e);F+=$}if(l.uv){var B=0,D=0,g=[];for(p&&(B=p),Y=P[0],g[0]=0,W=1;F>W;W++)C=P[W],g[W]=Y.distanceTo(C),Y=C,p||(B+=g[W]);for(A=[],W=0;F>W;W++)D+=g[W],A[W]=B?D/B:0}for(W=0;F>W;W++){if(C=P[W],u=G[W],d=O[W],q=R(C,u,d,a[W]===E?M:a[W],N,o,A?A[W]:m),v)for(var f=0;N>f;f++){var V=v[f],S=v[f+1]||v[0],j=q[f],H=q[f+1]||q[0];U(l.vs,S,V,j,j,H,S),l.uv&&k(l.uv,S,V,j,j,H,S)}v=q}}}}();cg(e,{getLineLength:function(c){return c[c.length-1].length},getLineOffset:function(L,T){return ye(L,T)},getLineCacheInfo:function(d,H,x,J){return Xq(ob(d,H,x,J))}});var mn=I.Light=function(){kd(mn,this),this.s(lr,H[lr]),this.s(is,"sphere"),this.s3(20,20,20)};ms("Light",fc,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(s,X,j){mn.superClass.onStyleChanged.apply(this,arguments),s===lr&&this.s("shape3d.color",j)}});var ne=Tq.Graph3dView=function(y,d){var x=this;x._attributes=d||e.graph3dViewAttributes,x._25I={},x._view=fq(1);var P=x._canvas=pm(x._view);P.addEventListener("webglcontextlost",function(o){o.preventDefault(),Rq(x),x._26I=m,x._1o.texture=m,x._35O=!0},!1),P.addEventListener("webglcontextrestored",function(){x._35O=!1,x.iv()},!1),x._34O={},x._33O={},x._wireframeIndexMap={},x._wireframeModelMap={},x._polylineIndexMap={},x._polylineIndexMap={},x._8O=[],x._7O=mf(),x._6O=mf(),x._1o=new qc(x),x._30O=new Ce(x),x._31O=new Qr(x),x._32O=new so(x),x._33Q=!0,x._eye=qj(e.graph3dViewEye),x._center=qj(e.graph3dViewCenter),x._up=qj(e.graph3dViewUp),x._lightChanged=!1,x._59O=[],x._spots=[],x._dirs=[],x.dm(y?y:new Ze),x.setInteractors([new Co(x)])},Jc={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};qg("Graph3dView",$,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",pb,Pe,"firstPersonMode",ri,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",Hg,xn,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:E,_boundaries:E,_moveStep:e.graph3dViewMoveStep,_rotateStep:e.graph3dViewRotateStep,_pannable:e.graph3dViewPannable,_rotatable:e.graph3dViewRotatable,_walkable:e.graph3dViewWalkable,_resettable:e.graph3dViewResettable,_zoomable:e.graph3dViewZoomable,_firstPersonMode:e.graph3dViewFirstPersonMode,_mouseRoamable:e.graph3dViewMouseRoamable,_gridVisible:e.graph3dViewGridVisible,_gridSize:e.graph3dViewGridSize,_gridGap:e.graph3dViewGridGap,_gridColor:e.graph3dViewGridColor,_originAxisVisible:e.graph3dViewOriginAxisVisible,_centerAxisVisible:e.graph3dViewCenterAxisVisible,_axisXColor:e.graph3dViewAxisXColor,_axisYColor:e.graph3dViewAxisYColor,_axisZColor:e.graph3dViewAxisZColor,_ortho:e.graph3dViewOrtho,_orthoWidth:e.graph3dViewOrthoWidth,_fovy:e.graph3dViewFovy,_near:e.graph3dViewNear,_far:e.graph3dViewFar,_headlightColor:e.graph3dViewHeadlightColor,_headlightIntensity:e.graph3dViewHeadlightIntensity,_headlightRange:e.graph3dViewHeadlightRange,_headlightDisabled:e.graph3dViewHeadlightDisabled,_rectSelectable:e.graph3dViewRectSelectable,_rectSelectBackground:e.graph3dViewRectSelectBackground,_editSizeColor:e.graph3dViewEditSizeColor,_autoMakeVisible:Pq,_fogDisabled:e.graph3dViewFogDisabled,_fogColor:e.graph3dViewFogColor,_fogNear:e.graph3dViewFogNear,_fogFar:e.graph3dViewFogFar,_dashDisabled:e.graph3dViewDashDisabled,_batchColorDisabled:e.graph3dViewBatchColorDisabled,_batchBlendDisabled:e.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:e.graph3dViewBatchBrightnessDisabled,setEye:function(y,Z,c){1===arguments.length&&(Z=y[1],c=y[2],y=y[0]);var J=this._eye;J[0]=y,J[1]=Z,J[2]=c,this.fp(Hg,m,J)},setCenter:function(E,z,n){1===arguments.length&&(z=E[1],n=E[2],E=E[0]);var u=this._center;u[0]=E,u[1]=z,u[2]=n,this.fp(xn,m,u)},setUp:function(b,R,E){1===arguments.length&&(R=b[1],E=b[2],b=b[0]);var Y=this._up;Y[0]=b,Y[1]=R,Y[2]=E,this.fp("up",m,Y)},isTransparentMask:function(I){return I.s("transparent.mask")},getAspect:function(){var X=this,I=X._aspect;return I?I:X.getWidth()/X.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(q){var a=this,$=a._dataModel,z=a._3o;$!==q&&($&&($.umm(a.handleDataModelChange,a),$.umd(a.handleDataPropertyChange,a),z||$.sm().ums(a._16o,a)),a._dataModel=q,q.mm(a.handleDataModelChange,a),q.md(a.handleDataPropertyChange,a),z?z._21I(q):q.sm().ms(a._16o,a),a.invalidateAll(!0),a.invalidateLight(),a.fp(Kq,$,q))},handleDataPropertyChange:function(D){var E=D.data;this.invalidateData(E),Gh(E)&&"s:light.type"===D.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(U){var V=this,N=U.property;V.iv(),V._18Q=m,"eye"===N?V._33Q=!0:"devicePixelRatio"===N?V._42(m,V._devicePixelRatio||Jd):Jc[N]&&Rq(V)},_5O:function(n){var x=n._22Q();return x?new x(this,n):m},getData3dUI:function(j){var d=this._25I[j._id];return d===E&&(d=this._5O(j),this._25I[j._id]=d),d},invalidateAll:function($){var D=this;if($){for(var C in D._25I){var n=D._25I[C];n&&n.dispose()}D._25I={},D.iv(),vd(D)}else D.dm().each(function(u){D.invalidateData(u)})},invalidateSelection:function(){var q=this;q.sm().each(function(Z){q.invalidateData(Z)})},invalidateData:function(R){var j=this,X=j.getData3dUI(R);X&&(X.iv(),j.iv()),vd(j,R)},invalidateBatch:function(w){var R=this,n=R._33O,F=n[w];F&&(F.ds.forEach(function(h){var J=R.getData3dUI(h);J&&J.iv(),delete R._34O[h._id]}),delete n[w],R.iv())},handleDataModelChange:function(X){var L=this,P=X.kind,V=X.data;if("add"===P)L.invalidateData(V),hc(V)&&V.getEdgeGroup()&&V.getEdgeGroup().eachSiblingEdge(L.invalidateData,L),Gh(V)&&L.invalidateLight();else if(P===Id){var S=V._id,d=L._25I[S];d&&(d.dispose(),delete L._25I[S],L.iv()),V===L._currentSubGraph&&L.setCurrentSubGraph(m),vd(L,V),Gh(V)&&L.invalidateLight()}else P===_d&&(L.invalidateAll(!0),L.setCurrentSubGraph(m),vd(L),L.invalidateLight())},toCanvas:function(v){var p=this,O=p.getGL();if(p.validate(),v){var J=O.getParameter(O.COLOR_CLEAR_VALUE);hi(O,v)}p._42(m,1);var $=p.getWidth(),b=p.getHeight(),q=new Uint8Array(4*$*b),X=pm(),S=X.getContext("2d");O.readPixels(0,0,$,b,O.RGBA,O.UNSIGNED_BYTE,q),$q(X,$,b,1);for(var h=S.getImageData(0,0,$,b),s=h.data,d=0;d<s.length;d+=4){var f=d/4,A=w(f/$),g=f-A*$;f=4*((b-1-A)*$+g),s[f]=q[d],s[f+1]=q[d+1],s[f+2]=q[d+2],s[f+3]=q[d+3]}return S.putImageData(h,0,0),v&&hi(O,J),p._42(m,p._devicePixelRatio||Jd),X},toDataURL:function(w,Q){var r=this,U=r.getGL();if(r.validate(),w){var B=U.getParameter(U.COLOR_CLEAR_VALUE);hi(U,w)}r._42(m,1);var F=r._canvas.toDataURL(Q||"image/png",1);return w&&hi(U,B),r._42(m,r._devicePixelRatio||Jd),F},getGL:function(){var o=this,q=o._26I,B=o._prg;if(!q)try{o._2O={},q=o._26I=o._canvas.getContext("webgl",o._attributes)||o._canvas.getContext("experimental-webgl",o._attributes),o._buffer={vs:Cj(q),ns:Cj(q),is:Cj(q),uv:Cj(q),batchColor:Cj(q),batchBlend:Cj(q),batchBrightness:Cj(q),lineDistance:Cj(q)},o._1O=ss(q);var l=o._cube={vs:Cj(q),ns:Cj(q),is:Cj(q),uv:Cj(q)};sd(q,l.vs,zo),sd(q,l.ns,ce),sd(q,l.uv,yl),Zo(q,l.is,Ij)}catch(w){}if(q&&!B){if(B=o._prg=q.createProgram(),!B)return m;var $=o._dirs.length,U=o._spots.length,Z=o._59O.length,f=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uTransparent","uTexture","uSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];$&&f.push("uDirColor","uDirPosition"),U&&f.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotCenter"),Z&&f.push("uPointColor","uPointRange","uPointPosition"),hi(q,[0,0,0,0]),q.clearDepth(1),q.enable(q.DEPTH_TEST),q.depthFunc(q.LEQUAL),q.enable(q.BLEND),q.blendFunc(q.SRC_ALPHA,q.ONE_MINUS_SRC_ALPHA),yb||(bb=bd(bb.substring(0,bb.indexOf("^#"))),Sr=bd(Sr),yb=!0);var r=["#define MAX_DIR "+$,"#define MAX_SPOT "+U,"#define MAX_POINT "+Z,o._fogDisabled?"":"#define FOG",o._dashDisabled?"":"#define DASH",o._batchColorDisabled?"":"#define BATCHCOLOR",o._batchBlendDisabled?"":"#define BATCHBLEND",o._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),c=mg(q,B,q.VERTEX_SHADER,bb.replace("PREFIX",r)),T=mg(q,B,q.FRAGMENT_SHADER,Sr.replace("PREFIX",r));g?f.push("aPosition"):(B.aPosition=0,q.bindAttribLocation(B,0,"aPosition")),q.linkProgram(B),f.forEach(function(p){B[p]=/^u/.test(p)?q.getUniformLocation(B,p):q.getAttribLocation(B,p)}),q.useProgram(B),q.deleteShader(c),q.deleteShader(T)}return q},getBrightness:function(G){var s=G.s("brightness"),p=this.isSelected(G)?G.s("select.brightness"):m;return s==m?p:p==m?s:s*p},getWireframe:function(W){var b=W.s("wf.visible");return b===!0||"selected"===b&&this.isSelected(W)?{color:W.s("wf.color"),width:W.s("wf.width"),"short":W.s("wf.short"),mat:W.s("wf.mat")}:void 0},getBodyColor:function(j){return j.s("body.color")},getMat:function(k){return k.getMat?k.getMat():k.s("mat")},getFaceMat:function(L,I){return L.getFaceMat?L.getFaceMat(I):L.s(I+".mat")},getFaceBlend:function(W,j){return W.s(j+".blend")||W.s("all.blend")},getFaceColor:function(R,b){return R.s(b+".color")||R.s("all.color")},getFaceImage:function(v,c){return v.s(c+".image")||v.s("all.image")},getFaceDiscardSelectable:function(o,O){var p=o.s(O+".discard.selectable");return p==m?o.s("all.discard.selectable"):p},getFaceUv:function(i,s){return i.s(s+".uv")||i.s("all.uv")},getFaceUvOffset:function(p,e){return p.s(e+".uv.offset")||p.s("all.uv.offset")},getFaceUvScale:function(N,s){return N.s(s+".uv.scale")||N.s("all.uv.scale")},getFaceLight:function(C,X){var r=C.s(X+".light");return r==m?C.s("all.light"):r},getFaceVisible:function(l,X){var U=l.s(X+".visible");return U==m?l.s("all.visible"):U},getFaceOpacity:function(A,s){var P=A.s(s+".opacity");return P==m?A.s("all.opacity"):P},getFaceTransparent:function(d,v){var o=d.s(v+".transparent");return o==m?d.s("all.transparent"):o},getFaceReverseColor:function(F,Z){return F.s(Z+".reverse.color")||F.s("all.reverse.color")},getFaceReverseFlip:function(H,c){var E=H.s(c+".reverse.flip");return E==m?H.s("all.reverse.flip"):E},getFaceReverseCull:function(K,n){var h=K.s(n+".reverse.cull");return h==m?K.s("all.reverse.cull"):h},getTextureMap:function(){return this._2O},deleteTexture:function(i){var y=this,v=y._2O[i];v&&(delete y._2O[i],y.getGL().deleteTexture(v))},getTexture:function(N,q){if(!N)return m;var S=this,U=S.getGL(),j=S._2O[N];if(!j){var r=Em(N);if(r)if(r.tagName){if(r.dynamic)return ss(U,r,S._1O);j=S._2O[N]=ss(U,r)}else{var i=bp(r,q),A=Fd(r,q);if(i>=1&&A>=1){var Z=Aq(i,A);return ib(Z,r,0,0,i,A,q,S),Z.restore(),ss(U,Sf,S._1O)}}}return j},redraw:function(){this.iv()},validateImpl:function(){var g=this;if(g._lightChanged){g._lightChanged=!1;var $=[],j=[],A=[];g.dm().each(function(f){if(Gh(f)){var I=f.s("light.type");I===Eq?$.push(f):I===Ic?j.push(f):I===Mf&&A.push(f)}}),($.length!==g._59O.length||j.length!==g._spots.length||A.length!==g._dirs.length)&&Rq(g),g._59O=$,g._spots=j,g._dirs=A}g._42(),g._1o.iv()},_42:function(K,S){var Z=this;if(!Z._35O&&(!io||jc(io))){var d,H;K&&(K instanceof fc?H=K:d=K);var L=Z._canvas,D=Z.getWidth(),n=Z.getHeight(),c=Z.getGL(),Q=Z._prg;if(c){if(S?K||$q(L,D,n,S):(S=Z._devicePixelRatio||Jd,K||D===L.clientWidth&&n===L.clientHeight||$q(L,D,n,S)),c.viewport(0,0,D*S,n*S),Z._81O=m,c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),Yk(c,Q.uBrightness,1),Yk(c,Q.uOpacity,1),Yk(c,Q.uPartOpacity,1),c._picking=!!K,Yk(c,Q.uPick,!!K),Yk(c,Q.uTexture,!1),Yk(c,Q.uFix,!1),Yk(c,Q.uTransparent,!1),Yk(c,Q.uBatchColor,!1),Yk(c,Q.uBatchBlend,!1),Yk(c,Q.uBatchBrightness,!1),K||(qs(Z,c,Q),Z._fogDisabled||(Yk(c,Q.uFogColor,Z._fogColor),Yk(c,Q.uFogNear,Z._fogNear),Yk(c,Q.uFogFar,Z._fogFar))),rd(c,Q.aPosition),rd(c,Q.aNormal),gn(c,Q.aUv),gn(c,Q.aBatchColor),gn(c,Q.aBatchBlend),gn(c,Q.aBatchBrightness),gn(c,Q.aLineDistance),Yk(c,Q.uPMatrix,br(Z)),Yk(c,Q.uViewMatrix,Gi(Z,Z._7O)),H){var p=c.getParameter(c.COLOR_CLEAR_VALUE);c.clearColor(0,0,0,0),c.disable(c.BLEND),gn(c,Q.aNormal),sd(c,Z._cube.vs,m,Q.aPosition),Zo(c,Z._cube.is),Jr(H,Z,j,0),Jr(H,Z,a,6),Jr(H,Z,O,12),Jr(H,Z,B,18),Jr(H,Z,Jg,24),Jr(H,Z,He,30),rd(c,Q.aNormal),hi(c,p)}else if(d){d.value=2;var p=c.getParameter(c.COLOR_CLEAR_VALUE);c.clearColor(0,0,0,0),c.disable(c.BLEND),Z._95I(c,Q,d),xl(Z,d),Hr(Z,Z._polylineModelMap,d),Hr(Z,Z._wireframeModelMap,d),Yk(c,Q.uTransparent,!0),Z._95I(c,Q,d,!0),xl(Z,d,!0),Hr(Z,Z._polylineModelMap,d,!0),Hr(Z,Z._wireframeModelMap,d,!0),Yk(c,Q.uTransparent,!1),c.disable(c.DEPTH_TEST),Z._30O._42(c,Q,d),c.enable(c.DEPTH_TEST),hi(c,p)}else c.disable(c.BLEND),Z._31O._42(c,Q),Z._95I(c,Q),xl(Z),Hr(Z,Z._polylineModelMap),Hr(Z,Z._wireframeModelMap),c.enable(c.BLEND),c.depthMask(!1),Yk(c,Q.uTransparent,!0),Z._95I(c,Q,m,!0),xl(Z,m,!0),Hr(Z,Z._polylineModelMap,m,!0),Hr(Z,Z._wireframeModelMap,m,!0),Yk(c,Q.uTransparent,!1),c.depthMask(!0),c.disable(c.BLEND),c.disable(c.DEPTH_TEST),Z._32O._42(c,Q),Z._30O._42(c,Q),c.enable(c.DEPTH_TEST);sd(c,m),Zo(c,m),Z._33Q=!1}}},_95I:function(M,F,Z,n){var q=this,V=function(h){return n?h:!h};q.dm().each(function(t){if(q.isVisible(t)){if(!Z&&q.isTransparentMask(t))return;var U=q.getData3dUI(t);U&&U._42(M,F,Z,V)}})},getLogicalPoint:function(b){return Mm(b,this._canvas)},getHitFaceInfo:function(c){c.target&&(c=this.lp(c));var b=this.getDataInfoAt(c);if(b){var r=this._1o.face(b.data,Vf(c.x,c.y));if(r)return{data:b.data,face:r}}return m},getDataAt:function(X){var t=this.getDataInfoAt(X);return t?t.data:m},getDataInfoAt:function(R,O){return R.target&&(R=this.lp(R)),this._1o.get(Vf(R.x,R.y,O),!0)},getDatasInRect:function(M){return this._1o.get(M)},setEditable:function($){var T=this,w=T._editable;T._editable=$,this.fp(Zg,w,$)},isEditable:function(v){var E=this;return E._editable?qh(v)?v.s("3d.editable")?E._editableFunc?E._editableFunc(v):!0:!1:!1:!1},isSelectable:function(C){return C.s("3d.selectable")&&this.sm().isSelectable(C)},isMovable:function(n){var V=this;return hc(n)&&n.getStyle(ac)!==_k?!1:n.s("3d.movable")?V._movableFunc?V._movableFunc(n):!0:!1},isSizeEditable:function(U){return qh(U)?this._sizeEditableFunc?this._sizeEditableFunc(U):!0:!1},isRotationEditable:function(w){return qh(w)&&w.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(w):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(g){this.setZoom(sh,g)},zoomOut:function(M){this.setZoom(1/sh,M)},setZoom:function(L,P){if(1!==L){var A=this;if(A._ortho)return A.setOrthoZoom(L,P),void 0;A._14o&&A._14o.stop(!0);var F=1/L,V=A._eye,Z=A._center,W=Z[0]+(V[0]-Z[0])*F-V[0],S=Z[1]+(V[1]-Z[1])*F-V[1],y=Z[2]+(V[2]-Z[2])*F-V[2];if(!(Dj(V,Z)<A._moveStep&&1>F)){if(P=Fg(P)){var j=qj(V);return P.action=function(U){A.fi({kind:A._zooming?"betweenZoom":"beginZoom"}),A._zooming=1,V[0]=j[0]+W*U,V[1]=j[1]+S*U,V[2]=j[2]+y*U,A.fp(Hg,m,V)},P._37o=function(){delete A._14o,delete A._zooming,A.fi({kind:"endZoom"}),A.onZoomEnded()},A._14o=wo(P)}V[0]+=W,V[1]+=S,V[2]+=y,A.fp(Hg,m,V)}}},setOrthoZoom:function(m,s){if(1!==m){var X=this;X._14o&&X._14o.stop(!0);var o=X._orthoWidth,l=o/m-o;if(!(o<X._moveStep&&m>1))return(s=Fg(s))?(s.action=function(B){X.fi({kind:X._zooming?"betweenZoom":"beginZoom"}),X._zooming=1,X.setOrthoWidth(o+l*B)},s._37o=function(){delete X._14o,delete X._zooming,X.fi({kind:"endZoom"}),X.onZoomEnded()},X._14o=wo(s)):(X.setOrthoWidth(o/m),void 0)}},getPositionInfo:function(m){var J=this,i=J._eye,O=J._center,g=J.getAspect(),r=m?En(qd(O,i,!0),qd(m,i)):Dj(i,O);if(J._ortho){var h=J._orthoWidth;return{length:r,height:h/g,width:h}}var Y=2*A(J._fovy/2)*r;return{length:r,height:Y,width:Y*g}},getCenterInfo:function(){var j=this;return j._81O||(j._81O=j.getPositionInfo()),qj(j._81O)},rotate:function(K,C,S,u){var F=this;if(K||C){u==m&&(u=F._firstPersonMode),F._88O&&F._88O.stop(!0);var z=F._center,E=F._eye,J=F.getCenterInfo().length,_=u?z:E,O=u?E:z,I=qd(_,O),c=P(I[0],I[2]),g=P(n(I[0]*I[0]+I[2]*I[2]),I[1]),R=u?xn:Hg;return u&&(C=-C),(S=Fg(S))?(S.action=function(b){F.fi({kind:F._rotating?"betweenRotate":"beginRotate"}),F._rotating=1;var k=c+K*b,e=g+C*b;e=Yb(e),I[0]=J*l(e)*l(k),I[1]=J*V(e),I[2]=J*l(e)*V(k),_[0]=O[0]+I[0],_[1]=O[1]+I[1],_[2]=O[2]+I[2],F.fp(R,m,_)},S._37o=function(){delete F._88O,delete F._rotating,F.fi({kind:"endRotate"}),F.onRotateEnded()},F._88O=wo(S)):(c+=K,g+=C,g=Yb(g),I[0]=J*l(g)*l(c),I[1]=J*V(g),I[2]=J*l(g)*V(c),_[0]=O[0]+I[0],_[1]=O[1]+I[1],_[2]=O[2]+I[2],F.fp(R,m,_),void 0)}},pan:function(u,P,d,s){if(u||P){var H=this;s==m&&(s=H._firstPersonMode),H._89O&&H._89O.stop(!0);var f=Gi(H),e=[f[0]*u,f[4]*u,f[8]*u],F=[f[1]*P,f[5]*P,f[9]*P],N=e[0]+F[0],K=e[1]+F[1],o=e[2]+F[2],O=H._center,X=H._eye;if(s){var w=rc(H.getBoundaries(),X[0],X[2],X[0]+N,X[2]+o,n(N*N+o*o));N=w[0],o=w[1]}if(d=Fg(d)){var C=qj(X),y=qj(O);return d.action=function(W){H.fi({kind:H._panning?"betweenPan":"beginPan"}),H._panning=1,O[0]=y[0]+N*W,O[1]=y[1]+K*W,O[2]=y[2]+o*W,X[0]=C[0]+N*W,X[1]=C[1]+K*W,X[2]=C[2]+o*W,H.fp(Hg,m,X),H.fp(xn,m,O)},d._37o=function(){delete H._89O,delete H._panning,H.fi({kind:"endPan"}),H.onPanEnded()},H._89O=wo(d)}O[0]+=N,O[1]+=K,O[2]+=o,X[0]+=N,X[1]+=K,X[2]+=o,H.fp(Hg,m,X),H.fp(xn,m,O)}},walk:function(w,V,H){if(w){var U=this;H==m&&(H=U._firstPersonMode),U._90O&&U._90O.stop(!0);var B=U._center,s=U._eye,t=qd(B,s,!0);if(H){var v=rc(U.getBoundaries(),s[0],s[2],s[0]+t[0]*w,s[2]+t[2]*w,Y(w));if(w=Dj(v),!w)return;t=[v[0]/w,0,v[1]/w]}if(V=Fg(V)){var Z=qj(s),X=qj(B);return V.action=function(L){U.fi({kind:U._walking?"betweenWalk":"beginWalk"}),U._walking=1;var a=w*L;s[0]=Z[0]+t[0]*a,s[1]=Z[1]+t[1]*a,s[2]=Z[2]+t[2]*a,B[0]=X[0]+t[0]*a,B[1]=X[1]+t[1]*a,B[2]=X[2]+t[2]*a,U.fp(Hg,m,s),U.fp(xn,m,B)
},V._37o=function(){delete U._90O,delete U._walking,U.fi({kind:"endWalk"}),U.onWalkEnded()},U._90O=wo(V)}s[0]+=t[0]*w,s[1]+=t[1]*w,s[2]+=t[2]*w,B[0]+=t[0]*w,B[1]+=t[1]*w,B[2]+=t[2]*w,U.fp(Hg,m,s),U.fp(xn,m,B)}},handleScroll:function(c,f){c.preventDefault();var K=this,C=K._moveStep;K.isFirstPersonMode()?K.isPannable()&&K.pan(0,f>0?C:-C):K.isZoomable()&&K.setZoom(0>f?1/jd:jd)},handlePinch:function(E,Q){this.isZoomable()&&this.setZoom(Q>E?1/de:de)},reset:function(){this.setCenter(e.graph3dViewCenter),this.setEye(e.graph3dViewEye),this.setUp(e.graph3dViewUp)},moveSelection:function(K,x,c){var B,m=this,w=m.dm();w&&(B=w.getHistoryManager()),B&&B.beginInteraction(),oe(this.sm().toSelection(this.isMovable,this),K,x,c),B&&B.endInteraction()},getMoveMode:function(T,W){var E=W.s("3d.move.mode");if(E)return E;var s="88",c="89",M="90";return Do(T)||sp[s]&&sp[c]&&sp[M]?"xyz":sp[s]&&sp[c]?"xy":sp[s]&&sp[M]?"xz":sp[c]&&sp[M]?"yz":sp[s]?"x":sp[c]?"y":sp[M]?"z":"xz"},handleTick:function(){var r=this,Y=!1,G=r._moveStep,g=G,T=!1,l=!0,O=r._rotateStep*(l?-1:1);if(r.isWalkable()||(g=0),r.isPannable()||(G=0),r.isRotatable()||(O=0),r._32Q){var n=(Yr()-r._32Q)/50;g*=n,G*=n,O*=n}r._31Q&&(Ac(r._31Q),delete r._31Q,delete r._32Q),lj()&&(Y=!0,r.pan(-G,0,T,l)),nq()&&(Y=!0,r.pan(G,0,T,l)),Re()&&(Y=!0,Do()?r.pan(0,G,T,l):r.walk(g,T,l)),Xd()&&(Y=!0,Do()?r.pan(0,-G,T,l):r.walk(-g,T,l)),cb()&&(Y=!0,r.rotate(-O,0,T,l)),Um()&&(Y=!0,r.rotate(O,0,T,l)),ek()&&(Y=!0,r.rotate(0,-O/2,T,l)),vp()&&(Y=!0,r.rotate(0,O/2,T,l)),Y&&(r._32Q=Yr(),r._31Q=md(r.handleTick,r))},handleKeyDown:function(J){var p=this;!Bd(J)&&ym[J.keyCode]?p.handleTick():tq(J)?p.selectAll():el(J)?p.handleDelete(J):eg(J)&&this.isResettable()&&p.reset()},checkDoubleClickOnNote:function(n,e,V){var y=this;if(V===qi){if(e.s("note.toggleable"))return e.s(As,!e.s(As)),y.fi({kind:"toggleNote",event:n,data:e,part:V}),!0}else if(V===bm&&e.s("note2.toggleable"))return e.s(Bn,!e.s(Bn)),y.fi({kind:"toggleNote2",event:n,data:e,part:V}),!0;return!1},checkDoubleClickOnRotation:function(D,O,X){return X===sb?(O.setRotationX(0),!0):X===bg?(O.setRotationY(0),!0):X===No?(O.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(L){var s=this,a=s.getWidth()/2,p=s.getHeight()/2,r=s._18Q;return r||(r=br(s),s._18Q=dh(r,r,Gi(s))),L=jr([L[0],L[1],L[2],1],r),{x:a+a*L[0]/L[3],y:p-p*L[1]/L[3]}},getHitPosition:function(o,g,R){var W=this,U=W.getWidth(),c=W.getHeight(),S=o.target?W.lp(o):o,v=S.x-U/2,M=S.y-c/2,V=W.getCenterInfo(),s=Gi(W);g=g?g:[0,0,0],R=R?R:[0,1,0],v=v/U*V.width,M=-1*M/c*V.height;var I=[s[0]*v,s[4]*v,s[8]*v],t=[s[1]*M,s[5]*M,s[9]*M],_=[I[0]+t[0],I[1]+t[1],I[2]+t[2]],w=W.getCenter(),Q=jf(W,g,R,[_[0]+w[0],_[1]+w[1],_[2]+w[2]]);return Q?Q:[0,0,0]},getLineLength:function(U){this.validate();var P=this.getData3dUI(U);if(P&&P.getCache){var V=P.getCache();if(V)return V[V.length-1].length}return 0},getLineOffset:function(G,r){this.validate();var g=this.getData3dUI(G);if(g&&g.getCache){var M=g.getCache();if(M)return ye(M,r)}return m}});var dm=Tq.Interactor=function(u){this.gv=u};qg("Interactor",$,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var Co=Tq.DefaultInteractor=function(b){kd(Co,this,[b])};qg("DefaultInteractor",dm,{handle_contextmenu:function(r){xf(r)},handle_mousewheel:function(t){this.gv.handleScroll(t,t.wheelDelta/40)},handle_DOMMouseScroll:function(V){2===V.axis&&this.gv.handleScroll(V,-V.detail)},handle_keydown:function(m){this.gv.handleKeyDown(m)},handle_mousedown:function(Z){this.handle_touchstart(Z)},handle_touchstart:function(j){xf(j);var c=this,A=c.gv,p=Kh(j),o=A.getDataInfoAt(j),w=o?o.data:m,I=o?o.part:m,F=A.sm(),a=Rf(j),r=hb(j);A.setFocus(j)&&(c._62O=m,c._57I=m,w?Bd(j)?F.co(w)?F.rs(w):F.as(w):F.co(w)||F.ss(w):p&&(Bd(j)?A.isRectSelectable()&&(c._62O=cd):c._57I=Pk(j)),c._31Q&&(Ac(c._31Q),delete c._31Q,delete c._32Q),c._62O||(A.isFirstPersonMode()&&(Do(j)||r>2?c._62O="pan":A.isMouseRoamable()||q?(c._62O="roaming",c.foward=a&&Kh(j),c._32Q=Yr(),c._31Q=md(c.tick,c)):p||(c._62O="roaming")),c._62O||(p&&a&&dr[I]?(c._62O=I,c.p3=w.p3()):p&&a&&qh(w)&&A.isSelected(w)&&A.isMovable(w)?(c._62O="move",c.p3=w.p3(),c.movedata=w):q&&(r>2?c._62O="pan":2===r&&(c.dist=sg(j),c._62O="pinch")))),c.point=A.lp(j),yo(c,j),Ql(j)?A.handleDoubleClick(j,w,I):A.handleClick(j,w,I))},tick:function(){var v=this,V=v.gv,G=V._moveStep;v.point&&V.isWalkable()&&(v._32Q&&(G*=(Yr()-v._32Q)/50),V.walk(v.foward?G:-G),v._32Q=Yr(),v._31Q=md(v.tick,v))},handle_mouseup:function(Z){this.handle_touchend(Z)},handle_touchend:function(f){var x=this._57I;x&&(Dj(x,Pk(f))<=1&&this.gv.sm().cs(),this._57I=m)},handleWindowMouseMove:function(i){this.handleWindowTouchMove(i)},handleWindowTouchMove:function(Q){var e,l,M=this,x=M.gv,y=M._62O,u=M.point,G=x.dm(),Z=G.getHistoryManager(),O=x.lp(Q),o=O.x-u.x,L=O.y-u.y,i=-X*o/x.getWidth(),E=-X*L/x.getHeight();if("roaming"===y)M.rotate(Q,i/2,E/2);else if(y===sb||y===bg||y===No)Z&&!x._86O&&Z.beginInteraction(),x.fi({kind:x._86O?"betweenEditRotation":"beginEditRotation",event:Q}),x._86O=1,x.sm().each(function(t){if(qh(t)&&x.isRotationEditable(t)){var e=Y(i)>Y(E)?i:E;y===sb?t.setRotationX(t.getRotationX()+e):y===bg?t.setRotationY(t.getRotationY()+e):y===No&&t.setRotationZ(t.getRotationZ()+e)}});else if("move"===y||dr[y]){y===op||y===ee||y===Sh?(Z&&!x._87O&&Z.beginInteraction(),x.fi({kind:x._87O?"betweenEditSize":"beginEditSize",event:Q}),x._87O=1):(Z&&!x._moving&&Z.beginInteraction(),x.fi({kind:x._moving?"betweenMove":"beginMove",event:Q}),x._moving=1);var f,D=M.p3,b=x.getPositionInfo(D),N=Gi(x);f=y===Xb?"x":y===vs?"y":y===$i?"z":y===op?"sx":y===ee?"sy":y===Sh?"sz":x.getMoveMode(Q,M.movedata),o=o/x.getWidth()*b.width,L=-1*L/x.getHeight()*b.height;var h,r,T=[N[0]*o,N[4]*o,N[8]*o],C=[N[1]*L,N[5]*L,N[9]*L],F=T[0]+C[0],$=T[1]+C[1],m=T[2]+C[2],q=[D[0]+F,D[1]+$,D[2]+m],B=qd(x.getEye(),q,!0);if("xyz"===f?(h=q,x.moveSelection(F,$,m)):"xz"===f?(h=jf(x,D,[0,1,0],q),h&&x.moveSelection(h[0]-D[0],0,h[2]-D[2])):"xy"===f?(h=jf(x,D,[0,0,1],q),h&&x.moveSelection(h[0]-D[0],h[1]-D[1],0)):"yz"===f?(h=jf(x,D,[1,0,0],q),h&&x.moveSelection(0,h[1]-D[1],h[2]-D[2])):"x"===f||"sx"===f?(B[0]=0,h=jf(x,D,B,q),h&&(r=h[0]-D[0],"x"===f?x.moveSelection(r,0,0):x.sm().each(function(L){qh(L)&&x.isSizeEditable(L)&&(e=k(Rp,L.getWidth()+r),l=e/L.getWidth(),L.setWidth(e),Do(Q)&&(L.setHeight(L.getHeight()*l),L.setTall(L.getTall()*l)))}))):"y"===f||"sy"===f?(B[1]=0,h=jf(x,D,B,q),h&&(r=h[1]-D[1],"y"===f?x.moveSelection(0,r,0):x.sm().each(function(n){qh(n)&&x.isSizeEditable(n)&&(e=k(Rp,n.getTall()+r),l=e/n.getTall(),n.setTall(e),Do(Q)&&(n.setHeight(n.getHeight()*l),n.setWidth(n.getWidth()*l)))}))):("z"===f||"sz"===f)&&(B[2]=0,h=jf(x,D,B,q),h&&(r=h[2]-D[2],"z"===f?x.moveSelection(0,0,r):x.sm().each(function(p){qh(p)&&x.isSizeEditable(p)&&(e=k(Rp,p.getHeight()+r),l=e/p.getHeight(),p.setHeight(e),Do(Q)&&(p.setTall(p.getTall()*l),p.setWidth(p.getWidth()*l)))}))),!h)return;M.p3=h}else if(y===cd){var V=M.div;V||(V=M.div=fq(),If(M.getView(),V),V.op=u,V.style.background=x.getRectSelectBackground()),x.fi({kind:x._rectSelecting?"betweenRectSelect":"beginRectSelect",event:Q}),x._rectSelecting=1,V.rect=wb(V.op,O),Sq(V,V.rect)}else if("pinch"===y&&2===hb(Q)){x.fi({kind:x._pinching?"betweenPinch":"beginPinch",event:Q}),x._pinching=1;var r=sg(Q);x.handlePinch(r,M.dist),M.dist=r}else"pan"===y||Do(Q)?M.pan(Q,o,L):x.isFirstPersonMode()||(Kh(Q)?M.rotate(Q,i,E):(M.pan(Q,o,0),x.isWalkable()&&(x.fi({kind:x._walking?"betweenWalk":"beginWalk",event:Q}),x._walking=1,x.walk(L/x.getHeight()*x.getCenterInfo().height))));M.point=O},pan:function(Q,B,S){var k=this.gv;if(k.isPannable()){var m=k.getCenterInfo(),U=B/k.getWidth()*m.width,P=-1*S/k.getHeight()*m.height;k.fi({kind:k._panning?"betweenPan":"beginPan",event:Q}),k._panning=1,k.pan(-U,-P)}},rotate:function(H,c,k){var L=this.gv;L.isRotatable()&&(L.fi({kind:L._rotating?"betweenRotate":"beginRotate",event:H}),L._rotating=1,L.rotate(c,k))},handleWindowMouseUp:function(_){this.handleWindowTouchEnd(_)},handleWindowTouchEnd:function(L){var $=this,B=$.gv,k=B.dm(),w=k.getHistoryManager(),z=$.div;if(z){var F=B.getDatasInRect(z.rect);if(!F.isEmpty()){var r=B.sm(),b=r.toSelection();F.each(function(O){r.co(O)?b.remove(O):b.add(O)}),r.ss(b)}Cs(z)}B._moving&&(delete B._moving,B.fi({kind:"endMove",event:L}),B.onMoveEnded(),w&&w.endInteraction()),B._panning&&(delete B._panning,B.fi({kind:"endPan",event:L}),B.onPanEnded()),B._rotating&&(delete B._rotating,B.fi({kind:"endRotate",event:L}),B.onRotateEnded()),B._86O&&(delete B._86O,B.fi({kind:"endEditRotation",event:L}),w&&w.endInteraction()),B._87O&&(delete B._87O,B.fi({kind:"endEditSize",event:L}),w&&w.endInteraction()),B._pinching&&(delete B._pinching,B.fi({kind:"endPinch",event:L}),B.onPinchEnded()),B._rectSelecting&&(delete B._rectSelecting,B.fi({kind:"endRectSelect",event:L}),B.onRectSelectEnded()),B._walking&&(delete B._walking,B.fi({kind:"endWalk",event:L}),B.onWalkEnded()),$.dist=$.point=$._62O=$.p3=$.movedata=$.div=$._57I=$._32Q=$._31Q=$.foward=m}});var qc=function(i){this.gv=i};qn(qc,$,{_iv:!0,iv:function(){this._iv=!0},face:function(j,n){var g=this,D=g.gv.getGL();if(!D||!qh(j))return m;var h=n.x,z=n.width,E=n.height,Z=g.height-n.y-E,k=w(z/2),Q=new Uint8Array(4*z*E),P=0;for(g.iv(),g.validate(j),mj(D,g.frame),D.readPixels(h,Z,z,E,D.RGBA,D.UNSIGNED_BYTE,Q),mj(D,m),g.iv();k>=P;P++)for(var e=k-P,H=k+P,d=e;H>=d;d++)for(var c=e;H>=c;c++)if(d===e||d===H||c===e||c===H){var C=Jf.m[Q[4*(d*z+c)]];if(C)return C}},get:function(Z,i){this.validate();var X=this,t=X.gv.getGL();if(!t)return m;var M,u,d=Z.x,G=Z.width,y=Z.height,O=X.height-Z.y-y,l=w(G/2),L=new Uint8Array(4*G*y),g=0,K=L.length,f=i?m:new om,F=i?m:{};if(mj(t,X.frame),t.readPixels(d,O,G,y,t.RGBA,t.UNSIGNED_BYTE,L),mj(t,m),i){for(;l>=g;g++)for(var S=l-g,H=l+g,c=S;H>=c;c++)for(var v=S;H>=v;v++)if((c===S||c===H||v===S||v===H)&&(M=X.info(L,4*(c*G+v))))return M}else for(;K>g;g+=4)M=X.info(L,g),M&&(u=M.data,F[u._id]||(f.add(u),F[u._id]=u));return f},info:function(a,v){return this.colorMap[(a[v]<<24)+(a[v+1]<<16)+(a[v+2]<<8)+a[v+3]]},validate:function(M){var J=this,y=J.gv,u=y.getGL();if(u){var D=y.getWidth(),F=y.getHeight(),E=u.RGBA,d=u.TEXTURE_2D,L=u.RENDERBUFFER,t=u.FRAMEBUFFER;J.texture||(J.texture=ss(u),J.render=u.createRenderbuffer(),J.frame=u.createFramebuffer()),(J.width!==D||J.height!==F)&&(ui(u,J.texture),u.texImage2D(d,0,E,D,F,0,E,u.UNSIGNED_BYTE,m),oq(u,u.TEXTURE_MIN_FILTER,u.LINEAR),u.bindRenderbuffer(L,J.render),u.renderbufferStorage(L,u.DEPTH_COMPONENT16,D,F),mj(u,J.frame),u.framebufferTexture2D(t,u.COLOR_ATTACHMENT0,d,J.texture,0),u.framebufferRenderbuffer(t,u.DEPTH_ATTACHMENT,L,J.render),ui(u,m),u.bindRenderbuffer(L,m),mj(u,m),J.width=D,J.height=F),J._iv&&(J._iv=!1,mj(u,J.frame),y._42(M||(J.colorMap={}),1),mj(u,m))}}});var Qr=function(E){this.gv=E};qn(Qr,$,{gap:0,size:0,_42:function(I,Z){var f=this,c=f.gv,H=c._gridGap,g=c._gridSize;if(c._gridVisible){if(f.gap!==H||f.size!==g){for(var S=[],s=c._gridSize/2,o=H*s,V=0;2*s+1>V;V++){var $=6*V,E=6*(2*s+1)+$;S[$]=-o,S[$+1]=0,S[$+2]=-o+V*H,S[$+3]=o,S[$+4]=0,S[$+5]=-o+V*H,S[E]=-o+V*H,S[E+1]=0,S[E+2]=-o,S[E+3]=-o+V*H,S[E+4]=0,S[E+5]=o}f.vs=new uf(S),f.gap=H,f.size=g}ko(c),Mq(I,Z),ch(I,Z,1,c._gridColor,c._buffer.vs,f.vs),zq(I,0,f.vs.length/3,I.LINES),ik(I,Z)}else f.vs=f.gap=f.size=m}});var so=function(j){this.gv=j};qn(so,$,{_42:function(b,n){var P=this.gv,O=P._buffer.vs,M=P._axisXColor,u=P._axisYColor,q=P._axisZColor,d=P._originAxisVisible,v=P._centerAxisVisible;if(d||v){var k=g?b.TRIANGLES:b.TRIANGLE_FAN,z=b.LINES;if(ko(P),Mq(b,n),d){var C=P.getCenterInfo(),D=_(C.width,C.height)/5,i=.8*D,e=.05*D;ch(b,n,1.5,M,O,new uf([0,0,0,D,0,0,i,e,0,i,0,e,i,-e,0,i,0,-e,i,e,0,0,0,0,0,D,0,e,i,0,0,i,e,-e,i,0,0,i,-e,e,i,0,0,0,0,0,0,D,e,0,i,0,e,i,-e,0,i,0,-e,i,e,0,i])),zq(b,0,2,z),zq(b,1,6,k),ch(b,n,m,u),zq(b,7,2,z),zq(b,8,6,k),ch(b,n,m,q),zq(b,14,2,z),zq(b,15,6,k)}if(v){var X=P._center,Q=X[0],F=X[1],K=X[2],C=P.getPositionInfo(X);D=_(C.width,C.height)/20,ch(b,n,1.5,M,O,new uf([Q,F,K,Q+D,F,K,Q,F,K,Q,F+D,K,Q,F,K,Q,F,K+D])),zq(b,0,2,z),ch(b,n,m,u),zq(b,2,2,z),ch(b,n,m,q),zq(b,4,2,z)}ik(b,n)}}});var Ce=function(T){this.gv=T},Xb="edit_tx",vs="edit_ty",$i="edit_tz",sb="edit_rx",bg="edit_ry",No="edit_rz",op="edit_sx",ee="edit_sy",Sh="edit_sz",dr={};dr[Xb]=1,dr[vs]=1,dr[$i]=1,dr[sb]=1,dr[bg]=1,dr[No]=1,dr[op]=1,dr[ee]=1,dr[Sh]=1,qn(Ce,$,{_42:function(y,J,T){var h=this,W=h.gv,u=W.sm().ld();if(W.isEditable(u)&&qh(u)&&(!W.isFirstPersonMode()||!W.isMouseRoamable()&&!q)){ko(W);var a,L,z=W.isMovable(u),P=W.isRotationEditable(u),Z=W.isSizeEditable(u),O=W._axisXColor,A=W._axisYColor,B=W._axisZColor,K=W._editSizeColor,N=W.getCenterInfo(),k=_(N.width,N.height)/10,C=k/(T?5:10),p=.7*k,e=.4*p,H=u.p3(),S=H[0],j=H[1],r=H[2];a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],z&&h._17O(y,J,u,T,Xb,O,a,[S,j-C,r,S+p,j-C,r,S+p,j,r,S+p,j,r,S,j,r,S,j-C,r,S,j-C,r+C,S+p,j-C,r+C,S+p,j-C,r,S+p,j-C,r,S,j-C,r,S,j-C,r+C]),L=S+p,Z&&h._17O(y,J,u,T,op,K,a,[L,j-C,r,L+e,j-C,r,L+e,j,r,L+e,j,r,L,j,r,L,j-C,r,L,j-C,r+C,L+e,j-C,r+C,L+e,j-C,r,L+e,j-C,r,L,j-C,r,L,j-C,r+C]),L+=e,P&&h._17O(y,J,u,T,sb,O,a,[L,j-C,r,L+e,j-C,r,L+e,j,r,L+e,j,r,L,j,r,L,j-C,r,L,j-C,r+C,L+e,j-C,r+C,L+e,j-C,r,L+e,j-C,r,L,j-C,r,L,j-C,r+C]),a=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],z&&h._17O(y,J,u,T,vs,A,a,[S,j,r,S,j+p,r,S-C,j+p,r,S-C,j+p,r,S-C,j,r,S,j,r,S,j,r,S,j,r-C,S,j+p,r-C,S,j+p,r-C,S,j+p,r,S,j,r]),L=j+p,Z&&h._17O(y,J,u,T,ee,K,a,[S,L,r,S,L+e,r,S-C,L+e,r,S-C,L+e,r,S-C,L,r,S,L,r,S,L,r,S,L,r-C,S,L+e,r-C,S,L+e,r-C,S,L+e,r,S,L,r]),L+=e,P&&h._17O(y,J,u,T,bg,A,a,[S,L,r,S,L+e,r,S-C,L+e,r,S-C,L+e,r,S-C,L,r,S,L,r,S,L,r,S,L,r-C,S,L+e,r-C,S,L+e,r-C,S,L+e,r,S,L,r]),a=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],z&&h._17O(y,J,u,T,$i,B,a,[S,j,r,S,j,r+p,S,j-C,r+p,S,j-C,r+p,S,j-C,r,S,j,r,S,j-C,r,S-C,j-C,r,S-C,j-C,r+p,S-C,j-C,r+p,S,j-C,r+p,S,j-C,r]),L=r+p,Z&&h._17O(y,J,u,T,Sh,K,a,[S,j,L,S,j,L+e,S,j-C,L+e,S,j-C,L+e,S,j-C,L,S,j,L,S,j-C,L,S-C,j-C,L,S-C,j-C,L+e,S-C,j-C,L+e,S,j-C,L+e,S,j-C,L]),L+=e,P&&h._17O(y,J,u,T,No,B,a,[S,j,L,S,j,L+e,S,j-C,L+e,S,j-C,L+e,S,j-C,L,S,j,L,S,j-C,L,S-C,j-C,L,S-C,j-C,L+e,S-C,j-C,L+e,S,j-C,L+e,S,j-C,L])}},_17O:function(G,J,V,H,S,f,u,L){var z=this.gv._buffer;Cc(G,J,H,!0,V,S),Sm(G,J,m,!0,m,!0,m,!1),Yk(G,J.uDiffuse,f),sd(G,z.vs,new uf(L),J.aPosition),sd(G,z.ns,new uf(u),J.aNormal),zq(G,0,12),ps(G,J)}});var Ml=function(V,X){this.gv=V,this.s=function(d,z,p){return z==m&&(z=p),z==m?X.getStyle(d):Ge(z,X,V)},this.data=X};qn(Ml,$,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(W,S,B,X){var x,e,O,q,_,a,Z,M=this,j=M.gv,V=M.data,L=V._id,r=M.s("batch"),g=j._34O,$=j._33O,G=j.isSelectable(V),D=j.getBrightness(V),s=D!=m&&1!==D;if(M._iv){if(O=Iq(g,$,V,r),M.validate(O,r?me[r]||tl:m),O&&(q=g[L],_=q.size=O.vs.length/3-q.begin,Z=O.rs))for(D=s?D:1,a=0;_>a;a++)Z.push(D);if(qh(V)){var K=j.getWireframe(V);K&&Dg(j,V,K)}M.labelInfo=M.label2Info=M.noteInfo=M.note2Info=M._38o=m,M._24O(bq,"getLabel"),M._24O(Nm,"getLabel2"),M._26O(qi,"getNote"),M._26O(bm,"getNote2"),M._15O(),M._iv=!1}s&&Yk(W,S.uBrightness,D),e=Cc(W,S,B,G,V,Qd),e&&(bi(e,g[L],$),bi(e,j._polylineIndexMap[L],j._polylineModelMap),bi(e,j._wireframeIndexMap[L],j._wireframeModelMap)),g[L]||M._80o(W,S,X),(x=M.labelInfo)&&(Cc(W,S,B,G,V,bq),M._28O(x,bq,X)),(x=M.label2Info)&&(Cc(W,S,B,G,V,Nm),M._28O(x,Nm,X)),(x=M.noteInfo)&&(Cc(W,S,B,G,V,qi),M._29O(x,qi,X)),(x=M.note2Info)&&(Cc(W,S,B,G,V,bm),M._29O(x,bm,X)),(x=M._38o)&&M._99O(W,S,x,B,G,X),s&&Yk(W,S.uBrightness,1)},validate:function(){},_16O:function(){return Bk},_80o:function(){},dispose:function(){},getBodyColor:function(g){var A=this.data,o=this.gv.getBodyColor(A);return o?o:g?A.getStyle(g):m},_24O:function(K,V){var d=this,s=d.data,p=d.gv,M=d.s,E=p[V](s);if(E!=m){var J=M(K+".scale"),D=M(K+".max"),_=d[K+"Info"]={label:E,textureScale:M(K+".texture.scale"),color:p[V+"Color"](s),font:M(K+".font"),align:M(K+".align"),background:p[V+"Background"](s)},L=_.rect=ij(_,E);D>0&&D<L.width&&(_.labelWidth=L.width,L.width=D),L.x=L.y=0,L.width*=J,L.height*=J,_.mat=d._16O(M(K+".autorotate"),M(K+".position"),L,M(K+".face"),M(K+".t3"),M(K+".r3"),M(K+".rotationMode"));var G=L.width/2,j=L.height/2;_.vs=new uf([-G,j,0,-G,-j,0,G,-j,0,G,j,0]),L.width/=J,L.height/=J}},_26O:function(j,B){var w=this,O=w.data,H=w.gv,c=w.s,S=H[B](O);if(S!=m){var W=c(j+".scale"),M=this[j+"Info"]={note:S,textureScale:c(j+".texture.scale"),expanded:c(j+".expanded"),font:c(j+".font"),color:c(j+".color"),align:c(j+".align"),borderWidth:c(j+".border.width"),borderColor:c(j+".border.color"),background:H[B+"Background"](O)};if(M.expanded){var h=c(j+".max"),t=ij(M,S);t.width+=6,t.height+=2,h>0&&h<t.width&&(M.labelWidth=t.width,t.width=h);var r={x:-t.width/2,y:-8-t.height,width:t.width,height:t.height+8}}else r={x:-6,y:-18,width:12,height:18};M.mat=w._16O(c(j+".autorotate"),c(j+".position"),m,c(j+".face"),c(j+".t3"),c(j+".r3"),c(j+".rotationMode")),M.rect=r,1!==W&&(r=qj(r),r.x*=W,r.height*=W,r.y=-r.height,r.width*=W);var p=r.x,b=r.y,I=r.width,E=r.height;M.vs=new uf([p,-b,0,p,-b-E,0,p+I,-b-E,0,p+I,-b,0])}},_28O:function(U,E,L){if(L(this.s(E+".transparent"))){var i=U.rect,X=U.textureScale,T=i.width*X,J=i.height*X;if(T>=1&&J>=1){var p=Aq(T,J);1!==X&&(p.translate(p,i.x,i.y),p.scale(X,X),p.translate(p,-i.x,-i.y)),Pl(p,U),p.restore(),Pd(this,E,U.mat,U.vs,!0)}}},_29O:function(b,D,P){if(P(this.s(D+".transparent"))){var y=b.rect,l=b.textureScale,H=y.x,J=y.y,C=y.width*l,e=y.height*l;if(C>=1&&e>=1){y.x=y.y=0;var r=Aq(C,e);1!==l&&r.scale(l,l),Oo(r,b),r.restore(),y.x=H,y.y=J,Pd(this,D,b.mat,b.vs,!1)}}},_99O:function(E,x,o,w,y,N){if(o){var b=this,T=b.gv,k=b.data,Z=T._buffer,i=T._1O,j=o.icons;for(var G in j){var s=j[G],z=o.rects[G];if(z&&N(Ge(s.transparent,k,T))){Cc(E,x,w,y,k,G);var Q=Ge(s.shape3d,k,T),a=Q?[Q]:Ge(s.names,k,T),g=a?a.length:0,L=Ge(s.textureScale,k,T)||1,c=Ge(s.light,k,T);c==m&&(c=Q?!0:!1),Sm(E,x,Ge(s.blend,k,T),c,Ge(s.opacity,k,T),Ge(s.reverseFlip,k,T),Ge(s.reverseColor,k,T),Ge(s.reverseCull,k,T));for(var S=0;g>S;S++){var B=a[S],n=z[S];if(vc(b,n.mat),Q)Cb(T,k,hd(b.s,Q),b.s);else{var M=Em(B);if(M){var v=n.width*L,U=n.height*L;if(v>=1&&U>=1){var C=Aq(v,U);bj(C,M,Ge(s.stretch,k,T),0,0,v,U,k,T),C.restore(),ss(E,Sf,i),kk(E,x,i,Ge(s.discardSelectable,k,T),Z.uv,zp),sd(E,Z.vs,n.vs,x.aPosition),sd(E,Z.ns,ti,x.aNormal),Zo(E,Z.is,Xg),ei(E,0,Xg.length),Lj(E,x,i)}}}Al(T)}ps(E,x)}}}}});var Ok=function(d,z){kd(Ok,this,[d,z])};qn(Ok,Ml,{_16O:function(y,E,h,T,e,o,b,O,L){var s=this.data,K=fn(E,s.s3(),h,T,O,L);return ns(mf(),K,s.p3(),T,e,o,b,y,s.r3(),s.getRotationMode())},clear:function(){var _=this;_.faceMat=_.mat=_.shapeModel=_.left=_.right=_.front=_.back=_.top=_.bottom=_.csg=m},validate:function(U,x){var L=this,b=L.gv,k=L.data,r=hd(L.s),P=Fh(k,b.getMat(k),r?L.s("shape3d.scaleable"):!0);if(L.clear(),U){var c=[];r?lm(b,k,r,L.s,L.getBodyColor(),[P],U,c):(ah(b,k,U,x,P,j,c,zj),ah(b,k,U,x,P,O,c,ff),ah(b,k,U,x,P,Jg,c,Kr),ah(b,k,U,x,P,He,c,Ar),ah(b,k,U,x,P,a,c,og),ah(b,k,U,x,P,B,c,Qm)),c.length&&(jp(U.vs,c),jp(U.ns,Eo(c)))}else L.mat=P,(L.shapeModel=r)||(L.vf(j),L.vf(O),L.vf(a),L.vf(B),L.vf(Jg),L.vf(He))},vf:function(h){var _=this;if(_.gv.getFaceVisible(_.data,h)){var k=Zq(_,h);return k.mat&&(_.faceMat=!0),k}},_80o:function(L,k,c){var j=this,p=j.gv,v=j.data,J=p._cube,X=j.shapeModel;ko(p,j.mat),X?Cb(p,v,X,j.s,j.getBodyColor(),c):(sd(L,J.vs,m,k.aPosition),sd(L,J.ns,m,k.aNormal),Zo(L,J.is),j._18O(L,k,j.left,0,c),j._18O(L,k,j.front,6,c),j._18O(L,k,j.right,12,c),j._18O(L,k,j.back,18,c),j._18O(L,k,j.top,24,c),j._18O(L,k,j.bottom,30,c)),Al(p),j.faceMat&&(j._18O(L,k,j.left,0,c,!0),j._18O(L,k,j.front,6,c,!0),j._18O(L,k,j.right,12,c,!0),j._18O(L,k,j.back,18,c,!0),j._18O(L,k,j.top,24,c,!0),j._18O(L,k,j.bottom,30,c,!0))},_18O:function(k,z,P,p,T,J){if(P){if(!T(P.transparent))return;if(J&&!P.mat||!J&&P.mat)return;J&&ko(this.gv,P.mat);var V=this,C=V.data,E=V.gv,u=E.getTexture(P.texture,C),Q=P.uv,v=P.uvScale,X=P.uvOffset,W=P.discardSelectable;if(u)if(Q){for(var r=8*(p/6),j=0;8>j;j++)fp[r+j]=Q[j];kk(k,z,u,W,E._buffer.uv,fp,X,v)}else kk(k,z,u,W,E._cube.uv,m,X,v);Sm(k,z,P.blend,P.light,P.opacity,P.reverseFlip,P.reverseColor,P.reverseCull),Yk(k,z.uDiffuse,P.color),ei(k,p,6),ps(k,z),Lj(k,z,u),J&&Al(E)}}});var Jo=function(O,e){kd(Jo,this,[O,e])};qn(Jo,Ml,{_25Q:1,validate:function(S){var x=this,d=x.gv,b=x.data,l=x.s,p=l("edge.width"),V=b._40I,h=b._41I;if(x.shapeModel=x.info=m,V&&h){var u,k,t,U,W,c,L,r,$,D,q=b.isLooped(),N=l(ac),a=e.getEdgeType(N);if(a){var y=a(b,Ap(x,d,b,q,N),d,x._19Q);if(!y.points||y.points.isEmpty())return;c=x.info={},L=y.segments,W=y.points,r=W.size();for(var C=V.getElevation(),i=h.getElevation(),B=0;r>B;B++){var E=W.get(B);E.e==m&&(E.e=C+(i-C)*B/(r-1))}$=Vg(W.get(0)),D=Vg(W.get(r-1));var I=r%2;0===I?(c.c1=Vg(W.get(r/2-1)),c.c2=Vg(W.get(r/2))):c.p3=Vg(W.get((r-I)/2)),c.s1=$,c.s2=Vg(W.get(1)),c.t1=Vg(W.get(r-2)),c.t2=D}else{W=new om,c=x.info={};var G=l("edge.offset"),Q=l("edge.center"),g=l("edge.source.t3"),w=l("edge.target.t3"),z=V.p3(),O=h.p3();if(g&&(z[0]+=g[0],z[1]+=g[1],z[2]+=g[2]),w&&(O[0]+=w[0],O[1]+=w[1],O[2]+=w[2]),N===_k){L=l("edge.segments");var A=c.points=l(Hf)||Up;if(r=A.size()){$=Vg(A.get(0)),D=Vg(A.get(r-1)),!Q&&G&&(t=qd($,z,!0),G=_(G,Dj(z,$)),z=[z[0]+t[0]*G,z[1]+t[1]*G,z[2]+t[2]*G],t=qd(O,D,!0),G=_(G,Dj(D,O)),O=[O[0]-t[0]*G,O[1]-t[1]*G,O[2]-t[2]*G]);var I=r%2;0===I?(u=Vg(A.get(r/2-1)),k=Vg(A.get(r/2))):c.p3=Vg(A.get((r-I)/2)),c.s1=z,c.s2=$,c.t1=D,c.t2=O}else!Q&&G&&(t=qd(O,z,!0),U=Dj(z,O),G=gi(G,U),z=[z[0]+t[0]*G,z[1]+t[1]*G,z[2]+t[2]*G],O=[O[0]-t[0]*G,O[1]-t[1]*G,O[2]-t[2]*G]),u=z,k=O;W.add({x:z[0],y:z[2],e:z[1]}),W.addAll(A),W.add({x:O[0],y:O[2],e:O[1]})}else{var T=Ap(x,d,b,q,N);if(x._19Q||(T=-T),q){var F=z[0],K=z[1],J=z[2],o=V.getTall()/2+T;u=[F-T,K+o,J],k=[F+T,K+o,J],W.add({x:F-T,y:J,e:K}),W.add({x:F-T,y:J,e:K+o}),W.add({x:F+T,y:J,e:K+o}),W.add({x:F+T,y:J,e:K})}else{t=qd(O,z,!0),U=Dj(z,O);var n={x:z[0],y:z[2]},P={x:O[0],y:O[2]},s=ke(m,n,P,T),v=s.x-n.x,j=s.y-n.y;G=gi(G,U),t[0]*=G,t[1]*=G,t[2]*=G,u=[z[0]+t[0]+v,z[1]+t[1],z[2]+t[2]+j],k=[O[0]-t[0]+v,O[1]-t[1],O[2]-t[2]+j],Q?(W.add({x:z[0],y:z[2],e:z[1]}),W.add({x:u[0],y:u[2],e:u[1]}),W.add({x:k[0],y:k[2],e:k[1]}),W.add({x:O[0],y:O[2],e:O[1]})):(W.add({x:u[0],y:u[2],e:u[1]}),W.add({x:k[0],y:k[2],e:k[1]}))}}c.c1=u,c.c2=k}c.list=l(is)===$d?x.createTubeModel(W,L,p/2,S):x.createLineModel(W,L,p,"edge","edge.dash")}}});var fr=function(P,n){kd(fr,this,[P,n])};qn(fr,Ok,{_80o:function(e,s,D){var K=this,N=K.gv,z=K.shapeModel;ko(N,K.mat),z?Cb(N,K.data,z,K.s,K.getBodyColor(),D):(Mb(K,e,s,K.left,D),Mb(K,e,s,K.front,D),Mb(K,e,s,K.right,D),Mb(K,e,s,K.back,D),Mb(K,e,s,K.top,D),Mb(K,e,s,K.bottom,D)),Al(N)},validate:function(x,q){var t,Y,c=this,f=c.s,o=c.data,u=o.p3(),G=o._thickness/2,H=o.isClosePath(),b=o.getPoints(),n=o.getSegments(),z=f(Po),D=x&&x.uv;if(c.clear(),0>G)Y=c.shapeModel=ed(b,n,f(Zr),f(Bh),z,f(_n),o.getTall(),o.getElevation(),H),f(hf)?f("shape3d.image")||delete Y.uv:(delete Y.vs,delete Y.ns,delete Y.uv),f("shape3d.top.image")||delete Y.top_uv,f("shape3d.bottom.image")||delete Y.bottom_uv;else if(f(is)===$d)t=wj(b,n,z,H),Y=c.shapeModel={vs:[]},f("shape3d.image")&&(Y.uv=[],Y.sum=f(_n)||Dl(t)||1,Y.len=0),f(Zr)&&!H&&(Y.top_vs=[],f("shape3d.top.image")&&(Y.top_uv=[])),f(Bh)&&!H&&(Y.bottom_vs=[],f("shape3d.bottom.image")&&(Y.bottom_uv=[])),c._12O(t,G);else{var V,A,M,S,Z,L,W,h,I,E;t=wj(b,n,z,H),Z=c.vf(a,D,!1,q),G&&(L=c.vf(B,D,!1,q),W=H?m:c.vf(j,D,!1,q),h=H?m:c.vf(O,D,!1,q),I=c.vf(Jg,D,!1,q),E=c.vf(He,D,!1,q)),G?c._12O(t,G):Z&&t.forEach(function(d){if(S=d.length,S>0)for(V=d[0],M=1;S>M;M++)A=d[M],c.addV(Z.vs,V,A),V=A}),c._20Q(t),x||(Z&&(Z.ns=Eo(Z.vs),_p(Z,"vs"),_p(Z,kf)),G&&(L&&(L.ns=Eo(L.vs),_p(L,"vs"),_p(L,kf)),W&&(W.ns=Eo(W.vs),_p(W,"vs"),_p(W,kf)),h&&(h.ns=Eo(h.vs),_p(h,"vs"),_p(h,kf)),I&&(I.ns=Eo(I.vs),_p(I,"vs"),_p(I,kf)),E&&(E.ns=Eo(E.vs),_p(E,"vs"),_p(E,kf))))}var Q=c.mat=mf();Gf(Q,u),lp(Q,o.r3(),o.getRotationMode()),Gf(Q,te(u)),x&&(ul(c,Q,x,Y),c.clear())},_20Q:function(q){var y,d,K,B,a,C,T,o=this,t=o.front,S=o.back,p=o.top,u=o.bottom,O=t?t.tuv:m,H=S?S.tuv:m,G=p?p.tuv:m,L=u?u.tuv:m,n=0;(O||H||G||L)&&(y=o.s(_n)||Dl(q)||1,q.forEach(function(w){if(d=w.length,d>0)for(C=w[0],K=1;d>K;K++)T=w[K],B=n/y,n+=Dj(C,T),a=n/y,o._14O(t,B,a),o._14O(S,1-a,1-B),o._14O(p,B,a),o._14O(u,B,a),C=T}))},_14O:function(Q,s,D){if(Q){var G=Q.uv,c=Q.tuv;if(c){if(G)var j=G[0]+(G[6]-G[0])*s,r=G[1]+(G[7]-G[1])*s,C=G[2]+(G[4]-G[2])*s,b=G[3]+(G[5]-G[3])*s,p=G[2]+(G[4]-G[2])*D,N=G[3]+(G[5]-G[3])*D,u=G[0]+(G[6]-G[0])*D,l=G[1]+(G[7]-G[1])*D;else j=s,r=0,C=s,b=1,p=D,N=1,u=D,l=0;c.push(C,b,p,N,u,l,u,l,j,r,C,b)}}},_13O:function(Q){var y=Q.uv,F=Q.tuv;F&&(y?F.push(y[2],y[3],y[4],y[5],y[6],y[7],y[6],y[7],y[0],y[1],y[2],y[3]):F.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(o,V){var r,D,n,$,g,f=this;o.forEach(function(h){if(g=h.length,g>0)for(r={p:h[0],n:!0},$=1;g>$;$++)D=h[$],n=g-1>$?h[$+1]:m,f.addPoint(r,D,n,V,h)})},addPoint:function(J,h,O,V,n){var Z,I,x,q,E,j,g,U,B,D=this,z=J.p,A=J.f,a=J.b,v=D.s("shape3d.side")||bl,P=D.s("shape3d.start.angle"),d=D.shapeModel,e=D.data.isClosePath();if(J.n&&(J.n=!1,A=e&&n.length>2?ke(n[n.length-2],z,h,V):ke(m,z,h,V),a=co(z,A),d?d.top_vs&&D._10O(a,A,v,P,d.top_vs,d.top_uv):(Z=D.left)&&(D.addV(Z.vs,a,A),D._13O(Z))),I=O?ke(z,h,O,V):e&&n.length>2?ke(z,h,n[1],V):ke(z,h,m,V),x=co(h,I),d){var W,$,_=d.vs,R=d.uv,H=d.sum;for(R&&(W=d.len/H,d.len+=Dj(z,h),$=d.len/H),j=D._9O(a,A,v,P),g=D._9O(x,I,v,P),U=0;v>U;U++)B=U+1,jp(_,j[B]),jp(_,g[U]),jp(_,j[U]),jp(_,g[U]),jp(_,j[B]),jp(_,g[B]),R&&(q=U/v,E=B/v,R.push(W,E,$,q,W,q,$,q,W,E,$,E));!O&&d.bottom_vs&&D._10O(x,I,v,P,d.bottom_vs,d.bottom_uv,!0)}else!O&&(Z=D.right)&&(D.addV(Z.vs,I,x),D._13O(Z)),(Z=D.front)&&D.addV(Z.vs,A,I),(Z=D.back)&&D.addV(Z.vs,x,a),(Z=D.top)&&D.addH(Z.vs,A,I,x,a,!0),(Z=D.bottom)&&D.addH(Z.vs,a,x,I,A);J.p=h,J.f=I,J.b=x},_10O:function(k,n,e,b,O,C,A){var d,K,H=this,t=H.data,w=H._9O(k,n,e,b),M=(k.x+n.x)/2,G=(k.y+n.y)/2,g=t.getElevation(),E=0;for(E=0;e>E;E++)A?(jp(O,w[E]),jp(O,w[E+1])):(jp(O,w[E+1]),jp(O,w[E])),jp(O,[M,g,G]),C&&(A?(d=X*(E+1)/e+b,K=X*E/e+b):(d=X*E/e+b,K=X*(E+1)/e+b),C.push(.5-.5*V(K),.5-.5*l(K),.5-.5*V(d),.5-.5*l(d),.5,.5))},_9O:function(f,H,$,u){for(var e,k,W=this,P=W.data,U=[],r=(f.x+H.x)/2,d=(f.y+H.y)/2,M=P.getTall()/2,h=P.getElevation(),D=0;$>=D;D++)e=X*D/$+u,k=V(e),U.push([r+(f.x-r)*k,h+M*l(e),d+(f.y-d)*k]);return U},addV:function(V,K,u){var f=K.x,_=K.y,Q=u.x,F=u.y,B=this.data,h=B.getElevation(),L=B.getTall()/2;V.push(f,h-L,_,Q,h-L,F,Q,h+L,F,Q,h+L,F,f,h+L,_,f,h-L,_)},addH:function(o,d,w,D,E,a){var H=this.data,t=H.getTall()/2,u=H.getElevation()+(a?t:-t);o.push(d.x,u,d.y,w.x,u,w.y,D.x,u,D.y,D.x,u,D.y,E.x,u,E.y,d.x,u,d.y)},vf:function(t,O,c,Z){var w,E=this,J=E.gv.getFaceVisible(E.data,t);return(c||J)&&(w=Zq(E,t,Z),w.vs=[],w.tuv=J&&(w.texture||O)?[]:m,w.visible=J),w}});var Ii=function(C,x){kd(Ii,this,[C,x])};qn(Ii,Ml,{_25Q:1,validate:function(f){var U=this,H=U.data,T=U.s,Q=H.getPoints(),N=Q.size();if(U.shapeModel=U.info=m,N>1){var $=U.info={},i=H.getSegments(),b=H.getThickness(),v=Vg(Q.get(0)),K=Vg(Q.get(N-1)),P=N%2;0===P?($.c1=Vg(Q.get(N/2-1)),$.c2=Vg(Q.get(N/2))):$.p3=Vg(Q.get((N-P)/2)),$.s1=v,$.s2=Vg(Q.get(1)),$.t1=Vg(Q.get(N-2)),$.t2=K,$.list=T(is)===$d?U.createTubeModel(Q,i,b/2,f):U.createLineModel(Q,i,b,"shape.border","shape.dash")}}}),cg(e,{accordionViewExpandIcon:$f(lo),accordionViewCollapseIcon:$f(lo,!0),accordionViewLabelColor:Ao,accordionViewLabelFont:je,accordionViewTitleBackground:vm,accordionViewSelectBackground:yj,accordionViewSelectWidth:3,accordionViewSeparatorColor:E,splitViewDividerSize:1,splitViewDividerBackground:vm,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:nc,rect:[2,2,12,12],background:lo}]},propertyViewLabelColor:jq,propertyViewLabelSelectColor:Ao,propertyViewLabelFont:je,propertyViewExpandIcon:$f(bs),propertyViewCollapseIcon:$f(bs,!0),propertyViewBackground:Zl,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:xm,propertyViewColumnLineColor:xm,propertyViewSelectBackground:yj,listViewLabelColor:jq,listViewLabelSelectColor:Ao,listViewLabelFont:je,listViewRowLineVisible:!1,listViewRowLineColor:xm,listViewSelectBackground:yj,treeViewLabelColor:jq,treeViewLabelSelectColor:Ao,treeViewLabelFont:je,treeViewExpandIcon:$f(jm),treeViewCollapseIcon:$f(jm,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:xm,treeViewSelectBackground:yj,tableViewLabelColor:jq,tableViewLabelSelectColor:Ao,tableViewLabelFont:je,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:xm,tableViewColumnLineColor:xm,tableViewSelectBackground:yj,treeTableViewLabelColor:jq,treeTableViewLabelSelectColor:Ao,treeTableViewLabelFont:je,treeTableViewExpandIcon:$f(jm),treeTableViewCollapseIcon:$f(jm,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:xm,treeTableViewColumnLineColor:xm,treeTableViewSelectBackground:yj,tableHeaderLabelColor:jq,tableHeaderLabelFont:je,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:Lm,tableHeaderBackground:Zl,tableHeaderMoveBackground:_i,tableHeaderInsertColor:yj,tableHeaderSortDescIcon:Pp(bs,!0),tableHeaderSortAscIcon:Pp(bs),tabViewTabGap:1,tabViewLabelColor:Ao,tabViewLabelFont:je,tabViewTabBackground:vm,tabViewSelectWidth:3,tabViewSelectBackground:yj,tabViewMoveBackground:_i,tabViewInsertColor:yj,toolbarLabelColor:jq,toolbarLabelSelectColor:Ao,toolbarLabelFont:je,toolbarBackground:Zl,toolbarSelectBackground:yj,toolbarItemGap:8,toolbarSeparatorColor:hg},!0);var Pg={translateX:1,sortColumn:1},ve={sortable:1,sortOrder:1,sortFunc:1},jj={focusData:1},yc={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Ym={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},$r=function(K,F){F.add(K),K.hasChildren()&&K.eachChild(function(I){$r(I,F)})},jl=function(I,T,h,F,E,d,L,P,t,p,s){var X,z=h.getValueType(),Q=h.getAlign();if(h.getEnumValues()){var H=h.toEnumLabel(T),n=hr||0,x=0,l=d,v=e.getTextSize(F,H).width;return X=Em(h.toEnumIcon(T)),X&&(x=d+hr/2,"center"===Q?x+=(P-(n+v))/2:"right"===Q&&(x=x+P-(n+v)),Wb(I,X,x,L+t/2),l=x+hr/2),H!=m&&(X?un(I,H,F,E,l,L,P-(l-d),t):un(I,H,F,E,d,L,P,t,Q)),void 0}return T=h.formatValue(T),T!=m?z===Zk?(Vi(I,d,L,P,t,T),void 0):z===jg||!z&&Ud(T)?(X=Em(T?gr:Td),Wb(I,X,d+P/2,L+t/2,p,s),void 0):(un(I,T,F,E,d,L,P,t,Q),void 0):void 0},On=function(Y,t){var P=t.view,A=P.getDataModel().getHistoryManager(),B=vn(Y),y=t.column||t.property;A&&A.beginInteraction(),t.editor=Y,Y.info=t,P.setCurrentEditor(Y),P.getView().insertBefore(B,P._79O),Sq(Y,t.editorRect),Y.setFocus?Y.setFocus():cf(Y),Y.commitValue=function(){Y._17Q&&(Y=Y._17Q),P.setValue(t.data,y,Y.getValue?Y.getValue():Y.value),Y.close&&Y.close(),Cs(B)},y.onEditorCreated&&y.onEditorCreated(t)},Yj=function(z,V,w,B,N){var q=Wn(z,w),L=V.value,y=V.view,u=N.getValueType();return q.onblur=q.onchange=function(){y.endEditing()},"input"===z?(L=N.formatValue(L),L!=m&&(q.value=L),q.onkeydown=function(U){Dc(U)&&y.endEditing()},(u===Le||u===Tn)&&q.addEventListener(db,e.numberListener,!1)):z===cd&&B.forEach(function(B){var I=d.createElement("option");I.innerHTML=N.toEnumLabel(B),I.value=B,N.isEnumEqual(L,B)&&(I.selected=!0),If(q,I)}),On(q,V),q},Vp=I.widget={},eq=function(X,e,V){qn(D+".widget."+X,e,V)};cg(Wl,{ms_value:function(K){K.getValue=function(p){var $=this.getItemById(p),U=$.element;return U?U.getValue?U.getValue():U.value:$.selected},K.setValue=function(b,W){var L=this.getItemById(b),w=L.element;w?w.setValue?w.setValue(W):w.value=W:(L.selected=W,this.iv())},K.v=function(p,Q){var r=this;if(2===arguments.length)r.setValue(p,Q);else{if(!qm(p))return r.getValue(p);for(var g in p)r.setValue(g,p[g])}return r}},_46o:function(h){h._icon=m,h._accessType=m,h._valueType=m,h._editable=!1,h._batchEditable=!0,h._align=j,h._nullable=!0,h._emptiable=!1,h.setParent=ys,h.formatValue=function(C){var M=this,c=M._valueType;if(M.getEnumValues())return M.toEnumLabel(C);if(c===jg)return!!C;if(C!=m){if(c===Le)return G(C);if(Gg(C))return mm(C)}return C},h.setEnum=function(B,I,A,b,j,W){var x=this;B&&B.values&&(b=B.editable,A=B.icons,I=B.labels,j=B.strict,W=B.maxHeight,B=B.values),cn(B)&&(B=B._as),cn(I)&&(I=I._as),cn(A)&&(A=A._as),x._enumValues=B,x._enumLabels=I,x._enumIcons=A,x._enumEditable=b,x._enumStrict=j==m?!0:j,x._enumMaxHeight=W,B&&B.length&&Gg(B[0])&&(x._valueType=Tn),x.fp("enum",!1,!0)
},h.getEnumMaxHeight=function(){return this._enumMaxHeight},h.isEnumEditable=function(){return this._enumEditable},h.getEnumValues=function(){return this._enumValues},h.getEnumLabels=function(){return this._enumLabels},h.getEnumIcons=function(){return this._enumIcons},h.isEnumStrict=function(){return this._enumStrict},h.isEnumEqual=function(x,g){return this._enumStrict?x===g:x==g},h.toEnumLabel=function(E){var K=this,d=K._enumValues,k=K._enumLabels;if(d&&k)for(var X=0;X<d.length;X++)if(K.isEnumEqual(E,d[X]))return k[X];return E},h.toEnumIcon=function(O){var f=this,Z=f._enumValues,h=f._enumIcons;if(Z&&h)for(var L=0;L<Z.length;L++)if(f.isEnumEqual(O,Z[L]))return h[L];return E}},_45o:function(B){B._87o=function(H,C,W,n,G,r){if(H){var w=this,u=w._90I,B=fq(1);w._columnLineVisible&&(G-=1),w._rowLineVisible&&(r-=1),0>=G||0>=r||(w._90I||(u=w._90I={}),u[C]||(u[C]=new om),Sq(B,w.tx()+W,w.ty()+n,G,r),If(B,H),w._view.insertBefore(B,w._79O),H.onParentAdded&&H.onParentAdded(B),u[C].add(B))}},B._76o=function(){var X=this,F=X._90I;if(F){for(var k in F)F[k].each(function($){Cs($)});delete X._90I}},B._77o=function(V){var v=this;if(v._90I){var _=v._90I[V];_&&(_.each(function(d){Cs(d)}),delete v._90I[V])}}},_47o:function(l){l.getValue=function(H,W){return W.getValue?W.getValue(H,W,this):Dq(H,W.getAccessType(),W.getName())},l.setValue=function(G,e,a){if(e.isEmptiable()||""!==a||(a=E),e.isNullable()||a!=m){var p=this,M=e.getName(),B=e.getAccessType(),C=e.getValueType();C===Le&&xs(a)?a=S(a):C===Tn&&xs(a)?a=parseFloat(a):C===jg&&xs(a)&&(a="true"===a),p._batchEditable&&e._batchEditable&&p.isSelected(G)?p.sm().each(function(T){e.setValue?e.setValue(T,e,a,p):oh(T,B,M,a)}):e.setValue?e.setValue(G,e,a,p):oh(G,B,M,a)}},l.setCurrentEditor=function(k){this.endEditing(),this._currentEditor=k,this.redraw()},l.isEditing=function(_,e){var u=this,W=u._currentEditor;if(!W)return!1;if(e){var R=W.info;return R?(R.column||R.property)===e&&R.data===_:!1}return!0},l.endEditing=function(){var g=this,Q=g._currentEditor,f=g.getDataModel().getHistoryManager();Q&&(delete g._currentEditor,Q.commitValue&&Q.commitValue(Q.info),g.redraw(),f&&f.endInteraction())},l.beginEditing=function($){this.endEditing();var N=this,r=$.column||$.property;if(r.beginEditing)r.beginEditing($);else{var D=$.data,n=$.value,J=N.getSelectBackground(D),B=r.getEnumValues(),y=r.getSlider(),K=r.getColorPicker();if(y){var v=ze(Vp.Slider,y);return v.setValue(n),v.getView().onblur=function(){N.endEditing()},v.isInstant()&&(v.onValueChanged=function(){N.setValue(D,r,v.getValue())}),On(v,$),void 0}if(K||r.getValueType()===Zk){var V=ze(Vp.ColorPicker,K);return V.setValue(n),V.onClosed=function(){N.endEditing()},V.isInstant()&&(V.onValueChanged=function(v,u){N.setValue(D,r,u)}),On(V,$),V.open(),void 0}if(B){if(Vp.ComboBox){var o=new Vp.ComboBox;o.setValue(n),o.setValues(B),o.setLabels(r.getEnumLabels()),o.setIcons(r.getEnumIcons()),o.setEditable(r.isEnumEditable()),o.setStrict(r.isEnumStrict()),o.setMaxHeight(r.getEnumMaxHeight()),o.onClosed=function(){N.endEditing()},On(o,$),o.open()}else Yj(cd,$,J,B,r);return}var w=r.getValueType();if(w===jg||Ud(n))return N.setValue(D,r,!n),void 0;if(r.getItemEditor()){var f=Yo(r.getItemEditor()),c=new f(D,r,N,$),x=c.getView();return x._17Q=c,c.setValue(n),ii(x),On(x,$),c.editBeginning&&c.editBeginning(),void 0}Yj("input",$,J,m,r)}}},_44o:function(V){V.init=function(I){var W=this,z=W.th=new Oc(I),b=W._view=fq(1);W.tv=W._tableView=I,If(b,z.getView()),If(b,I.getView()),z.mp(function(S){S.property===Om&&W.iv()}),W.iv()},V.getTableView=function(){return this.tv},V.getTableHeader=function(){return this.th},V.getDataModel=function(){return this.tv.dm()},V.getColumnModel=function(){return this.tv.getColumnModel()},V.setColumns=function(g){this.tv.setColumns(g)},V.addColumns=function(Z){this.tv.addColumns(Z)},V.endEditing=function(){this.tv.endEditing()},V.validateImpl=function(){var I=this,g=I.th,w=nk(g),_={x:0,y:0,width:I.getWidth(),height:w};Sq(g,_),_.y=w,_.height=k(0,I.getHeight()-w),Sq(I.tv,_)}},ms_vs:function(A){A._41o=function(){return this._29I.height<this._59I},A._43o=function(){var M=this;M._41o()&&(M._58I||(f(function(){M._94O()},gs),M.iv()),M._58I=new Date)},A._94O=function(){var K=this;if(K._58I){var p=new Date;p.getTime()-K._58I.getTime()>=gs?(delete K._58I,K.iv()):f(function(){K._94O()},gs)}},A._93I=function(){var X=this,n=X._27I;if(X._58I||!X._autoHideScrollBar){n||If(X._79O,n=X._27I=fq());var M=X._29I,u=M.height,g=X._59I,o=X.getScrollBarSize(),i=M.width-o-2,l=u*(-X.ty()/g),R=u*(u/g),r=n.style;g>u?(Yd>R&&(l=l+R/2-Yd/2,0>l&&(l=0),l+Yd>u&&(l=u-Yd),R=Yd),r.visibility=Pf,r.background=X.getScrollBarColor(),r.borderRadius=o/2+Hd,Sq(n,i,l,o,R)):r.visibility=Dk}else n&&(n.style.visibility=Dk)}},ms_hs:function(b){b._40o=function(){return this._29I.width<this._91I},b._42o=function(){var I=this;I._40o()&&(I._95O||(f(function(){I._94I()},gs),I.iv()),I._95O=new Date)},b._94I=function(){var O=this;if(O._95O){var c=new Date;c.getTime()-O._95O.getTime()>=gs?(delete O._95O,O.iv()):f(function(){O._94I()},gs)}},b._92I=function(){var S=this,w=S._28I;if(S._95O||!S._autoHideScrollBar){w||If(S._79O,w=S._28I=fq());var F=S._29I,J=F.width,o=S._91I,q=S.getScrollBarSize(),L=F.height-q-2,Z=J*(-S.tx()/o),G=J*(J/o),A=w.style;o>J?(Yd>G&&(Z=Z+G/2-Yd/2,0>Z&&(Z=0),Z+Yd>J&&(Z=J-Yd),G=Yd),A.visibility=Pf,A.background=S.getScrollBarColor(),A.borderRadius=q/2+Hd,Sq(w,Z,L,G,q)):A.visibility=Dk}else w&&(w.style.visibility=Dk)}}}),Wm(gr,or(16,16,[{type:Kf,rect:[1,1,14,14],background:yj},{type:Xk,rect:[1,1,14,14],width:1,color:ec},{type:Un,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Wm(Td,or(16,16,{type:Xk,rect:[1,1,14,14],width:1,color:ec})),Wm(Zd,or(16,16,[{type:Gp,rect:[2,2,12,12],borderWidth:1,borderColor:ec,background:"#FFF"},{type:Gp,rect:[4,4,8,8],background:yj}])),Wm(Ug,or(16,16,{type:Gp,rect:[2,2,12,12],borderWidth:1,borderColor:ec})),Wl._15Q=function(H){H._29I=po,H._59I=0,H._91I=0,H._5o=function(C){var n=this;n._30I=new om,n._rows=new om,n._rowMap={},n._31I=0,n._14I=0,n._view=fq(1),n._canvas=pm(n._view),If(n._view,n._79O=fq()),n.dm(C?C:new Ze)},H.getCheckIcon=function(T){var R=this.sm(),Y=R.co(T);return R.sg()?Em(Y?Zd:Ug):Em(Y?gr:Td)},H.checkData=function(h){var F=this.sm(),a=F.co(h);F.sg()&&a||(this._32o=1,a?F.rs(h):F.as(h),delete this._32o)},H.getDataAt=function(g){g.target&&(g=this.lp(g));var i=w(g.y/this._rowHeight),q=this._rows;return 0>i||i>=q.size()?m:q.get(i)},H.onDataDoubleClicked=function(){},H.onDataClicked=function(){},H.adjustTranslateX=function(){return 0},H.adjustTranslateY=function(u){var o=this.getHeight()-this._59I;return o>u&&(u=o),u>0?0:G(u)},H.onPropertyChanged=function(m){var V=this,P=m.property;yc[P]?V.ivm():jj[P]||V.redraw(),P===Yn?V._42o():P===Uh&&V._43o()},H.getLabel=function(B){return B.toLabel()},H.getLabelFont=function(){return this._labelFont},H.getLabelColor=function(X){var Y=this;if(Y.isCheckMode()){if(Y._focusData===X)return Y._labelSelectColor}else if(Y.isSelected(X))return Y._labelSelectColor;return Y._labelColor},H.getStartRowIndex=function(){return this._31I},H.getEndRowIndex=function(){return this._14I},H.getRowDatas=function(){return this._rows},H.getRowIndex=function(N){return this._rowMap[N._id]},H.getRowSize=function(){return this._rows.size()},H.getViewRect=function(){return qj(this._29I)},H.isVisible=function(t){return this._visibleFunc?this._visibleFunc(t):!0},H.getCurrentSortFunc=function(){return this._sortFunc},H.setDataModel=function(z){var D=this,n=D._dataModel,M=D._3o;n!==z&&(n&&(n.umm(D.handleDataModelChange,D),n.umd(D.handleDataPropertyChange,D),n.umh(D._15o,D),M||n.sm().ums(D._16o,D)),D._dataModel=z,z.mm(D.handleDataModelChange,D),z.md(D.handleDataPropertyChange,D),z.mh(D._15o,D),M?M._21I(z):z.sm().ms(D._16o,D),D.fp("dataModel",n,z))},H.validateModel=function(){var f=this;f._rows.clear(),f._rowMap={},f.buildChildren(f._dataModel._roots);var g=f._rows=f._rows.toList(f.isVisible,f),u=0,x=f.getCurrentSortFunc(),F=g.size();for(x&&g.sort(x);F>u;u++)f._rowMap[g.get(u)._id]=u},H.buildChildren=function(d){var O=this;d.each(function(Z){O._rows.add(Z),O.buildChildren(Z._children)})},H.handleDataModelChange=function(){this.ivm()},H.handleDataPropertyChange=function(S){"parent"===S.property?this.ivm():this.invalidateData(S.data)},H._15o=function(){this.ivm()},H._16o=function(r){r.datas.each(this.invalidateData,this),this.onSelectionChanged(r)},H.onSelectionChanged=function(T){var U=this,E=U.sm();!U.isAutoMakeVisible()||1!==E.size()||"set"!==T.kind&&"append"!==T.kind||U._32o||U.makeVisible(E.ld())},H.makeVisible=function(U){U&&(this._23I=U,this.iv())},H.scrollToIndex=function($){var Z=this,z=Z._29I,n=z.height,r=Z._rowHeight,p=r*$;$>=0&&$<Z._rows.size()&&n>0&&(p+r>z.y+n?Z.ty(-p+n-r):p<z.y&&Z.ty(-p))},H.ivm=function(){this.invalidateModel()},H.invalidateModel=function(){var Q=this;Q._96I||(Q._96I=1,Q._32I=1,delete Q._24I,Q.iv())},H.redraw=function(){var x=this;x._32I||(x._32I=1,delete x._24I,x.iv())},H.invalidateData=function(U){var A=this;t?A.redraw():A._32I||(A._24I||(A._24I={}),A._24I[U._id]=U,A.iv())},H.getFocusData=function(){return this._focusData},H.setFocusDataById=function(j){this.setFocusData(this.dm().getDataById(j))},H.setFocusData=function(s){var z=this,i=z._focusData;i!==s&&(z._focusData=s,z.fp("focusData",i,s),i&&z.invalidateData(i),s&&(z.invalidateData(s),z.isAutoMakeVisible()&&z.makeVisible(s)))},H.drawRowBackground=function(c,w,d,p,m,h,E){var i=this,A=i.isCheckMode();(w===i._focusData&&A||d&&!A)&&Vi(c,p,m,h,E,i.getSelectBackground(w))},H.drawData=function(N,R,E){var q=this,v=q._rowHeight,f=v*E,x=q._29I,z=x.x,y=x.width;N.save(),N.beginPath(),N.rect(z,f,y,v),N.clip(),q._87o(q.drawRow(N,R,q.isSelected(R),z,f,y,v),E,z,f,y,v),N.restore(),q._rowLineVisible&&Vi(N,z,f+v-1,y,1,q._rowLineColor)},H._12I=function(D){var I=this,m=I._31I,N=I._29I,E=N.x,i=N.y,$=N.width,z=N.height;for(D.beginPath(),D.rect(E,i,$,z),D.clip(),D.clearRect(E,i,$,z),I._76o(),I._93db(D);m<I._14I;m++)I.drawData(D,I._rows.get(m),m);I._92db(D)},H._13I=function(K){for(var i,P=this,u=P._rowHeight,F=P._29I,Q=F.x,B=F.width,n=P._31I,H=P._30I;n<P._14I;n++)i=P._rows.get(n),P._24I[i._id]&&H.add({data:i,index:n});H.isEmpty()||(K.beginPath(),H.each(function(n){K.rect(Q,n.index*u,B,u)}),K.clip(),H.each(function(z){K.clearRect(Q,z.index*u,B,u)}),H.each(function(a){P._77o(a.index)}),P._93db(K),H.each(function(w){P.drawData(K,w.data,w.index)}),P._92db(K),H.clear())},H.validateImpl=function(){var z=this,n=z._canvas,E=z.getWidth(),x=z.getHeight(),J=z._rowHeight,X=z._32I;(E!==n.clientWidth||x!==n.clientHeight)&&($q(n,E,x),X=1),z._96I&&z.validateModel();var j=z._29I,T={x:-z.tx(),y:-z.ty(),width:E,height:x},q=z._rows.size(),C=Gk(n),$=z._23I;X||_j(T,j)||(X=1),z._29I=T,z._59I=q*J,z._31I=w(T.y/J),z._14I=h((T.y+T.height)/J),z._31I<0&&(z._31I=0),z._14I>q&&(z._14I=q),z._99I&&X&&z._99I(),gc(C,z.tx(),z.ty(),1),X?z._12I(C):z._24I&&z._13I(C),z._93I(),z._92I(),C.restore(),z._32I=z._24I=z._96I=m,$&&(z.scrollToIndex(z.getRowIndex($)),delete z._23I),z.tx(z.tx()),z.ty(z.ty())}},Wl._48o=function(r){r._rootVisible=!0,r._rootData=m,r._35o=function(){this._expandMap={},this._levelMap={}},r.validateModel=function(){var g=this,e=g._rootData;g._rows.clear(),g._levelMap={},g._rowMap={},g._currentLevel=0,e?g._rootVisible?g.isVisible(e)&&g.buildData(e):g.buildChildren(e):g.buildChildren(),delete g._currentLevel},r.buildData=function(g){var Z=this,l=g._id,t=Z._rows;Z._rowMap[l]=t.size(),t.add(g),Z._levelMap[l]=Z._currentLevel,Z.isExpanded(g)&&(Z._currentLevel++,Z.buildChildren(g),Z._currentLevel--)},r.buildChildren=function(h){var H=this,g=h?h._children:H._dataModel._roots,A=H.getCurrentSortFunc();A&&H.isChildrenSortable(h)?g.toList(H.isVisible,H).sort(A).each(H.buildData,H):g.each(function($){H.isVisible($)&&H.buildData($)})},r.getLevel=function(i){return this._levelMap[i._id]},r.getToggleIcon=function(M){var S=this,k=S._loader,Q=S._collapseIcon;return k&&!k.isLoaded(M)?Q:M.hasChildren()?S.isExpanded(M)?S._expandIcon:Q:m},r.isCheckMode=function(){return this._checkMode!=m},r.isChildrenSortable=function(){return!0},r.handleDataModelChange=function(q){var y=this;q.kind===Id?delete y._expandMap[q.data._id]:q.kind===_d&&(y._expandMap={}),y.ivm()},r.toggle=function(G){var s=this;s.isExpanded(G)?s.collapse(G):s.expand(G)},r.isExpanded=function(q){return 1===this._expandMap[q._id]},r.expand=function(j){var K=this,P=K._loader;K.isExpanded(j)||(P&&!P.isLoaded(j)&&P.load(j),K._expandMap[j._id]=1,K.ivm(),K.onExpanded(j))},r.onExpanded=function(){},r.collapse=function(i){var t=this;t.isExpanded(i)&&(delete t._expandMap[i._id],t.ivm(),t.onCollapsed(i))},r.onCollapsed=function(){},r.expandAll=function(){var _=this;_._dataModel.each(function(R){R.hasChildren()&&(_._expandMap[R._id]=1)}),_.ivm()},r.collapseAll=function(){this._expandMap={},this.ivm()},r.makeVisible=function(D){if(D){var K=this;if(!K._rootData||D.isDescendantOf(K._rootData)){for(var L=D._parent;L;)K.expand(L),L=L._parent;K._23I=D,K.iv()}}},r.checkData=function(q){var U,L=this,b=L._checkMode,m=L.sm(),z=m.co(q);if(!m.sg()||!z){if(L._32o=1,b===x)z?m.rs(q):m.as(q);else if(b===Ci)U=new om(q),U.addAll(q._children);else if("descendant"===b)U=new om,$r(q,U);else if("all"===b&&(U=new om,$r(q,U),!z))for(var Z=q._parent;Z;)U.add(Z),Z=Z._parent;U&&(z?m.rs(U):m.as(U)),delete L._32o}},r._97I=function(e,j,v,c,h,a,q){var S=this,A=S._indent,x=S._levelMap[j._id],f=S.getIconWidth(j),l=Em(S.getToggleIcon(j));l?(c+=A*x,Wb(e,l,c+A/2,h+q/2,j,S),c+=A):c+=A*(x+1),S._checkMode&&(Wb(e,S.getCheckIcon(j),c+A/2,h+q/2,j,S),c+=A),S.drawIcon(e,j,c,h,f,q),S.drawLabel(e,j,c+f,h,q)}},Wl._14Q=function(T){T.getIcon=function(I){return I.getIcon()},T.getIconWidth=function(T){return this.getIcon(T)?this._indent:0},T.drawIcon=function(d,M,f,K,m,j){if(m){var t=this,X=t.getBodyColor(M),$=Em(t.getIcon(M),X);$&&(j-=t.isRowLineVisible()?1:0,bj(d,$,ug,f,K,m,j,M,t,X),Mr(d,t.getBorderColor(M),f,K,m,j))}},T.drawLabel=function(o,j,b,n,H){var z=this;un(o,z.getLabel(j),z.getLabelFont(j),z.getLabelColor(j),b,n,0,H)}},Wl._50o=function(H){H._98I=function(){var h=this,$=h._39o=new Ze;h._60I=new om,$.mm(h._17o,h),$.md(h._18o,h),$.mh(h._19o,h)},H.setColumns=function(Z){this._39o.clear(),this.addColumns(Z)},H.addColumns=function(V){var X=this._39o;V.forEach(function(n){if(!(n instanceof gf)){var f=Yo(n.className);n=ze(f?f:gf,n)}X.add(n)})},H.onColumnClicked=function(){},H.onCheckColumnClicked=function(){},H._3Q=function(U){for(var S,O=0,V=this._60I,g=V.size();g>O;O++)if(S=V.get(O),S.column===U)return S;return m},H.getColumnAt=function(l){var d=this._4Q(l);return d?d.column:m},H._4Q=function(Y){for(var T=this,V=Y.target?T.lp(Y).x:Y.x,t=T._60I,L=0;L<t.size();L++){var w=t.get(L),K=w.startX;if(V>=K&&V<K+w.column.getWidth())return w}return m},H.getToolTip=function(b){var o=this,Y=o.getDataAt(b),l=o.getColumnAt(b);return Y&&l?l.getToolTip(Y,o):m},H.adjustTranslateX=function(T){var Z=this.getWidth()-this._91I;return Z>T&&(T=Z),T>0?0:G(T)},H._99I=function(){var f=this,Y=f._29I,H=f._60I;H.clear(),f._91I=0,f._39o._roots.each(function(l){if(l.isVisible()){var Z=f._91I+l.getWidth();f._91I<=Y.x+Y.width&&Z>=Y.x&&H.add({column:l,startX:f._91I}),f._91I=Z}})},H.drawData=function(M,v,m){var a=this,A=a._rowHeight,l=A*m,t=a.isSelected(v),q=a._29I,N=q.x,U=q.width;a.drawRowBackground(M,v,t,N,l,U,A),a._60I.each(function(f){var c=f.column,w=f.startX,i=c.getWidth();i>0&&!a.isEditing(v,c)&&(M.save(),M.beginPath(),M.rect(w,l,i,A),M.clip(),a._87o(a.drawCell(M,v,t,c,w,l,i,A),m,w,l,i,A),a._columnLineVisible&&Vi(M,w+i-1,l,1,A,a._columnLineColor),M.restore())}),a._rowLineVisible&&Vi(M,N,l+A-1,U,1,a._rowLineColor)},H.drawCell=function(l,d,n,k,s,Q,p,H){var R=this;if(k.drawCell)return k.drawCell(l,d,n,k,s,Q,p,H,R);var W=R.getValue(d,k);jl(l,W,k,R.getLabelFont(d,k,W),R.getLabelColor(d,k,W),s,Q,p,H,d,R)},H.getColumnModel=function(){return this._39o},H._17o=function(){this.redraw()},H._18o=function(e){var m=this;e.data===m._sortColumn&&ve[e.property]?m.ivm():(m._42o(),m.redraw())},H._19o=function(){this.redraw()},H.getCurrentSortFunc=function(){var f=this,v=f._sortColumn;if(v&&v.isSortable()){var h=v.getSortFunc(),B=Tp===v.getSortOrder()?1:-1;return h||(h=zl),function(Y,c){return h.call(f,f.getValue(Y,v),f.getValue(c,v),Y,c)*B}}return f._sortFunc},H.isCellEditable=function(e,P){return P.isEditable()&&this.isEditable()},H._37O=function(R,F){if(Kh(F))for(var S=this,c=S.lp(F),E=S._60I,$=S._rowHeight,I=S._29I,N=I.x,P=I.y,U=I.width,h=I.height,J=0;J<E.size();J++){var X=E.get(J),r=X.startX,y=X.column,e=y.getWidth();if(y!==S._31o&&y!==S._4o&&S.isCellEditable(R,y)&&c.x>=r&&c.x<r+e){var d={x:r,y:S.getRowIndex(R)*$,width:e,height:$},f={x:d.x+S.tx(),y:d.y+S.ty(),width:d.width,height:d.height},V=0,o=0;return d.x<N?V=d.x-N:d.x+d.width>N+U&&(V=d.x+d.width-N-U),V&&(S.tx(S.tx()-V),f.x-=V),d.y<P?o=d.y-P:d.y+$>P+h&&(o=d.y+$-P-h),o&&(S.ty(S.ty()-o),f.y-=o),S.beginEditing({data:R,column:y,value:S.getValue(R,y),event:F,rect:d,editorRect:f,view:S}),void 0}}}},Vp.BaseItemEditor=function(H,G,d,n){this._data=H,this._column=G,this._master=d,this._editInfo=n},eq("BaseItemEditor",$,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Ak=I.Tab=function(){kd(Ak,this)};ms("Tab",sj,{ms_ac:["view","closable","disabled"],_icon:m,_closable:!1,_disabled:!1,setParent:ys});var gf=I.Column=function(){kd(gf,this)};ms("Column",sj,{_46o:1,ms_ac:["accessType","valueType",Pf,Zg,pl,Lk,"align",Zk,"sortOrder",zg,"sortable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Tp,_sortFunc:m,_sortable:!0,setWidth:function(l){16>l&&(l=16);var X=this._width;this._width=l,this.fp(Lk,X,l)},getToolTip:function(L,P){return this.formatValue(P.getValue(L,this))}});var vr=I.Property=function(){kd(vr,this)};ms("Property",sj,{_46o:1,ms_ac:["accessType","valueType",Zg,pl,"categoryName",Zk,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:m,getToolTip:function(B,$,w){var O=this;return $?O.formatValue(w.getValue(B,O)):w.getPropertyName(O)}}),Vp.AccordionView=function(){var U=this;U._20o={},U._21o=new om,U._10o=m,U._9o=m,U._11o=m,U._view=fq(),U.iv()},eq("AccordionView",$,{ms_v:1,ms_fire:1,ms_ac:[bo,Wc,"titleHeight",Zj,kg,"titleBackground","selectWidth",Ri,"orientation","separatorColor"],_expandIcon:e.accordionViewExpandIcon,_collapseIcon:e.accordionViewCollapseIcon,_titleHeight:jb,_labelColor:e.accordionViewLabelColor,_labelFont:e.accordionViewLabelFont,_titleBackground:e.accordionViewTitleBackground,_selectBackground:e.accordionViewSelectBackground,_selectWidth:e.accordionViewSelectWidth,_orientation:"v",_separatorColor:e.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(G,h,O,Q){var S=this,D=fq();if(S._20o[G])throw G+" already exists";D.onmousedown=xf,D.style.cursor=Kj,D.addEventListener(q?zm:Vb,function(H){xf(H)},!1),D.addEventListener(q?Tj:Li,function(t){xf(t),Kh(t)&&(S._10o===G?S.collapse():S.expand(G))},!1),If(S._view,D),S._20o[G]={content:h,div:D,canvas:pm(D),icon:Q},S._21o.add(G),O&&S.expand(G),S.iv()},remove:function(q){var Q=this,l=Q._20o[q];l&&(Cs(l.div),delete Q._20o[q],Q._21o.remove(q),Q.iv())},clear:function(){var m=this;m._20o={},m._21o.clear(),m.iv()},isExpanded:function(N){return this._10o===N},expand:function(E){var C=this;C._20o[E]&&C._10o!==E&&(C._10o=E,C.onExpanded(E),C.iv())},onExpanded:function(){},collapse:function(){var b=this;b._10o&&(b.onCollapsed(b._10o),delete b._10o,b.iv())},onCollapsed:function(){},initCanvas:function(R,V,C){$q(R,V,C);var H=Gk(R);return gc(H,0,0,1),H.clearRect(0,0,V,C),H},drawTitle:function(S,$,f,P,C){var w=this,F=Em(C.icon),s=w.isExpanded($),h=w._titleHeight,c=w._titleBackground,q=w._selectWidth,d=w._separatorColor,Y=Em(s?w._expandIcon:w._collapseIcon),O=q+4;Vi(S,0,0,f,P,c),s&&q&&Vi(S,0,0,q,P,w._selectBackground),(s||w._21o.get(w._21o.size()-1)!==$)&&Vi(S,0,P-1,f,1,d?d:El(c)),F&&(Wb(S,F,O+bp(F)/2,h/2),O+=bp(F)+2),un(S,$,w.getLabelFont($),w.getLabelColor($),O,0,0,h),Y&&Wb(S,Y,f-bp(Y)/2-4,h/2)},validateImpl:function(){var C=this,e=C._view,c=0,F=0,l=C.getWidth(),u=C.getHeight(),s=C._titleHeight,E=C._21o.size()*s,D=C._11o,B=C._9o;delete C._11o,delete C._9o,C._21o.each(function(j){var f,n,b=C._20o[j],M=b.content,r=C._10o===j;mq(C)?(Sq(b.div,c,0,s,u),f=C.initCanvas(b.canvas,s,u),Hm(f,0,u),Ji(f,-v),C.drawTitle(f,j,u,s,b),f.restore(),r?(n=k(0,l-E),M&&(C._11o=M,C._9o=vn(M),Sq(M,c+s,0,n,u)),c+=s+n):c+=s):(Sq(b.div,0,F,l,s),f=C.initCanvas(b.canvas,l,s),C.drawTitle(f,j,l,s,b),f.restore(),r?(n=k(0,u-E),M&&(C._11o=M,C._9o=vn(M),Sq(M,0,F+s,l,n)),F+=s+n):F+=s)});var W=C._9o;D&&D!==C._11o&&D.endEditing&&D.endEditing(),W&&W!==B&&If(e,W),B&&B!==W&&Cs(B)}}),Vp.SplitView=function(b,B,k,c){var r=this,R=r._dividerDiv=fq(),L=r._60O=pm(),Q=r._61O=pm(),q=L.style,l=Q.style;r._view=fq(1),If(r._view,R),q.msTouchAction=Fc,q.pointerEvents=Fc,q.cursor=Kj,l.msTouchAction=Fc,l.pointerEvents=Fc,l.cursor=Kj,b&&r.setLeftView(b),B&&r.setRightView(B),k&&r.setOrientation(k),c!=m&&r.setPosition(c),r.setStatus(Dm),new dd(r)},eq("SplitView",$,{ms_v:1,ms_fire:1,ms_ac:["dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:e.splitViewDividerSize,_dividerBackground:e.splitViewDividerBackground,_dragOpacity:e.splitViewDragOpacity,_toggleIcon:e.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(s,J){var h=this,y=h._position;isNaN(s)||(J||(h._82O=0>s?-1:s>1?1:0),h._position=s,h.fp(Nj,y,s))},getLeftView:function(){return this._leftView},setLeftView:function(P){var R=this,U=R._leftView,t=R._view;if(R._leftView!==P){if(U&&U!==R._rightView){var g=vn(U);g.parentNode===t&&Cs(g)}if(R._leftView=P,P){var O=vn(P);O.parentNode!==t&&t.insertBefore(O,R._dividerDiv)}R.fp("leftView",U,P)}},getRightView:function(){return this._rightView},setRightView:function(g){var C=this,P=C._rightView,F=C._view;if(C._rightView!==g){if(P&&P!==C._leftView){var c=vn(P);c.parentNode===F&&Cs(c)}if(C._rightView=g,g){var R=vn(g);R.parentNode!==F&&F.insertBefore(R,C._dividerDiv)}C.fp("rightView",P,g)}},validateImpl:function(){var Z=this,h=Z._draggable,V=Z._position,N=Z.getWidth(),b=Z.getHeight(),r=Z._dividerSize,I=Z._dividerBackground,X=q?18:8,n=Z._dividerDiv,u=Z._82O,L=Z._60O,$=Z._61O,D=Z._toggleIcon,j=Z._status,z=n.style,y=null,w=q?20:4,d=D.comps[0];r>=X||0===r?Z._coverDiv&&(Cs(Z._coverDiv),delete Z._coverDiv):Z._coverDiv||(Z._coverDiv=fq(),g&&(Z._coverDiv.style.background=cp),If(n,Z._coverDiv)),Z._togglable?L.parentNode||(If(n,L),If(n,$)):(Cs(L),Cs($));var m=Z._coverDiv,i=Z._leftView,K=Z._rightView;if(mq(Z)){if(r>N&&(r=N),j===Dm)if(1===u)var F=V,l=k(0,N-r-F);else-1===u?(l=-V,F=k(0,N-r-l)):(F=G((N-r)*V),l=k(0,N-r-F));else"cl"===j?(F=0,l=k(0,N-r)):"cr"===j&&(l=0,F=k(0,N-r));i&&Sq(i,0,0,F,b),K&&Sq(K,F+r,0,l,b),Sq(n,F,0,r,b),Z._22o=F,m&&(Sq(m,r/2-X/2,0,X,b),m.style.cursor=h?Ef:""),n.style.cursor=h?Ef:"";var e=n.clientHeight/2,S=n.clientWidth;$q(L,S,S),Sq(L,0,e-S-w,S,S),y=Gk(L),gc(y,0,0,1),d.rotation=-v,ib(y,D,0,0,S,S),y.restore(),$q($,S,S),Sq($,0,e+w,S,S),y=Gk($),gc(y,0,0,1),d.rotation=v,ib(y,D,0,0,S,S),y.restore()}else{if(r>b&&(r=b),j===Dm)if(1===u)var Q=V,P=k(0,b-r-Q);else-1===u?(P=-V,Q=k(0,b-r-P)):(Q=G((b-r)*V),P=k(0,b-r-Q));else"cl"===j?(Q=0,P=k(0,b-r)):"cr"===j&&(P=0,Q=k(0,b-r));i&&Sq(i,0,0,N,Q),K&&Sq(K,0,Q+r,N,P),Sq(n,0,Q,N,r),Z._22o=Q,m&&(Sq(m,0,r/2-X/2,N,X),m.style.cursor=h?Hc:""),z.cursor=h?Hc:"";var p=n.clientWidth/2,S=n.clientHeight;$q(L,S,S),Sq(L,p-S-w,0,S,S),y=Gk(L),gc(y,0,0,1),d.rotation=0,ib(y,D,0,0,S,S),y.restore(),$q($,S,S),Sq($,p+w,0,S,S),y=Gk($),gc(y,0,0,1),d.rotation=s,ib(y,D,0,0,S,S),y.restore()}z.background=I}});var dd=function(x){this.sv=x,this.addListeners()};qn(dd,$,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(e){var o=this,X=o.sv,x=X._dividerDiv,J=X._60O,S=X._61O,Z=X._status,p=e.target;if(p===J)Z===Dm?X.setStatus("cl"):"cr"===Z&&X.setStatus(Dm);else if(p===S)Z===Dm?X.setStatus("cr"):"cl"===Z&&X.setStatus(Dm);else if(Rf(e)&&(p===x||p===X._coverDiv)&&(xf(e),X.isDraggable())){o.resizeDiv=fq();var b=o.resizeDiv.style,f=x.style,h=X.getLeftView(),H=X.getRightView();o._maskViews=[],[h,H].forEach(function(s){s=s.getView?s.getView():s;var t=fq(),k=t.style;k.left=s.style.left,k.top=s.style.top,k.width=s.offsetWidth+"px",k.height=s.offsetHeight+"px",X.getView().appendChild(t),o._maskViews.push(t)}),b.left=f.left,b.top=f.top,b.width=f.width,b.height=f.height,b.opacity=X.getDragOpacity(),b.background=X.getDividerBackground(),o._85o=o._86o=mq(X)?Pk(e).x:Pk(e).y,If(o.getView(),o.resizeDiv),o._clientPoint=Pk(e),yo(o,e)}},handleWindowTouchMove:function(E){if(Rf(E)){var D=this,Y=D.sv,e=Y._dividerSize,W=D.resizeDiv.style,B=Y.getWidth(),I=Y.getHeight(),U=Y._22o-D._86o;mq(Y)?(D._85o=Pk(E).x,U+=D._85o,U>B-e&&(U=B-e),0>U&&(U=0),W.left=U+Hd):(D._85o=Pk(E).y,U+=D._85o,U>I-e&&(U=I-e),0>U&&(U=0),W.top=U+Hd)}},handleWindowTouchEnd:function(Y){var C=this,J=C.sv,B=J._22o-C._86o+C._85o,e=J._dividerSize,P=mq(J)?J.getWidth():J.getHeight(),b=J._82O,s=Dj(C._clientPoint,Pk(Y));s>1&&(J.setStatus(Dm),0>B&&(B=0),B>P-e&&(B=P-e),P!==e&&(1===b?J.setPosition(B,1):-1===b?J.setPosition(B-P+e,1):J.setPosition(B/(P-e),1))),C._maskViews&&C._maskViews.forEach(function(d){Cs(d)}),Cs(C.resizeDiv),C.resizeDiv=C._85o=C._clientPoint=m},handle_mousedown:function(q){Kh(q)&&this.handle_touchstart(q)},handleWindowMouseMove:function(O){this.handleWindowTouchMove(O)},handleWindowMouseUp:function(r){this.handleWindowTouchEnd(r)}}),Vp.TabView=function(){var Q=this,R=Q._view=fq(1),X=Q._91O=fq(1),k=Q._tabModel=new Ze,v=k.sm(),T=Q.invalidate;Q._7o=new om,Q._canvas=pm(X),If(R,X),If(R,Q._92O=fq(1)),v.setSelectionMode(K),v.ms(T,Q),k.mm(T,Q),k.md(T,Q),k.mh(T,Q),new km(Q),Q.iv()},eq("TabView",$,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Zj,kg,"tabBackground","selectWidth",Ri,"moveBackground","insertColor"],_tabPosition:Jg,_tabHeight:jb,_tabGap:e.tabViewTabGap,_labelColor:e.tabViewLabelColor,_labelFont:e.tabViewLabelFont,_tabBackground:e.tabViewTabBackground,_selectWidth:e.tabViewSelectWidth,_selectBackground:e.tabViewSelectBackground,_moveBackground:e.tabViewMoveBackground,_insertColor:e.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(s,a,C){var r=new Ak,A=this._tabModel;return r.setName(s),r.setView(a),A.add(r),C&&A.sm().ss(r),r},getLabel:function(k){return k.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(V){this._23o=V,this.iv()},get:function(H){var W=this,x=W._tabModel;if(Gg(H))return x._roots.get(H);if(xs(H)){var G;return x.each(function($){H===W.getLabel($)&&(G=$)}),G}return H instanceof Ak?H:m},select:function(m){this._tabModel.sm().ss(this.get(m))},remove:function(n){var k=this;if(n=k.get(n)){var O=k._tabModel,$=O._roots.indexOf(n);k._tabModel.remove(n),k._12Q(--$)}},getCurrentTab:function(){return this._8o},hideTabView:function(H,O){O.parentNode===this._92O&&(_r(O)?(O.style.display=Xj,O._tab_=H):Cs(O),zk())},showTabView:function(d,c){_r(c)&&(c.style.display="block",c._tab_=d),c.parentNode!==this._92O&&(If(this._92O,c),zk())},_24o:function(){var n,F=this,E=F._8o,h=F._9o,Z=F._tabModel.sm().ld();Z&&(n=vn(Z.getView())),n!==h&&(h&&(E.getView().endEditing&&E.getView().endEditing(),F.hideTabView(E,h)),n&&F.showTabView(Z,n)),F._8o=Z,F._9o=n,E!==Z&&F.onTabChanged(E,Z)},onTabChanged:function(){},onTabClosed:function(G,L){this._12Q(--L)},_12Q:function(U){var l=this,t=l._tabModel,Q=t.size();if(Q&&!t.sm().ld()){U==m&&(U=0),U>=Q&&(U=Q-1),0>U&&(U=0);for(var j=U;j>=0;j--){var B=l.get(j);if(!B.isDisabled())return l.select(B),B}for(j=U+1;Q>j;j++)if(B=l.get(j),!B.isDisabled())return l.select(B),B}},_9Q:function(m){var N=4,i=Em(m.getIcon());i&&(N+=bp(i,m)+4);var V=this.getLabel(m);return V&&(N+=Ph(this.getLabelFont(m),V).width+4),m.isClosable()&&(N+=10),N},_10Q:function(L,n,G,V,H,k,B){var e,U=this,x=U._tabPosition,c=G+4,D=U._selectWidth,C=Em(n.getIcon()),A=n.isDisabled(),I=U.getLabelColor(n),f=U.getLabelFont(n),Q=U.getLabel(n),W=U._selectBackground,Z=x===j+"-vertical",t=x===O+"-vertical";(Z||t)&&(c=V+4),A&&(L.globalAlpha=ur),Vi(L,G,V,H,k,B),n===U._8o&&D&&(x===Jg?Vi(L,G,V+k-D,H,D,W):x===j?Vi(L,G+H-D,V,D,k,W):x===O?Vi(L,G,V,D,k,W):Z?Vi(L,G+H-D,V,D,k,W):t?Vi(L,G,V,D,k,W):Vi(L,G,V,H,D,W));var T=H/2;if(Z&&(Hm(L,T,V+k/2),Ji(L,s),Hm(L,-T,-V-k/2)),C){var m=Fd(C,n),p=bp(C,n);if(Z||t){var K=G+H/2,y=c+m/2;Hm(L,K,y),Ji(L,v),Hm(L,-K,-y),Wb(L,C,G+H/2,c+m/2,n,U),Hm(L,K,y),Ji(L,-v),Hm(L,-K,-y),c+=m+4}else Wb(L,C,c+p/2,V+k/2,n,U),c+=p+4}return Z||t?(Hm(L,H/2,c+H/2),Ji(L,v),Hm(L,-H/2,-c-H/2),un(L,Q,f,I,G,c,k,H),Hm(L,H/2,c+H/2),Ji(L,-v),Hm(L,-H/2,-c-H/2)):un(L,Q,f,I,c,V,H,k),Z&&(Hm(L,T,V+k/2),Ji(L,-s),Hm(L,-T,-V-k/2)),n.isClosable()&&(L.strokeStyle=I,L.lineWidth=1,L.beginPath(),t?(L.moveTo(G+H-10,V+k-4),L.lineTo(G+H-4,V+k-10),L.moveTo(G+H-4,V+k-4),L.lineTo(G+H-10,V+k-10),L.stroke(),e={x:G+H-12,y:V+k-12,width:12,height:12}):(L.moveTo(G+H-10,V+4),L.lineTo(G+H-4,V+10),L.moveTo(G+H-4,V+4),L.lineTo(G+H-10,V+10),L.stroke(),e={x:G+H-12,y:V,width:12,height:12})),A&&(L.globalAlpha=1),e},validateImpl:function(){var l=this;l._24o();var o,B=l._canvas,x=l._tabPosition,V=l._91O,T=l._92O,a=l._tabModel,f=l.getWidth(),F=l.getHeight(),A=l._tabHeight,J=l._7o,g=l._tabGap,u=x===Jg,Z=x===j,q=x===He,Q=x===O,E=x===j+"-vertical",$=x===O+"-vertical",s=l._23o,H=0;if((Z||Q)&&a._roots.each(function(G){H=k(l._9Q(G),H)}),u?(Sq(V,0,0,f,A),o={x:0,y:A,width:f,height:k(0,F-A)}):Z?(Sq(V,0,0,H,F),o={x:H,y:0,width:k(0,f-H),height:F}):Q?(Sq(V,f-H,0,H,F),o={x:0,y:0,width:k(0,f-H),height:F}):E?(Sq(V,0,0,A,F),o={x:A,y:0,width:k(0,f-A),height:F}):$?(Sq(V,f-A,0,A,F),o={x:0,y:0,width:k(0,f-A),height:F}):(Sq(V,0,F-A,f,A),o={x:0,y:0,width:f,height:k(0,F-A)}),Sq(T,o),E||$){l._9o&&(o.x=0,Sq(l._8o.getView(),o)),$q(B,A,F);var z=Gk(B),S=0;if(gc(z,0,l.ty(),1),z.clearRect(0,0,A,F),J.clear(),a._roots.each(function(d){var Y,E=l._9Q(d);s&&s.tab===d||(Y=l._10Q(z,d,0,S,A,E,l._tabBackground),Y&&$&&(Y.x=f-12)),J.add({_75o:Y,tab:d,startY:S,endY:S+E,height:E}),S+=E+g}),l._23Q=k(0,S-g),s){var v=s.position;l._10Q(z,s.tab,0,s.startY,A,s.height,l._moveBackground),Vi(z,0,v,A,1,l._insertColor)}z.restore(),l.ty(l.ty())}else if(Z||Q){l._9o&&(o.x=0,Sq(l._8o.getView(),o)),$q(B,H,F);var z=Gk(B),S=0;if(gc(z,0,l.ty(),1),z.clearRect(0,0,H,F),J.clear(),a._roots.each(function(u){var i;s&&s.tab===u||(i=l._10Q(z,u,0,S,H,A,l._tabBackground),i&&Q&&(i.x=f-12)),J.add({_75o:i,tab:u,startY:S,endY:S+A,height:A}),S+=A+g}),l._23Q=k(0,S-g),s){var v=s.position;l._10Q(z,s.tab,0,s.startY,H,s.height,l._moveBackground),Vi(z,0,v,H,1,l._insertColor)}z.restore(),l.ty(l.ty())}else{l._9o&&(o.y=0,Sq(l._8o.getView(),o)),$q(B,f,A);var z=Gk(B),C=0;if(gc(z,l.tx(),0,1),z.clearRect(0,0,f,A),J.clear(),a._roots.each(function(b){var f,M=l._9Q(b);s&&s.tab===b||(f=l._10Q(z,b,C,0,M,A,l._tabBackground),f&&q&&(f.y=F-A)),J.add({_75o:f,tab:b,startX:C,endX:C+M,width:M}),C+=M+g}),l._64I=k(0,C-g),s){var v=s.position;l._10Q(z,s.tab,s.startX,0,s.width,A,l._moveBackground),dp(z,l._insertColor,v,0,A)}z.restore(),l.tx(l.tx())}for(var I=[],P=T.children,d=0;d<P.length;d++){var _=P[d],M=_._tab_;M&&!a.contains(M)&&I.push(_)}I.forEach(function(I){T.removeChild(I)})}});var km=function(L){this.tv=L,this.addListeners()};qn(km,$,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(D){this.handleScroll(D,10*(D.wheelDelta/40))},handle_DOMMouseScroll:function($){this.handleScroll($,10*-$.detail)},handleScroll:function(A,z){xf(A);var U=this.tv,K=U._tabPosition;!U._40o()||K!==Jg&&K!==He||U.tx(this.tv.tx()+z),!U._41o()||K!==j&&K!==O&&K!==j+"-vertical"&&K!==O+"-vertical"||U.ty(this.tv.ty()+z)},_8Q:function(C){var S,$,Z=this.tv,H=Z._tabPosition,D=Z._7o;
if(H===Jg||H===He){var i=Z.lp(C).x;for(S=0;S<D.size();S++)if($=D.get(S),$.startX<=i&&i<=$.endX)return $}else if(H===j||H===O||H===j+"-vertical"||H===O+"-vertical"){var w=Z.lp(C).y;for(S=0;S<D.size();S++)if($=D.get(S),$.startY<=w&&w<=$.endY)return $}return m},isClickable:function(N){var P=this.tv,M=P._tabPosition,L=this._73o=this._8Q(N);return!P._40o()||M!==Jg&&M!==He?!P._41o()||M!==j&&M!==O&&M!==j+"-vertical"&&M!==O+"-vertical"?L&&(!L.tab.isDisabled()||P.isMovable()):!0:!0},handle_mousemove:function(N){var F=this;Aj?F._74o=F._8Q(N):F.getView().style.cursor=F.isClickable(N)?Kj:""},handle_mousedown:function(C){this.handle_mousemove(C),this.handle_touchstart(C)},handle_touchstart:function(N){var A=this,b=A.tv,M=b._tabPosition;xf(N),A.isClickable(N)&&(M===Jg||M===He?(A.x=Pk(N).x,A.lp=b.lp(N),A.tx=b.tx()):(A.y=Pk(N).y,A.lp=b.lp(N),A.ty=b.ty()),yo(A,N))},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handleWindowTouchMove:function(M){var H,E=this,u=E.tv,R=u._tabPosition,c=E._73o;if(R===Jg||R===He){if(H=Pk(M).x-E.x,!E._25o&&!E.moving&&Y(H)>2&&(u._40o()&&!Bd(M)?E._25o=1:c&&u.isMovable()&&(E.moving=1)),E._25o)u.tx(E.tx+H);else if(E.moving){var h=E.lp.x+H,J=u._tabGap/2;u._7o.each(function(B){var m=B.endX,D=h-B.startX<m-h;h>=B.startX&&m>=h&&u._7Q({tab:c.tab,startX:c.startX+H,width:c.width,front:D,insertTab:B.tab,position:D?k(0,B.startX-J):_(u._64I,m+J)})})}}else if(H=Pk(M).y-E.y,!E._25o&&!E.moving&&Y(H)>2&&(u._41o()&&!Bd(M)?E._25o=1:c&&u.isMovable()&&(E.moving=1)),E._25o)u.ty(E.ty+H);else if(E.moving){var o=E.lp.y+H,J=u._tabGap/2;u._7o.each(function(U){var A=U.endY,T=o-U.startY<A-o;o>=U.startY&&A>=o&&u._7Q({tab:c.tab,startY:c.startY+H,height:c.height,front:T,insertTab:U.tab,position:T?k(0,U.startY-J):_(u._23Q,A+J)})})}},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(){var N=this,v=N.tv,Q=v._tabPosition,O=v.getTabModel(),R=O._roots,X=N._73o;if(N.moving){var S=v._23o;if(S&&S.insertTab!==S.tab){var t=S.tab,Z=R.remove(t),D=R.indexOf(S.insertTab);D>=0&&(S.front||D++,D<=R.size()&&(R.add(t,D),O._38I(t,Z,D)))}v._7Q(m),delete N.moving}else if(!N._25o&&X){t=X.tab;var h=N._74o;if(!h||h.tab===t)if(!t.isDisabled()&&lf(X._75o,N.lp)){var G=R.indexOf(t);O.remove(t),v.onTabClosed(t,G)}else t.isDisabled()||v._8o===t||O.sm().ss(t)}N._25o=N._73o=N._74o=Q===Jg||Q===He?N.x=N.lp=N.tx=m:N.y=N.lp=N.ty=m}}),Vp.PropertyView=function(J){var v=this;v._view=fq(1),v._canvas=pm(v._view),If(v._view,v._79O=fq()),v._rows=new om,v._28o=new om,v._26o={},v._26Q={};var c=v._propertyModel=new Ze,B=v.ivm;c.mm(B,v),c.md(B,v),c.mh(B,v),v.dm(J?J:new Ze),new Nd(v)},eq("PropertyView",$,{ms_ac:[Zj,Qf,kg,Zg,pl,"categorizable",Bq,zg,ri,bo,Wc,pd,wp,dq,"selectRowIndex",Ri,"background",De,Yh,cj,Jk,ef],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:po,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:hr,_background:e.propertyViewBackground,_expandIcon:e.propertyViewExpandIcon,_collapseIcon:e.propertyViewCollapseIcon,_scrollBarColor:cc,_scrollBarSize:hj,_autoHideScrollBar:Ol,_selectBackground:e.propertyViewSelectBackground,_rowHeight:Nh,_rowLineVisible:e.propertyViewRowLineVisible,_rowLineColor:e.propertyViewRowLineColor,_10I:.5,_columnLineVisible:e.propertyViewColumnLineVisible,_columnLineColor:e.propertyViewColumnLineColor,_labelColor:e.propertyViewLabelColor,_labelSelectColor:e.propertyViewLabelSelectColor,_labelFont:e.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(r){0>r&&(r=0),r>1&&(r=1);var P=this,S=P._10I;P._10I=r,P.fp("columnPosition",S,r)},getPropertyName:function(S){return S.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(p,G,M){return M===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(v,s){return s===this._selectRowIndex?this._labelSelectColor:v.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(V){var N=this.getHeight()-this._59I;return N>V&&(V=N),V>0?0:G(V)},isExpanded:function(I){if(!I)return!0;var p=this._26o[I];return p?p.isExpanded:!(this._26Q[I]===!1)},toggle:function(W){var p=this;p.isExpanded(W)?p.collapse(W):p.expand(W)},expandAll:function(){this.validate();for(var D in this._26o)this.expand(D)},expand:function(v){if(v&&v!==Xj){var o=this,J=o._26o[v];J&&!J.isExpanded&&(J.isExpanded=!0,o.onExpanded(v),o.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var Y in this._26o)this.collapse(Y)},collapse:function(P){if(P&&P!==Xj){var $=this,A=$._26o[P];A&&A.isExpanded&&(A.isExpanded=!1,$.onCollapsed(P),$.ivm())}},onCollapsed:function(){},getCategoryName:function(e){if(!this.isCategorizable())return Xj;var X=e.getCategoryName();return X?X:Xj},getPropertyModel:function(){return this._propertyModel},setDataModel:function(A){var w=this,_=w._dataModel;_!==A&&(_&&(_.umd(w.handlePropertyChange,w),w._3o||_.sm().ums(w.ivm,w)),w._dataModel=A,A.md(w.handlePropertyChange,w),w._3o?w._3o._21I(A):A.sm().ms(w.ivm,w),w.fp(Kq,_,A))},isVisible:function(C){return this._visibleFunc?this._visibleFunc(C):!0},onPropertyChanged:function(N){var Q=this,$=N.property;Ym[$]?Q.ivm():Q.iv(),$===Uh&&Q._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Up},handlePropertyChange:function(m){this._27o===m.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var f=this;f._96I||(f.setSelectRowIndex(-1),f._96I=1,f.iv())},redraw:function(){this.iv()},validateModel:function(){var u=this,C=u._rows,d=u._28o,o={},Z=new om,A=u._27o;u.updateCurrentData(),A!==u._27o&&u.endEditing(),C.clear(),d.clear(),u.getRawProperties().each(function(F){if(u.isVisible(F)){Z.add(F);var j=u.getCategoryName(F);o[j]||(d.add(j,j===Xj?0:E),o[j]={isExpanded:u.isExpanded(j),properties:new om})}}),u._sortFunc&&Z.sort(u._sortFunc);for(var c in u._26o)u._26Q[c]=u.isExpanded(c);u._26o=o,d.each(function(K){K!==Xj&&C.add(K);var x=o[K];x.isExpanded&&Z.each(function(O){u.getCategoryName(O)===K&&(x.properties.add(O),C.add({property:O,data:u._27o}))},u)})},validateImpl:function(){var T=this;T._76o(),T._96I&&(T.validateModel(),delete T._96I);var n=T._canvas,f=T.getWidth(),C=T.getHeight(),M=-T.ty(),u=T._rowHeight,i=T._indent,G=f-i,j=T._rows,O=j.size(),X=T._9I=i+G*T._10I,d=T._59I=O*u;$q(n,f,C),T._29I={x:0,y:M,width:f,height:C},T._31I=w(M/u),T._14I=h((M+C)/u),T._31I<0&&(T._31I=0),T._14I>O&&(T._14I=O);var a,z=Gk(n),J=T._background;gc(z,0,-M,1),z.beginPath(),z.rect(0,M,f,C),z.clip(),z.clearRect(0,M,f,C),T._93db(z),J&&Vi(z,0,0,i,d,J);for(var N=T._31I;N<T._14I;N++){var x=j.get(N),M=u*N;if(xs(x))J&&Vi(z,i,M,G,u,J),a=Em(T.isExpanded(x)?T._expandIcon:T._collapseIcon),a&&bj(z,a,ug,0,M,i,u),z.save(),z.beginPath(),z.rect(i,M,G,u),z.clip(),T.drawCategoryName(z,x,N,i,M,G,u),z.restore();else{var o=x.property,t=x.data,a=Em(o.getIcon()),W=T._selectRowIndex===N?T.getSelectBackground():m;if(a&&bj(z,a,ug,0,M,i,u),W&&Vi(z,i,M,G,u,W),z.save(),z.beginPath(),z.rect(i,M,X-i,u),z.clip(),T.drawPropertyName(z,o,N,i,M,X-i,u),z.restore(),!T.isEditing(t,o)){var $=X+1,v=f-X-1;z.save(),z.beginPath(),z.rect($,M,v,u),z.clip(),T._87o(T.drawPropertyValue(z,o,T.getValue(t,o),N,$,M,v,u,t),N,$,M,v,u),z.restore()}}T._rowLineVisible&&Vi(z,i,M+u-1,G,1,T._rowLineColor)}T._columnLineVisible&&(Vi(z,X,0,1,d,T._columnLineColor),Vi(z,f-1,0,1,d)),T._92db(z),T._93I(),z.restore(),T.ty(T.ty())},drawCategoryName:function(y,c,s,H,t,z,B){un(y,c,this.getCategoryFont(c),this.getCategoryColor(c),H,t,z,B)},drawPropertyName:function(Z,N,j,V,C,v,i){return N.drawPropertyName?(N.drawPropertyName(Z,N,j,V,C,v,i,this),void 0):(un(Z,this.getPropertyName(N),this.getPropertyFont(N,j),this.getPropertyColor(N,j),V,C,v,i),void 0)},drawPropertyValue:function(L,e,k,y,W,i,U,p,g){return e.drawPropertyValue?e.drawPropertyValue(L,e,k,y,W,i,U,p,g,this):(jl(L,k,e,this.getLabelFont(e,k,y),this.getLabelColor(e,k,y),W,i,U,p,g,this),void 0)},isPropertyEditable:function(K){return K.isEditable()&&this.isEditable()},setProperties:function(N){this._propertyModel.clear(),this.addProperties(N)},addProperties:function(O){if(O){var X=this._propertyModel;O.forEach(function(F){if(!(F instanceof vr)){var t=Yo(F.className);F=ze(t?t:vr,F)}X.add(F)})}},getRowIndexAt:function(P){var U=this,O=w(U.lp(P).y/U._rowHeight);return O>=0&&O<U._rows.size()?O:-1},getPropertyAt:function(l){var c=this,O=c.getRowIndexAt(l);return O>=0?c._rows.get(O).property:m},getToolTip:function(N){var p=this,j=p.getPropertyAt(N),y=p._27o;return j&&y?j.getToolTip(y,p._9I<p.lp(N).x,p):m}});var Nd=function(C){this.pv=C,this.addListeners()};qn(Nd,$,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function($){this.getView().style.cursor=$},clear:function(){var h=this;h._62O=h.cp=h.ty=h.p=m,h.setCursor(x)},handle_mousedown:function(b){this.handle_touchstart(b)},handle_touchstart:function(A){var X=this,_=X.pv;xf(A),_.setFocus(A)&&(Kh(A)?(X.cp=Pk(A),X.ty=_.ty(),X.p=_.getColumnPosition(),X.handle_touchmove(A)):_.setSelectRowIndex(_.getRowIndexAt(A)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(N){this.handle_touchend(N)},handle_touchend:function(V){var F=this;if(F.cp&&!F._62O){var M=F.pv,X=M.lp(V),W=X.x,O=X.y,E=M._indent,j=M.getRowIndexAt(V),v=M._9I;if(j>=0){var L=M._rowHeight,i=L*j,h=M._rows.get(j),y=h.property;if(xs(h))Em(M.isExpanded(h)?M._expandIcon:M._collapseIcon)&&W>=0&&E>=W&&O>=i&&i+L>=O?M.toggle(h):Ql(V)&&M.toggle(h);else if(W>v&&M.isPropertyEditable(y)){var u={x:v+1,y:i,width:M.getWidth()-v-1,height:L},f={x:u.x+M.tx(),y:u.y+M.ty(),width:u.width,height:u.height},s=0,n=M._29I;u.y<n.y?s=u.y-n.y:u.y+L>n.y+n.height&&(s=u.y+L-n.y-n.height),s&&(M.ty(M.ty()-s),f.y-=s),M.beginEditing({data:h.data,property:y,value:M.getValue(h.data,y),event:V,rect:u,editorRect:f,view:M})}}M.setSelectRowIndex(j)}F.clear()},handleWindowMouseMove:function(c){this.handleWindowTouchMove(c)},handleWindowTouchMove:function(n){var J=this,I=J.pv,K=J.ty,o=J.cp,p=Pk(n),F=J._62O;if("p"===F)I.setTranslateY(K+p.y-o.y);else if("c"===F){var A=I.getWidth()-I._indent;if(A>16){var z=J.p-(o.x-p.x)/A,P=16/A;P>z&&(z=P),z>1-P&&(z=1-P),I.setColumnPosition(z)}}else"s"===F&&I.setTranslateY(K+(o.y-p.y)*I._59I/I._29I.height)},handle_mousemove:function(W){this.handle_touchmove(W)},handle_touchmove:function(s){if(!Aj&&Kh(s)){var w=this,W=w.pv,D=Y(W.lp(s).x-W._9I)<=(q?8:3);w.cp?w._62O||(D?(w._62O="c",yo(w)):Y(Pk(s).y-w.cp.y)>=2&&(w._62O=w.isV(s)?"s":"p",yo(w))):(D?w.setCursor(Ef):w.setCursor(x),w.isV(s)&&W._43o())}},isV:function(G){var C=this.pv,E=C._29I;return C._41o()&&E.x+E.width-C.lp(G).x<Gn},handle_mousewheel:function(l){this.handleScroll(l,l.wheelDelta/40)},handle_DOMMouseScroll:function(U){2===U.axis&&this.handleScroll(U,-U.detail)},handleScroll:function(m,P){var h=this.pv;xf(m),h.endEditing(),h.translate(0,P*h.getRowHeight())},handle_keydown:function(i){var w=this.pv,p=w._rows.size(),Q=w._selectRowIndex+(ek(i)?-1:1);(ek(i)||vp(i))&&(0>Q&&(Q=0),Q>=p&&(Q=p-1),w.setSelectRowIndex(Q))}}),Vp.ListView=function(P){this._5o(P),new Ib(this)},eq("ListView",$,{ms_ac:[Zj,Qf,kg,De,Bq,Yh,cj,zg,ri,pd,wp,dq,Pe,Ri],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:hr,_rowHeight:Nh,_rowLineVisible:e.listViewRowLineVisible,_rowLineColor:e.listViewRowLineColor,_scrollBarColor:cc,_scrollBarSize:hj,_autoMakeVisible:Pq,_autoHideScrollBar:Ol,_selectBackground:e.listViewSelectBackground,_labelColor:e.listViewLabelColor,_labelSelectColor:e.listViewLabelSelectColor,_labelFont:e.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(Y){var p=this,s=p._checkMode;p._checkMode=Y,p.fp(mr,s,Y)},drawRow:function(Q,H,W,s,U,N,h){var D=this,d=0,y=D._indent,F=D.getIconWidth(H);D.drawRowBackground(Q,H,W,s,U,N,h),D._checkMode&&(Wb(Q,D.getCheckIcon(H),d+y/2,U+h/2,H,D),d+=y),D.drawIcon(Q,H,d,U,F,h),D.drawLabel(Q,H,d+F,U,h)}});var Ib=function(u){this.list=u,this.addListeners()};qn(Ib,$,{ms_listener:1,getView:function(){return this.list._view},clear:function(e){var P=this;e&&"d"===P._62O&&P.list.handleDragAndDrop(e,"end"),P._62O=P.cp=P.tx=P.ty=m},handle_mousedown:function(R){this.handle_touchstart(R)},handle_touchstart:function(A){var Q=this,J=Q.list;if(xf(A),J.setFocus(A))if(Q.cp=Pk(A),Q.tx=J.tx(),Q.ty=J.ty(),Kh(A))Q.isV(A)||Q.isH(A)||!J.handleDragAndDrop||J.handleDragAndDrop(A,"prepare");else{var Z=J.getDataAt(A);Z&&Q._33o(A,Z),Q.clear(A)}},handleWindowMouseUp:function(N){this.clear(N)},handleWindowTouchEnd:function(h){this.clear(h)},handle_mouseup:function(G){this.handle_touchend(G)},handle_touchend:function(l){var o=this,h=o.list;if(o.cp&&!o._62O){var y=h.getDataAt(l);y&&(h.isCheckMode()?o._34o(l,y):o._33o(l,y),Ql(l)?h.onDataDoubleClicked(y,l):h.onDataClicked(y,l))}o.clear(l)},handleWindowMouseMove:function(H){this.handleWindowTouchMove(H)},handleWindowTouchMove:function(J){var e=this,E=e.list,t=e._62O,M=e.tx,p=e.ty,x=e.cp,Z=Pk(J),j=E._29I;"p"===t?E.setTranslate(M+Z.x-x.x,p+Z.y-x.y):"v"===t?E.ty(p+(x.y-Z.y)*E._59I/j.height):"h"===t?E.tx(M+(x.x-Z.x)*E._91I/j.width):"d"===t&&E.handleDragAndDrop(J,"between")},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(x){if(!Aj&&Kh(x)){var o=this,T=o.list,J=o.isV(x),$=o.isH(x);if(o.cp){if(!o._62O){if(Dj(Pk(x),o.cp)<2)return;J?o._62O="v":$?o._62O="h":T.handleDragAndDrop?(o._62O="d",T.handleDragAndDrop(x,"begin")):o._62O="p",yo(o)}}else J&&T._43o(),$&&T._42o()}},isV:function(E){var Y=this.list,c=Y._29I;return Y._41o()&&c.x+c.width-Y.lp(E).x<Gn},isH:function(c){var Z=this.list,e=Z._29I;return Z._40o()&&e.y+e.height-Z.lp(c).y<Gn},handle_mousewheel:function(V){this.handleScroll(V,V.wheelDelta/40,V.wheelDelta!==V.wheelDeltaX)},handle_DOMMouseScroll:function(B){this.handleScroll(B,-B.detail,1)},handleScroll:function(u,D,d){var R=this.list;xf(u),R.endEditing&&R.endEditing(),d&&R._41o()?R.translate(0,D*R.getRowHeight()):R._40o()&&R.translate(10*D,0)},handle_keydown:function(q){var G,h=this.list,x=h.sm(),I=h._rows,b=I.size();if(tq(q))h.selectAll();else if(el(q))h.handleDelete&&h.handleDelete(q);else if(eg(q))h.isCheckMode()&&(G=h.getFocusData(),G&&h.checkData(G));else if(ek(q)||vp(q)){var W=h.isCheckMode();if(G=W?h.getFocusData():x.ld()){var r=h.getRowIndex(G);r>=0&&(ek(q)?0!==r&&(G=I.get(r-1),W?h.setFocusData(G):x.ss(G)):r!==b-1&&(G=I.get(r+1),W?h.setFocusData(G):x.ss(G)))}else b>0&&(G=I.get(0),W?h.setFocusData(G):x.ss(G))}},_34o:function(s,g){var e=this.list,w=e.lp(s).x;return w>=0&&w<=e._indent?(e.checkData(g),void 0):(e.setFocusData(g),void 0)},_33o:function(V,J){var Z=this.list,c=Z.sm(),f=c.ld();if(Bd(V))Z.isSelected(J)?c.rs(J):c.as(J);else if(Do(V))if(f)for(var $=Z.getRowIndex(f),T=Z.getRowIndex(J);$!==T;)$+=T>$?1:-1,c.as(Z._rows.get($));else c.ss(J);else(Kh(V)||!c.contains(J))&&c.ss(J)}}),Vp.TreeView=function(b){var B=this;B._35o(),B._5o(b),new ql(B)},eq("TreeView",$,{ms_ac:[Zj,Qf,kg,"rootVisible",mr,"rootData",zg,ri,pd,wp,dq,Bq,De,Yh,cj,bo,Wc,Pe,Ri,"loader"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:m,_indent:hr,_rowHeight:Nh,_rowLineVisible:e.treeViewRowLineVisible,_rowLineColor:e.treeViewRowLineColor,_scrollBarColor:cc,_scrollBarSize:hj,_autoHideScrollBar:Ol,_expandIcon:e.treeViewExpandIcon,_collapseIcon:e.treeViewCollapseIcon,_autoMakeVisible:Pq,_selectBackground:e.treeViewSelectBackground,_labelColor:e.treeViewLabelColor,_labelSelectColor:e.treeViewLabelSelectColor,_labelFont:e.treeViewLabelFont,drawRow:function(Z,w,G,$,T,x,h){var l=this;l.drawRowBackground(Z,w,G,$,T,x,h),l._97I(Z,w,G,0,T,x,h)}});var ql=function(q){kd(ql,this,[q])};qn(ql,Ib,{toggle:function(u,P,$,F){var r=this.list,d=r.lp(u).x;if(Em(r.getToggleIcon(P))){var H=$*F;if(d>=H&&H+$>=d)return r.toggle(P),!0}return Ql(u)?(r.toggle(P),!0):!1},_34o:function(r,j){var P=this.list,E=P.lp(r).x,s=P._levelMap[j._id],U=P._indent,m=U*(s+1);return E>=m&&m+U>=E?(P.checkData(j),void 0):(this.toggle(r,j,U,s)||P.setFocusData(j),void 0)},_33o:function(P,Q){var Y=this,X=Y.list;Y.toggle(P,Q,X._indent,X.getLevel(Q))||ql.superClass._33o.call(Y,P,Q)},handle_keydown:function(U){if(cb(U)||Um(U)){var O=this.list,u=O._rows,F=O.isCheckMode(),$=O.sm(),f=F?O.getFocusData():$.ld();f?f.hasChildren()&&(cb(U)?O.collapse(f):O.expand(f)):u.size()>0&&(f=u.get(0),F?O.setFocusData(f):$.ss(f))}else ql.superClass.handle_keydown.call(this,U)}});var mh=Vp.TableView=function(t){this._98I(),this._5o(t),new Di(this)};eq("TableView",$,{ms_ac:[Zj,Qf,kg,"sortMode",Zg,pl,De,Yh,cj,Jk,ef,"sortColumn",zg,ri,pd,wp,dq,Pe,Ri],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Ki,_editable:!0,_batchEditable:!1,_rowHeight:Nh,_rowLineVisible:e.tableViewRowLineVisible,_rowLineColor:e.tableViewRowLineColor,_columnLineVisible:e.tableViewColumnLineVisible,_columnLineColor:e.tableViewColumnLineColor,_scrollBarColor:cc,_scrollBarSize:hj,_autoHideScrollBar:Ol,_autoMakeVisible:Pq,_selectBackground:e.tableViewSelectBackground,_labelColor:e.tableViewLabelColor,_labelSelectColor:e.tableViewLabelSelectColor,_labelFont:e.tableViewLabelFont,getCheckColumn:function(){var j=this;if(!j._31o){var B=j._31o=new gf;B.setEditable(!0),B.setWidth(40),B.getValue=j.getCheckColumValue,B.drawCell=j.drawCheckColumnCell}return j._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(P){var D=this,J=D._39o,k=D.getCheckColumn();P!==D.isCheckMode()&&(P?J.add(k,0):J.remove(k),D.fp(mr,!P,P))},getCheckColumValue:function(D,h,V){return V.isSelected(D)},drawCheckColumnCell:function(C,V,J,W,k,b,Y,f,X){Wb(C,X.getCheckIcon(V),k+Y/2,b+f/2,V,X)}});var Di=function(U){kd(Di,this,[U])};qn(Di,Ib,{_34o:function(X,x){var d=this.list,$=d._31o;if(d.isCellEditable(x,$)){var o=d._3Q($),r=d.lp(X).x;if(o&&r>=o.startX&&r<o.startX+$.getWidth())return d.checkData(x),void 0}d.setFocusData(x),d._37O(x,X)},_33o:function(v,C){Di.superClass._33o.apply(this,arguments),this.list._37O(C,v)}});var oj=Vp.TreeTableView=function(G){var X=this,V=X._4o=new gf;X._35o(),X._98I(),X._5o(G),V.setDisplayName("Name"),V.setEditable(!0),V.setWidth(180),V.drawCell=rf,V.getValue=Of,X._39o.add(V),new fh(X)},rf=function(m,I,X,n,A,e,N,L,Z){Z._97I(m,I,X,A,e,N,L)},Of=function(t,U,x){return x.getLabel(t)};eq("TreeTableView",$,{ms_ac:[Zj,Qf,kg,"sortMode",Zg,pl,Bq,mr,"rootData","rootVisible",zg,ri,"sortColumn",bo,Wc,pd,wp,dq,Pe,cj,De,Yh,Jk,ef,Ri,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Ki,_checkMode:m,_editable:!0,_batchEditable:!1,_indent:hr,_rowHeight:Nh,_rowLineVisible:e.treeTableViewRowLineVisible,_rowLineColor:e.treeTableViewRowLineColor,_columnLineVisible:e.treeTableViewColumnLineVisible,_columnLineColor:e.treeTableViewColumnLineColor,_expandIcon:e.treeTableViewExpandIcon,_collapseIcon:e.treeTableViewCollapseIcon,_scrollBarColor:cc,_scrollBarSize:hj,_autoHideScrollBar:Ol,_autoMakeVisible:Pq,_selectBackground:e.treeTableViewSelectBackground,_labelColor:e.treeTableViewLabelColor,_labelSelectColor:e.treeTableViewLabelSelectColor,_labelFont:e.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var fh=function(w){kd(fh,this,[w])};qn(fh,Ib,{_34o:function(G,T){var X=this.list,O=X._4o,f=X._3Q(O),S=X.lp(G).x;if(f){var s=X._indent,W=f.startX+s*X.getLevel(T);if(Em(X.getToggleIcon(T))&&S>=W&&W+s>=S)return X.toggle(T),void 0;if(X.isCellEditable(T,O)&&(W+=s,S>=W&&W+s>=S))return X.checkData(T),void 0}X.setFocusData(T),X._37O(T,G)},_33o:function(h,N){var W=this.list,f=W.lp(h).x;if(Em(W.getToggleIcon(N))){var G=W._3Q(W._4o);if(G){var v=W._indent,S=G.startX+v*W.getLevel(N);if(f>=S&&S+v>=f)return W.toggle(N),void 0}}fh.superClass._33o.apply(this,arguments),W._37O(N,h)}});var Oc=Vp.TableHeader=function(m){var E=this,f=E._view=fq(1),O=E._39o=m.getColumnModel(),X=E.iv;E.tv=E._tableView=m,E._60I=new om,E._canvas=pm(f),f.style.background=e.tableHeaderBackground||"",f.style.height=Xl+Hd,O.mm(X,E),O.md(X,E),O.mh(X,E),m.mp(function(c){Pg[c.property]&&E.iv()},E),new Wh(E),E.iv()};eq("TableHeader",$,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Zj,kg,Bq,"moveBackground","insertColor",Jk,ef,"resizable","movable"],_checkIcon:Td,_movable:!0,_resizable:!0,_labelColor:e.tableHeaderLabelColor,_labelFont:e.tableHeaderLabelFont,_columnLineColor:e.tableHeaderColumnLineColor,_columnLineVisible:e.tableHeaderColumnLineVisible,_sortDescIcon:e.tableHeaderSortDescIcon,_sortAscIcon:e.tableHeaderSortAscIcon,_moveBackground:e.tableHeaderMoveBackground,_insertColor:e.tableHeaderInsertColor,_indent:hr,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(Y){return Y.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(f){return f.getColor()||this._labelColor},getLabelAlign:function(E){return E._align},onPropertyChanged:function(){this.iv()},_5Q:function(n){this._61I=n,this.iv()},getLogicalPoint:function(X){return Mm(X,this._canvas,this.tv.tx())},validateImpl:function(){var k=this,c=k._canvas,Y=k.getWidth(),D=k.getHeight(),$=k.tv,u=k._60I,I=k._61I,U=-$.tx(),B=0;(Y!==c.clientWidth||D!==c.clientHeight)&&$q(c,Y,D),u.clear(),k._39o._roots.each(function(W){if(W.isVisible()){var R=B+W.getWidth();U+Y>=B&&R>=U&&u.add({column:W,startX:B}),B=R}});var T=Gk(c);if(gc(T,-U,0,1),T.beginPath(),T.rect(U,0,Y,D),T.clip(),T.clearRect(U,0,Y,D),u.each(function(d){var l=d.column,g=d.startX,h=l.getWidth();h>0&&(T.save(),T.beginPath(),T.rect(g,0,h,D),T.clip(),I&&I.column===l||k.drawColumn(T,l,g,0,h,D),k._columnLineVisible&&Vi(T,g+h-1,0,1,D,k._columnLineColor),T.restore())}),I){var G=I.column,B=I.startX,g=I.position,h=G.getWidth();T.save(),T.beginPath(),T.rect(B,0,h,D),T.clip(),T.fillStyle=k._moveBackground,T.fill(),k.drawColumn(T,G,B,0,h,D),T.restore(),dp(T,k._insertColor,g,0,D)}T.restore()},_6Q:function(S){var b=this.tv;return b._31o===S&&b.sm().getSelectionMode()===o},drawColumn:function(g,U,W,v,J,B){var M=this,Y=M.tv,a=Em(U.getIcon()),A=M.getLabelAlign(U);if(M._6Q(U)){var S=Em(M._checkIcon);Wb(g,S,W+J/2,v+B/2,U,M)}else{var G=M.getLabel(U),f=M.getLabelFont(U),w=M.getLabelColor(U),x=Ph(f,G).width,I=a?M._indent:0;A===j?(a&&bj(g,a,ug,W,v,I,B),un(g,G,f,w,W+I,v,J,B,j)):A===O?(a&&bj(g,a,ug,W+J-x-I,v,I,B),un(g,G,f,w,W,v,J,B,O)):(a&&bj(g,a,ug,W+(J-x-I)/2,v,I,B),un(g,G,f,w,W+(J-x+I)/2,v,0,B,j))}if(U.isSortable()&&Y.getSortColumn()===U&&(a=Em(U.getSortOrder()===Tp?M._sortAscIcon:M._sortDescIcon))){var L=bp(a,U)/2+2;Wb(g,a,A===O?W+L:W+J-L,v+B/2,U,Y)}}});var Wh=function(C){var v=this;v.th=C,v.tv=C._tableView,v.addListeners()};qn(Wh,$,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(C){this.getView().style.cursor=C},handle_mousemove:function(y){if(!Aj){var z=this;delete z._29o,z.setCursor(x);for(var $=z.th,C=$._60I,R=$.lp(y).x,k=C.size()-1;k>=0;k--){var i=C.get(k),b=i.column,v=i.startX+b.getWidth();if($.isResizable()&&Y(v-R)<=(q?10:3))return z._29o=i,z.setCursor(Ef),void 0;(b.isSortable()||$.isMovable()||b===z.tv.getCheckColumn())&&R>=i.startX&&v>=R&&b.getWidth()>0&&(z._29o=i,z.setCursor(Kj))}}},handle_mousedown:function(J){this.handle_touchstart(J)},handle_touchstart:function(D){var P=this;xf(D),P.tv.endEditing(),P.handle_mousemove(D),P._29o&&(P.x=Pk(D).x,P.lx=P.th.lp(D).x,P.w=P._29o.column.getWidth(),yo(P,D))},handleWindowMouseMove:function(e){this.handleWindowTouchMove(e)},handleWindowTouchMove:function(T){var D=this,m=D.th,y=D.getView().style.cursor,C=D._29o,P=Pk(T).x-D.x;if(D.resizing||D.moving||(y===Ef?D.resizing=1:m.isMovable()&&y===Kj&&Y(P)>2&&(D.moving=1)),D.resizing)C.column.setWidth(D.w+P);else if(D.moving){var t=D.lx+P;m._60I.each(function(d){var T=d.startX,M=T+d.column.getWidth();if(t>=T&&M>=t){var W={column:C.column,startX:C.startX+P,front:M-t>t-T,insertColumn:d.column};W.position=W.front?T:M,m._5Q(W)}})}},_16Q:function(M,L){var X=this,N=X.tv,J=X.th,C=J._checkIcon;if(J._6Q(M)){var x=Em(C),O=X.lx,P=M.getWidth(),A=bp(x,M);if(O>=L+P/2-A&&L+P/2+A>=O){J.setCheckIcon(C===gr?Td:gr);var u=N.sm(),G=N._rows;return C===gr?u.rs(G):u.ss(G),N.onCheckColumnClicked(M),!0}}return!1},handleWindowMouseUp:function(H){this.handleWindowTouchEnd(H)},handleWindowTouchEnd:function(r){var C=this,Z=C.tv,w=C.th,o=C._29o;if(C.moving){var L=w._61I;if(L&&L.insertColumn!==L.column){var l=L.column,c=Z.getColumnModel()._roots,n=c.remove(l),V=c.indexOf(L.insertColumn);V>=0&&(L.front||V++,V<=c.size()&&(c.add(l,V),Z.getColumnModel()._38I(l,n,V)))}w._5Q(m),delete C.moving}else if(!C.resizing&&o){l=o.column;var q=w.lp(r).x,s=o.startX,b=!0;if(w.onColumnClicked){var z=w.onColumnClicked(l,r);z===!1&&(b=!1)}if(b&&q>=s&&q<=s+l.getWidth()&&!C._16Q(l,s)){if(l.isSortable()){var _=Z.getSortMode(),J=l.getSortOrder();_===Ki?Z.getSortColumn()===l?(J===Wf&&Z.setSortColumn(m),l.setSortOrder(J===Tp?Wf:Tp)):Z.setSortColumn(l):"bistate"===_&&(Z.getSortColumn()===l?l.setSortOrder(J===Tp?Wf:Tp):Z.setSortColumn(l))}Z.onColumnClicked(l,r)}}C._29o=C.resizing=C.x=C.lx=C.w=m}}),Vp.TablePane=function(F){this.init(new mh(F))},eq("TablePane",$,{ms_v:1,_44o:1}),Vp.TreeTablePane=function(X){this.init(new oj(X))},eq("TreeTablePane",$,{ms_v:1,_44o:1}),Vp.Toolbar=function(n){var u=this,x=u._view=fq(1),a=x.style;a.background=e.toolbarBackground||"",a.height=jb+Hd,u._canvas=pm(x),u._30o=new om,u._90I=new om,u.setItems(n||[]),x.handleGroupSelectedChanged=function(p){if(p.isSelected()){var w=p.getGroupId();null!=w&&u._items.forEach(function(R){var E=R.element;E&&E!==p&&E.setSelected&&E.getGroupId&&E.getGroupId()===w&&E.setSelected(!1)})}},new Sd(u)},eq("Toolbar",$,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[wg,Zj,kg,Qf,Ri,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:e.toolbarLabelColor,_labelSelectColor:e.toolbarLabelSelectColor,_labelFont:e.toolbarLabelFont,_selectBackground:e.toolbarSelectBackground,_itemGap:e.toolbarItemGap,_separatorColor:e.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(w){var p=this.getItemInfoAt(w);return p?p.item.toolTip:m},getLabelColor:function(M){return M.selected&&M.type!==gr&&M.type!==Ke?this._labelSelectColor:this._labelColor},onPropertyChanged:function(w){this.iv(),w.property===wg&&this._items.forEach(function(F){le(F)})},redraw:function(){this.iv()},addItem:function(V,S){var F=this._items;S==m?F.push(V):F.splice(S,0,V),this.fp(wg,m,F)},removeItem:function(b){if(b)for(var w=this._items,l=0;l<w.length;l++)b===w[l]&&(w.splice(l,1),this.fp(wg,m,w))},removeItemById:function(k){if(k!=m)for(var Z=this._items,c=0;c<Z.length;c++)k===Z[c].id&&(Z.splice(c,1),this.fp(wg,m,Z))},getItemById:function(N){if(N!=m)for(var b=this._items,T=0;T<b.length;T++){var G=b[T];if(N===G.id)return G}},getItemInfos:function(){return this._30o},getItemInfoAt:function(Z){var f=this,W=0,h=f._30o,P=f.lp(Z),D=P.x,z=P.y;if(z>=0&&z<=f.getHeight())for(;W<h.size();W++){var r=h.get(W);if(r.startX<=D&&D<=r.endX)return r}return m},drawItem:function($,L,F,t,O){if(L.visible===!1)return 0;var A=this,l=L.disabled;l&&($.globalAlpha=ur);var V=A.drawItemImpl($,L,F,t,O),Q=A._itemGap;return l&&($.globalAlpha=1),this._currentItem!==L||"separator"===L||L.unfocusable||Mr($,A._separatorColor,F-Q/2,0,V+Q,t),V},drawItemImpl:function(J,S,V,w,W){var a,$=this,N=$._view,Z=$._itemGap,D=w/2,L=S.type,n=S.label,M=$.getLabelFont(S),q=$.getLabelColor(S),T=S.selected,p=Em(S.icon),C=bp(p,S),g=0,O=S.element,I=C+(n?Ph(M,n).width:0);if("separator"===S)return dp(J,$._separatorColor,V,w/4,D),1;if(O){p&&Wb(J,p,V+C/2,D),un(J,n,M,q,V+C,0,0,w);var k=vn(O);W||$._90I.add(k),k.parentNode!==N&&If(N,k),O.iv&&O.iv(),O.validate&&O.validate();var X=k.getBoundingClientRect(),r=X.width,F=k.style;return ii(k),F.left=$.tx()+V+I+Hd,F.top=(w-X.height)/2+Hd,I+r}return L===Ke?a=Em(T?Zd:Ug):L===gr&&(a=Em(T?gr:Td)),a?(g=bp(a,S),Wb(J,a,V+g/2,D),V+=g,I+=g):T&&Vi(J,V-Z/2,0,I+Z,w,$.getSelectBackground(S)),p&&Wb(J,p,V+C/2,D),un(J,n,M,q,V+C,0,0,w),I},validateImpl:function(){var V=this,i=V._canvas,$=V.getWidth(),t=V.getHeight(),p=V._30o,o=V._items;$q(i,$,t);var l=Gk(i),y=V._itemGap,H=y/2;gc(l,V.tx(),0,1),l.clearRect(0,0,$,t);var x=V._90I;V._90I=new om,p.clear(),o.forEach(function(J){var X=V.drawItem(l,J,H,t);p.add({item:J,startX:H,endX:H+X,width:X}),X&&(H+=X+y)}),x.each(function(c){V._90I.contains(c)||Cs(c)}),V._64I=k(0,H),l.restore(),V._stickToRight?(V._65O=0,l=Gk(i),H=$-V._64I+y,gc(l,0,0,1),l.clearRect(0,0,$,t),p.clear(),o.forEach(function(s){var X=V.drawItem(l,s,H,t,!0);p.add({item:s,startX:H,endX:H+X,width:X}),X&&(H+=X+y)}),l.restore()):V.tx(V.tx())},handleClick:function(O){var w=this,p=O.type,d=O.action,x=O.groupId,N=O.selected;O.disabled||(x!=m?N||(O.selected=!0,this._items.forEach(function(t){t.groupId===x&&O!==t&&(t.selected=!1)}),d&&O.action(O,w)):p===gr||"toggle"===p?(O.selected=!N,d&&O.action(O,w)):d&&O.action(O,w)),zk(),w.iv()}});var Sd=function(r){this.tb=r,this.addListeners()};qn(Sd,$,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(V){this.handleScroll(V,10*(V.wheelDelta/40))},handle_DOMMouseScroll:function(E){this.handleScroll(E,10*-E.detail)},handleScroll:function(K,e){xf(K);var Y=this.tb;Y.isScrollable()&&!Y._stickToRight&&(Y.tx(Y.tx()+e),_h())},handle_mousemove:function(f){var B=this;Aj?B.info2=B.tb.getItemInfoAt(f):B.setItem(f)},handle_mouseout:function(s){var D=this;s.target===D.getView()?D.tb.setCurrentItem(m):D.handle_mousemove(s)},handle_mousedown:function(E){this.handle_mousemove(E),this.handle_touchstart(E)},handle_touchstart:function(v){var w=this,g=w.tb,f=v.target;(f===w.getView()||f===g._canvas)&&(xf(v),g.setFocus(v)&&(this.setItem(v),(g.isScrollable()||w.info&&!w.info.item.disabled)&&(w.x=Pk(v).x,w.tx=g.tx(),yo(w,v))))},handleWindowMouseMove:function(f){this.handleWindowTouchMove(f)},handleWindowTouchMove:function(_){var p=this,B=p.tb;if(!B._stickToRight){var G=Pk(_).x-p.x;!p._25o&&Y(G)>2&&B.isScrollable()&&(p._25o=1),p._25o&&B.tx(p.tx+G)}},handleWindowMouseUp:function(O){this.handleWindowTouchEnd(O)},handleWindowTouchEnd:function(){var H=this,S=H.tb,n=H.info,F=H.info2;if(!H._25o&&n){var z=n.item;F&&F.item!==z||S.handleClick(z)}H._25o=H.x=H.tx=H.info2=m,H.setItem()},setItem:function(V){var U=this,C=U.tb,c=U.info=V?C.getItemInfoAt(V):m;C.setCurrentItem(c?c.item:m)}}),Vp.BorderPane=function(){this._view=fq(1),this.iv()},eq("BorderPane",$,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(w,D){this._12o("leftView",w),D!=m&&this.setLeftWidth(D)},getRightView:function(){return this._rightView},setRightView:function(h,J){this._12o("rightView",h),J!=m&&this.setRightWidth(J)},getTopView:function(){return this._topView},setTopView:function(w,o){this._12o("topView",w),o!=m&&this.setTopHeight(o)},getBottomView:function(){return this._bottomView},setBottomView:function(P,C){this._12o("bottomView",P),C!=m&&this.setBottomHeight(C)},getCenterView:function(){return this._centerView},setCenterView:function(Y){this._12o("centerView",Y)},_12o:function(O,S){var e=this,C="_"+O,E=e._view,R=e[C];R!==S&&(R&&(R.getView?Cs(R.getView()):Cs(R)),e[C]=S,S&&(S.getView?If(E,S.getView(),1):If(E,S,1)),e.fp(O,R,S))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var V=this,A=V._topView,z=V._bottomView,I=V._leftView,u=V._rightView,p=V._centerView,P=V.getWidth(),M=V.getHeight(),$=0,H=0,J=P,e=M,b=0,C=0,n=0,L=0;A&&(b=V._topHeight==m?nk(A):V._topHeight,H=b),z&&(C=V._bottomHeight==m?nk(z):V._bottomHeight,e=M-C),I&&(n=V._leftWidth==m?tr(I):V._leftWidth,$=n),u&&(L=V._rightWidth==m?tr(u):V._rightWidth,J=P-L);
var j=k(0,J-$),l=k(0,e-H);A&&Sq(A,0,0,P,b),z&&Sq(z,0,e,P,C),I&&Sq(I,0,H,n,l),u&&Sq(u,J,H,L,l),p&&Sq(p,$,H,j,l)}})}}(this,Object);